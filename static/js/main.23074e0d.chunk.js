(this.webpackJsonpstave_front=this.webpackJsonpstave_front||[]).push([[0],{1224:function(e,t,n){},1225:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),i=n(34),o=n.n(i),r=n(13),l=n(399),s=n(1265),d=n(444),u=Object(d.a)({palette:{spotify:{main:"#1DB954",light:"#a2ebbc"},twitter:{main:"#1da1f2",dark:"#158ad1"},itunes:{main:"#fa57c1",light:"#ffbfe9"}}}),j=n(1),b=function(e){var t=e.children;return Object(j.jsx)(s.a,{theme:u,children:t})},O=n(9),m=n(404),h=n(96),f=n(111),p=n(405),x=n.n(p),g=n(64),v={currentUser:void 0,headers:void 0},S=Object(h.b)({name:"currentUser",initialState:v,reducers:{setCurrentUser:function(e,t){e.currentUser=t.payload},setHeaders:function(e,t){var n,a=t.payload,c=a["content-type"],i=a["access-token"],o=a.client,r=a.uid,l=(null===(n=e.headers)||void 0===n?void 0:n.headers["access-token"])||"";e.headers={headers:{"content-type":c,"access-token":i||l,client:o,uid:r}}},remove:function(e){e.currentUser=void 0,e.headers=void 0}}}),k=function(e){return e.currentUser.currentUser},y=function(e){return e.currentUser.headers},C=S.actions,I=C.setCurrentUser,P=C.setHeaders,w=C.remove,E=S.reducer,U={code:void 0,token:void 0},A=Object(h.b)({name:"spotify",initialState:U,reducers:{setCode:function(e,t){e.code=t.payload},setToken:function(e,t){e.token=t.payload},remove:function(e){e.code="",e.token=void 0}}}),L=function(e){return e.spotify.token},M=A.actions,N=(M.setCode,M.setToken),T=M.remove,$=A.reducer,R=n(7),q=n(8),B={email:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",familyname:"\u59d3",givenname:"\u540d",signout:"\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8",signoutSuccessful:"\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f",signin:"\u30b5\u30a4\u30f3\u30a4\u30f3",signinSuccessful:"\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u307e\u3057\u305f",signup:"\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7",signupSuccessful:"\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u3057\u307e\u3057\u305f",nickname:"\u30cb\u30c3\u30af\u30cd\u30fc\u30e0",password:"\u30d1\u30b9\u30ef\u30fc\u30c9",passwordConfirmation:"\u30d1\u30b9\u30ef\u30fc\u30c9(\u78ba\u8a8d)"},D=Object(q.a)(Object(q.a)({},B),{},{account:"\u30a2\u30ab\u30a6\u30f3\u30c8",addArtist:"\u30a2\u30fc\u30c6\u30a3\u30b9\u30c8\u8ffd\u52a0",addAlbum:"\u30a2\u30eb\u30d0\u30e0\u8ffd\u52a0",album:"\u30a2\u30eb\u30d0\u30e0",albums:"\u30a2\u30eb\u30d0\u30e0",alertDelete:"\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\uff1f",artist:"\u30a2\u30fc\u30c6\u30a3\u30b9\u30c8",artists:"\u30a2\u30fc\u30c6\u30a3\u30b9\u30c8",band:"\u30d0\u30f3\u30c9",bands:"\u30d0\u30f3\u30c9",beBookmarked:"{username}\u304c{music}\u3092\u304a\u6c17\u306b\u5165\u308a\u3057\u307e\u3057\u305f",beFollowed:"{username}\u306b\u30d5\u30a9\u30ed\u30fc\u3055\u308c\u307e\u3057\u305f",contact:"\u554f\u3044\u5408\u308f\u305b",create:"\u4f5c\u6210",composer:"\u4f5c\u66f2\u8005",composers:"\u4f5c\u66f2\u8005",createArtist:"\u30a2\u30fc\u30c6\u30a3\u30b9\u30c8\u3092\u4f5c\u6210",createAlbum:"\u30a2\u30eb\u30d0\u30e0\u3092\u4f5c\u6210",createMusic:"\u66f2\u3092\u4f5c\u6210",createBand:"\u30d0\u30f3\u30c9\u3092\u4f5c\u6210",createIssue:"\u554f\u984c\u3092\u4f5c\u6210",delete:"\u524a\u9664",description:"\u8aac\u660e",edit:"\u7de8\u96c6",editAlbum:"\u30a2\u30eb\u30d0\u30e0\u3092\u7de8\u96c6",editInfo:"\u60c5\u5831\u3092\u7de8\u96c6",follower:"\u30d5\u30a9\u30ed\u30ef\u30fc",following:"\u30d5\u30a9\u30ed\u30fc\u4e2d",followUs:"\u30d5\u30a9\u30ed\u30fc\u3059\u308b",unfollowUs:"\u30d5\u30a9\u30ed\u30fc\u89e3\u9664",file:"\u30d5\u30a1\u30a4\u30eb",issues:"\u554f\u984c",info:"\u60c5\u5831",link:"\u30ea\u30f3\u30af",lyric:"\u6b4c\u8a5e",lyrists:"\u4f5c\u8a5e\u8005",main:"\u30e1\u30a4\u30f3",music:"\u66f2",musics:"\u66f2",name:"\u540d\u524d",noNotification:"",pleaseTranslate:"\u7ffb\u8a33\u306e\u3054\u5354\u529b\u304a\u9858\u3044\u3057\u307e\u3059",pleaseType:"{value}\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",profile:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb",role:"\u5f79\u5272",releaseDate:"\u767a\u58f2\u65e5",searchByItunes:"iTunes\u3067\u691c\u7d22",searchIssues:"\u554f\u984c\u3092\u691c\u7d22",setting:"\u8a2d\u5b9a",title:"\u30bf\u30a4\u30c8\u30eb",translateTitle:"\u30bf\u30a4\u30c8\u30eb\u3092\u7ffb\u8a33",translateName:"\u540d\u524d\u3092\u7ffb\u8a33",user:"\u30e6\u30fc\u30b6\u30fc",users:"\u30e6\u30fc\u30b6\u30fc",untranslation:"\u672a\u7ffb\u8a33",watchScore:"\u697d\u8b5c\u3092\u898b\u308b"}),_={email:"Email",familyname:"FamilyName",givenname:"GivenName",signout:"SignOut",signoutSuccessful:"SignOut Successful",signin:"SignIn",signinSuccessful:"SignIn Successful",signup:"SignUp",signupSuccessful:"SignUp Successful",nickname:"Nickname",password:"Password",passwordConfirmation:"Password Confirmation"},W=Object(q.a)(Object(q.a)({},_),{},{account:"Account",addArtist:"Add Artist",addAlbum:"Add Album",album:"Album",albums:"Albums",alertDelete:"Are you absolutely sure?",artist:"Artist",artists:"Artists",band:"Band",bands:"Bands",beFollowed:"followed by {username}",beBookmarked:"{music} bookmarked by {username}",contact:"Contact",create:"Create",composer:"Composer",composers:"Composers",createArtist:"Create Artist",createAlbum:"Create Album",createMusic:"Create Music",createBand:"Create Band",createIssue:"Create Issue",delete:"Delete",description:"Description",edit:"Edit",editAlbum:"Edit Album",editInfo:"Edit Info",follower:"Follower",following:"Following",followUs:"Follow",unfollowUs:"Unfollow",file:"file",issues:"issues",info:"info",link:"Link",lyric:"Lyric",lyrists:"Lyrists",main:"main",music:"Music",musics:"Musics",name:"Name",noNotification:"No Notification",pleaseTranslate:"Please Translate",pleaseType:"Please type {value}",profile:"Profile",releaseDate:"Release Date",searchByItunes:"Search By Itunes",searchIssues:"Search Issues",role:"Role",setting:"Setting",title:"title",translateTitle:"Translate Title",translateName:"Translate Name",user:"User",users:"Users",untranslation:"Untranslation",watchScore:"Watch Score"}),V=function(){return navigator.language};function F(e){switch(e){case"en":return W;case"ja":return D;default:return W}}var K={language:V(),locale:V().split("-")[0],countryCode:V().split("-")[1],messages:F()},Q=Object(h.b)({name:"spotify",initialState:K,reducers:{set:function(e,t){var n=t.payload,a=n.split("-"),c=Object(R.a)(a,2),i=c[0],o=c[1];e.language=n,e.locale=i,e.countryCode=o},setLocale:function(e,t){e.locale=t.payload},setCountryCode:function(e,t){e.countryCode=t.payload},remove:function(e){var t=V().split("-"),n=Object(R.a)(t,2),a=n[0],c=n[1];e.language=c,e.locale=a,e.countryCode="US"}}}),z=function(e){return e.language.locale},Y=function(e){return e.language.countryCode},G=function(e){return F(e.language.locale)},H=Q.actions,J=(H.set,H.remove,H.setLocale),X=H.setCountryCode,Z=Q.reducer,ee=Object(h.b)({name:"spotify",initialState:{opened:!1},reducers:{close:function(e){e.opened=!1},open:function(e){e.opened=!0}}}),te=function(e){return e.authModal.opened},ne=ee.actions,ae=ne.close,ce=ne.open,ie=ee.reducer,oe=Object(g.b)({currentUser:E,spotify:$,language:Z,authModal:ie}),re={key:"root",version:1,storage:x.a},le=Object(f.g)(re,oe),se=Object(h.c)({serializableCheck:{ignoredActions:[f.a,f.f,f.b,f.c,f.d,f.e]}}),de=Object(h.a)({reducer:le,middleware:se}),ue=Object(f.h)(de),je=function(e){var t=e.children;return Object(j.jsx)(O.a,{store:de,children:Object(j.jsx)(m.a,{loading:null,persistor:ue,children:t})})},be=n(1317),Oe=n(220),me=new be.a,he=function(e){var t=e.children;return Object(j.jsx)(Oe.a,{client:me,children:t})},fe=n(91),pe=function(e){var t=e.children;return Object(j.jsx)(fe.a,{maxSnack:3,children:t})},xe=n(1312),ge=function(e){var t=e.children,n=Object(O.c)(z),a=Object(O.c)(G);return Object(j.jsx)(xe.a,{messages:a,locale:n,defaultLocale:"en",children:t})},ve=n(48),Se=n(4),ke=n(1285),ye=n(1325),Ce=n(130),Ie=n(1275),Pe=n(224),we=n.n(Pe),Ee=n(225),Ue=n.n(Ee),Ae=n(223),Le=n.n(Ae),Me=n(226),Ne=n.n(Me),Te=n(68),$e=n.n(Te),Re=n(1276),qe=n(1271),Be=n(1277),De=n(1274),_e=n(1272),We=n(1273),Ve=n(1270),Fe=n(446),Ke=n(1269),Qe=n(1314),ze=function(e){var t=e.page,n=e.pageCount,a=e.onPage,c=e.loading,i=e.children;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(Ke.a,{component:Fe.a,children:[i,c&&Object(j.jsx)(Ve.a,{})]}),t&&Object(j.jsx)(Qe.a,{count:n,page:t,onChange:a})]})};ze.defaultProps={page:void 0,pageCount:void 0,onPage:void 0,loading:!1};var Ye=ze,Ge=n(1319),He=n(140),Je=n.n(He),Xe=Je.a.create({baseURL:"https://itunes.apple.com"}),Ze=function(e){var t=e.id;return Xe.jsonp("/lookup",{params:{id:t,entity:"musicArtist"}})},et=function(e){var t=e.id;return Xe.jsonp("/lookup",{params:{id:t,entity:"album"}})},tt=function(e){var t=e.id;return Xe.jsonp("/lookup",{params:{id:t,entity:"song"}})},nt=function(){var e=Object(O.b)(),t=Object(fe.b)().enqueueSnackbar;return{onError:function(n){var a;401===(null===(a=n.response)||void 0===a?void 0:a.status)&&(e(w()),e(ce())),t(String(n),{variant:"error"})}}};function at(e,t){var n=t.id,a=t.options,c=e.key,i=e.fn,o=nt().onError;return Object(Ge.a)(["itunes",c,n],(function(){return i({id:n}).then((function(e){return e.results}))}),Object(q.a)(Object(q.a)({},a),{},{enabled:!!n,onError:o}))}var ct=function(e){var t=e.id,n=e.options;return at({key:"music",fn:tt},{id:t,options:n})},it=function(e){var t=e.id,n=e.options;return at({key:"album",fn:et},{id:t,options:n})},ot=function(e){var t=e.id,n=e.options;return at({key:"artist",fn:Ze},{id:t,options:n})},rt=function(e){var t=e.musics,n=e.page,a=e.pageCount,c=e.onPage,i=e.loading,o=t.map((function(e){return e.link.itunes||0})).join(","),l=[{route:Se.MUSICS,name:"musics"},{route:Se.BANDS,name:"bands"},{route:Se.ARTISTS,name:"composers"},{route:Se.ARTISTS,name:"lyrists"},{route:Se.USERS,name:"users"}],s=0,d="",u=ct({id:o,options:{enabled:!!o}});return Object(j.jsx)(Ye,{page:n,pageCount:a,onPage:c,loading:i,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{}),l.map((function(e){return Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:e.route,children:Object(j.jsx)(Re.a,{id:e.name})})},e.name)}))]})}),Object(j.jsx)(Be.a,{children:null===t||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.title,a=e.band,c=e.user,i=e.composers,o=e.lyrists,l=e.link;return u.data&&u.data[s]&&l.itunes===u.data[s].trackId?(d=u.data[s].artworkUrl60,s+=1):d=void 0,Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:d&&Object(j.jsx)($e.a,{loading:u.isLoading,src:d})}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.USERS,"/").concat(c.id).concat(Se.MUSICS,"/").concat(t),children:n})}),Object(j.jsx)(De.a,{children:a&&Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.BANDS,"/").concat(a.id),children:null===a||void 0===a?void 0:a.name})}),Object(j.jsx)(De.a,{children:null===i||void 0===i?void 0:i.map((function(e){return Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))}),Object(j.jsx)(De.a,{children:null===o||void 0===o?void 0:o.map((function(e){return Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))}),Object(j.jsx)(De.a,{children:c&&Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.USERS,"/").concat(c.id),children:c.nickname})})]},t)}))})]})})},lt=function(e){var t=e.albums,n=e.loading,a=e.page,c=e.pageCount,i=e.onPage,o=t.map((function(e){return e.link.itunes})).join(","),l=0,s="",d=it({id:o});return Object(j.jsx)(Ye,{page:a,pageCount:c,onPage:i,loading:n,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:Se.ALBUMS,children:Object(j.jsx)(Re.a,{id:"albums"})})})]})}),Object(j.jsx)(Be.a,{children:null===t||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.title,a=e.link;return a.itunes&&d.data&&d.data[l]&&a.itunes===d.data[l].collectionId?(s=d.data[l].artworkUrl60,l+=1):s=void 0,Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:s&&Object(j.jsx)($e.a,{src:s})}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.ALBUMS,"/").concat(t),children:n})})]},t)}))})]})})},st=n(445),dt=n(101),ut=function(){return Object(j.jsx)(st.a,{children:Object(j.jsx)(dt.c,{})})},jt=n(1278),bt=function(e){var t=e.href,n=e.windowFeatures,a=e.children,c=e.onWindow;return Object(j.jsx)(jt.a,{component:Ie.a,rel:"noopener noreferrer",disabled:!t,onClick:function(){var e=window.open(t,void 0,n);c&&c(e)},children:a})};bt.defaultProps={href:void 0,windowFeatures:void 0,onWindow:void 0};var Ot=bt,mt=function(e){var t=e.artists,n=e.page,a=e.pageCount,c=e.onPage,i=e.loading;return Object(j.jsx)(Ye,{page:n,pageCount:a,onPage:c,loading:i,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:Se.ARTISTS,children:Object(j.jsx)(Re.a,{id:"artists"})})}),Object(j.jsx)(De.a,{})]})}),Object(j.jsx)(Be.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.ARTISTS,"/").concat(e.id),children:e.name})}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Ot,{href:e.link.twitter?"https://twitter.com/".concat(e.link.twitter):void 0,children:Object(j.jsx)(ut,{})})})]},e.id)}))})]})})},ht=function(e){var t=e.bands,n=e.page,a=e.pageCount,c=e.onPage,i=e.loading;return Object(j.jsx)(Ye,{page:n,pageCount:a,onPage:c,loading:i,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.BANDS),children:Object(j.jsx)(Re.a,{id:"bands"})})}),Object(j.jsx)(De.a,{})]})}),Object(j.jsx)(Be.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.BANDS,"/").concat(e.id),children:e.name})}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Ot,{href:e.link.twitter?"https://twitter.com/".concat(e.link.twitter):void 0,children:Object(j.jsx)(ut,{})})})]},e.id)}))})]})})},ft=n(1279),pt=n(1282),xt=n(1280),gt=n(1283),vt=function(e){var t=e.icon,n=e.title,a=e.messageId,c=e.to;return Object(j.jsxs)(ft.a,{variant:"outlined",children:[Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(ye.a,{textAlign:"center",children:t}),Object(j.jsx)(Ce.a,{variant:"h5",component:"h2",children:Object(j.jsx)(Re.a,{id:n})}),Object(j.jsx)(Ce.a,{color:"textSecondary",children:Object(j.jsx)(Re.a,{id:a})}),Object(j.jsx)(Ce.a,{variant:"body2",component:"p",children:Object(j.jsx)(Re.a,{id:a})})]}),Object(j.jsx)(pt.a,{children:Object(j.jsx)(gt.a,{size:"small",component:r.b,to:"".concat(c).concat(Se.NEW),children:Object(j.jsx)(Re.a,{id:"create"})})})]})},St=n(28),kt=n(408),yt=n.n(kt);n(515),n(516);var Ct,It,Pt,wt,Et,Ut,At,Lt,Mt,Nt,Tt,$t,Rt,qt,Bt,Dt,_t,Wt,Vt,Ft,Kt,Qt,zt,Yt,Gt,Ht,Jt,Xt,Zt,en,tn=function(e){var t,n,a=e.cards,c=e.children;return Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(yt.a,{speed:500,children:(t=a||[],n=2,t.reduce((function(e,a,c){return c%n?e:[].concat(Object(St.a)(e),[t.slice(c,c+n)])}),[])).map((function(e){var t=Object(R.a)(e,2),n=t[0],a=t[1];return Object(j.jsx)(ye.a,{py:3,children:c(n,a)},n.id)}))})})},nn=n(1268),an=n(1284),cn=Object(nn.a)({media:{height:100,width:100}}),on=function(e){var t,n,a,c=e.music,i=e.onClick,o=cn(),r=ct({id:c.link.itunes}).data;return Object(j.jsx)(ft.a,{onClick:i,children:Object(j.jsxs)(ye.a,{display:"flex",children:[Object(j.jsx)(ye.a,{display:"flex",justifyItems:"center",alignItems:"center",p:1,children:r&&r.length&&Object(j.jsx)(an.a,{image:r[0].artworkUrl60,className:o.media})}),Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Ce.a,{variant:"h6",noWrap:!0,children:c.title}),(null===(t=c.band)||void 0===t?void 0:t.name)&&Object(j.jsxs)(Ce.a,{color:"textSecondary",noWrap:!0,children:[Object(j.jsx)(Re.a,{id:"band"}),": ",null===(n=c.band)||void 0===n?void 0:n.name]}),(null===(a=c.composers)||void 0===a?void 0:a.length)?Object(j.jsxs)(Ce.a,{color:"textSecondary",noWrap:!0,children:[Object(j.jsx)(Re.a,{id:"composer"}),":"," ",c.composers.map((function(e){return Object(j.jsx)("span",{children:e.name},e.id)}))]}):null]})]})})},rn=function(e,t){return"".concat(Se.USERS,"/").concat(e||"undefined").concat(Se.MUSICS,"/").concat(t)},ln=function(e){var t=e.data,n=Object(ve.f)();return Object(j.jsx)(tn,{cards:t,children:function(e,t){return Object(j.jsxs)(ke.a,{container:!0,spacing:2,children:[Object(j.jsx)(ke.a,{item:!0,xs:6,children:Object(j.jsx)(on,{onClick:function(){var t;return n.push(rn(null===(t=e.user)||void 0===t?void 0:t.id,e.id))},music:e})}),Object(j.jsx)(ke.a,{item:!0,xs:6,children:Object(j.jsx)(on,{onClick:function(){var e;return n.push(rn(null===(e=t.user)||void 0===e?void 0:e.id,t.id))},music:t})})]})}})},sn=n(1286),dn=function(e){var t=e.children;return Object(j.jsx)(sn.a,{children:Object(j.jsx)(ye.a,{my:5,children:t})})},un=function(){var e=Object(a.useState)(1),t=Object(R.a)(e,2),n=t[0],c=t[1];return[n,Object(a.useCallback)((function(e,t){return c(t)}),[])]},jn=n.p+"static/media/stave.0a675c07.png",bn=n(18),On=n(20),mn=Object(bn.gql)(Ct||(Ct=Object(On.a)(["\n  query getAlbum($id: Int!, $currentUserId: Int, $locale: String!) {\n    album(id: $id) {\n      id\n      title(locale: $locale)\n      localed(locale: $locale)\n      link {\n        id\n        itunes\n      }\n      artists {\n        id\n        name(locale: $locale)\n        link {\n          id\n          twitter\n        }\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),hn=Object(bn.gql)(It||(It=Object(On.a)(["\n  query getAlbumMusics($id: Int!, $musicPage: Int!, $locale: String!) {\n    album(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title(locale: $locale)\n          link {\n            itunes\n            spotify\n          }\n          band {\n            name(locale: $locale)\n          }\n          composers {\n            id\n            name(locale: $locale)\n          }\n          lyrists {\n            id\n            name(locale: $locale)\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),fn=Object(bn.gql)(Pt||(Pt=Object(On.a)(["\n  query getAlbums($page: Int!, $locale: String!, $q: JSON) {\n    albums(page: $page, locale: $locale, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        title(locale: $locale)\n        link {\n          itunes\n        }\n      }\n    }\n  }\n"]))),pn=Object(bn.gql)(wt||(wt=Object(On.a)(["\n  query getArtist($id: Int!, $currentUserId: Int, $locale: String!) {\n    artist(id: $id) {\n      id\n      name(locale: $locale)\n      localed(locale: $locale)\n      link {\n        id\n        itunes\n        twitter\n        spotify\n        wikipedia(locale: $locale)\n        youtube\n      }\n      bands {\n        id\n        name(locale: $locale)\n        link {\n          itunes\n        }\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),xn=Object(bn.gql)(Et||(Et=Object(On.a)(["\n  query getArtist($id: Int!, $albumPage: Int!, $locale: String!) {\n    artist(id: $id) {\n      albums(albumPage: $albumPage) {\n        data {\n          id\n          title(locale: $locale)\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),gn=Object(bn.gql)(Ut||(Ut=Object(On.a)(["\n  query getMusics($id: Int!, $musicPage: Int!, $locale: String!) {\n    artist(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title(locale: $locale)\n          link {\n            itunes\n          }\n          band {\n            id\n            name(locale: $locale)\n          }\n          composers {\n            id\n            name(locale: $locale)\n          }\n          lyrists {\n            id\n            name(locale: $locale)\n          }\n          user {\n            id\n            nickname\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),vn=Object(bn.gql)(At||(At=Object(On.a)(["\n  query getArtists($page: Int!, $locale: String!, $q: JSON) {\n    artists(page: $page, locale: $locale, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        name(locale: $locale)\n        link {\n          twitter\n        }\n      }\n    }\n  }\n"]))),Sn=Object(bn.gql)(Lt||(Lt=Object(On.a)(["\n  query getBand($id: Int!, $currentUserId: Int, $locale: String!) {\n    band(id: $id) {\n      id\n      name(locale: $locale)\n      localed(locale: $locale)\n      link {\n        id\n        itunes\n        twitter\n        spotify\n        wikipedia(locale: $locale)\n        youtube\n      }\n      artists {\n        id\n        name(locale: $locale)\n        link {\n          id\n          twitter\n        }\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),kn=Object(bn.gql)(Mt||(Mt=Object(On.a)(["\n  query getBandAlbums($id: Int!, $albumPage: Int!, $locale: String!) {\n    band(id: $id) {\n      albums(albumPage: $albumPage) {\n        data {\n          id\n          title(locale: $locale)\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),yn=Object(bn.gql)(Nt||(Nt=Object(On.a)(["\n  query getBandMusics($id: Int!, $musicPage: Int!, $locale: String!) {\n    band(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title(locale: $locale)\n          composers {\n            id\n            name(locale: $locale)\n          }\n          lyrists {\n            id\n            name(locale: $locale)\n          }\n          user {\n            id\n            nickname\n          }\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Cn=Object(bn.gql)(Tt||(Tt=Object(On.a)(["\n  query getIssue($id: Int!) {\n    issue(id: $id) {\n      id\n      title\n      description\n    }\n  }\n"]))),In=Object(bn.gql)($t||($t=Object(On.a)(["\n  query getBands($page: Int!, $locale: String!, $q: JSON) {\n    bands(page: $page, locale: $locale, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        name(locale: $locale)\n        link {\n          twitter\n        }\n      }\n    }\n  }\n"]))),Pn=Object(bn.gql)(Rt||(Rt=Object(On.a)(["\n  query getIssues($musicId: Int!, $page: Int!) {\n    issues(musicId: $musicId, page: $page) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        title\n        description\n      }\n    }\n  }\n"]))),wn=Object(bn.gql)(qt||(qt=Object(On.a)(["\n  query getMusic($id: Int!, $locale: String!, $currentUserId: Int) {\n    music(id: $id) {\n      id\n      title(locale: $locale)\n      scoreExist\n      localed(locale: $locale)\n      link {\n        id\n        musixmatch\n        itunes\n        spotify\n        youtube\n      }\n      user {\n        id\n        nickname\n      }\n      band {\n        id\n        name(locale: $locale)\n      }\n      artistMusics {\n        id\n        role\n        artist {\n          id\n          name(locale: $locale)\n        }\n      }\n      composers {\n        id\n        name(locale: $locale)\n      }\n      lyrists {\n        id\n        name(locale: $locale)\n      }\n      albums {\n        id\n        title(locale: $locale)\n        link {\n          itunes\n        }\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),En=Object(bn.gql)(Bt||(Bt=Object(On.a)(["\n  query getRootTree($id: Int!) {\n    music(id: $id) {\n      rootTree {\n        oid\n        type\n        name\n        filemode\n      }\n    }\n  }\n"]))),Un=Object(bn.gql)(Dt||(Dt=Object(On.a)(["\n  query getMusic($id: Int!, $locale: String!) {\n    music(id: $id) {\n      id\n      title(locale: $locale)\n      score\n    }\n  }\n"]))),An=Object(bn.gql)(_t||(_t=Object(On.a)(["\n  query getMusics($page: Int!, $locale: String!, $q: JSON) {\n    musics(page: $page, locale: $locale, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        title(locale: $locale)\n        link {\n          itunes\n        }\n        user {\n          id\n          nickname\n        }\n        band {\n          id\n          name(locale: $locale)\n        }\n        composers {\n          id\n          name(locale: $locale)\n        }\n        lyrists {\n          id\n          name(locale: $locale)\n        }\n      }\n    }\n  }\n"]))),Ln=Object(bn.gql)(Wt||(Wt=Object(On.a)(["\n  query getUser($id: Int!, $currentUserId: Int) {\n    user(id: $id) {\n      nickname\n      introduction\n      followingCount\n      followersCount\n      followed(currentUserId: $currentUserId) {\n        id\n      }\n    }\n  }\n"]))),Mn=Object(bn.gql)(Vt||(Vt=Object(On.a)(["\n  query getBookmarkAlbums(\n    $id: Int!\n    $bookmarkedAlbumPage: Int!\n    $locale: String!\n  ) {\n    user(id: $id) {\n      bookmarkedAlbums(bookmarkedAlbumPage: $bookmarkedAlbumPage) {\n        data {\n          id\n          title(locale: $locale)\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Nn=Object(bn.gql)(Ft||(Ft=Object(On.a)(["\n  query getBookmarkArtists(\n    $id: Int!\n    $bookmarkedArtistPage: Int!\n    $locale: String!\n  ) {\n    user(id: $id) {\n      bookmarkedArtists(bookmarkedArtistPage: $bookmarkedArtistPage) {\n        data {\n          id\n          name(locale: $locale)\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Tn=Object(bn.gql)(Kt||(Kt=Object(On.a)(["\n  query getBookmarkBands(\n    $id: Int!\n    $bookmarkedBandPage: Int!\n    $locale: String!\n  ) {\n    user(id: $id) {\n      bookmarkedBands(bookmarkedBandPage: $bookmarkedBandPage) {\n        data {\n          id\n          name(locale: $locale)\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),$n=Object(bn.gql)(Qt||(Qt=Object(On.a)(["\n  query getBookmarkMusic(\n    $id: Int!\n    $bookmarkedMusicPage: Int!\n    $locale: String!\n  ) {\n    user(id: $id) {\n      bookmarkedMusics(bookmarkedMusicPage: $bookmarkedMusicPage) {\n        data {\n          id\n          title(locale: $locale)\n          band {\n            name(locale: $locale)\n          }\n          composers {\n            id\n            name(locale: $locale)\n          }\n          lyrists {\n            id\n            name(locale: $locale)\n          }\n          link {\n            itunes\n          }\n          user {\n            nickname\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Rn=Object(bn.gql)(zt||(zt=Object(On.a)(["\n  query getUserFollower($id: Int!, $followerPage: Int!) {\n    user(id: $id) {\n      followers(followerPage: $followerPage) {\n        pagination {\n          totalPages\n        }\n        data {\n          id\n          nickname\n          link {\n            twitter\n          }\n        }\n      }\n    }\n  }\n"]))),qn=Object(bn.gql)(Yt||(Yt=Object(On.a)(["\n  query getUserFollowing($id: Int!, $followingPage: Int!) {\n    user(id: $id) {\n      following(followingPage: $followingPage) {\n        pagination {\n          totalPages\n        }\n        data {\n          id\n          nickname\n          link {\n            twitter\n          }\n        }\n      }\n    }\n  }\n"]))),Bn=Object(bn.gql)(Gt||(Gt=Object(On.a)(["\n  query getUserMusics($id: Int!, $musicPage: Int!, $locale: String!) {\n    user(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title(locale: $locale)\n          band {\n            name(locale: $locale)\n          }\n          composers {\n            id\n            name(locale: $locale)\n          }\n          lyrists {\n            id\n            name(locale: $locale)\n          }\n          link {\n            itunes\n          }\n          user {\n            id\n            nickname\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Dn=Object(bn.gql)(Ht||(Ht=Object(On.a)(["\n  query getUserMusics($id: Int!) {\n    user(id: $id) {\n      link {\n        id\n        twitter\n      }\n    }\n  }\n"]))),_n=Object(bn.gql)(Jt||(Jt=Object(On.a)(["\n  query getUsers($page: Int!, $q: JSON) {\n    users(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        nickname\n        link {\n          twitter\n        }\n      }\n    }\n  }\n"]))),Wn=Object(bn.gql)(Xt||(Xt=Object(On.a)(["\n  query getBlob($id: Int!, $oid: String!) {\n    music(id: $id) {\n      blob(oid: $oid)\n    }\n  }\n"]))),Vn=Object(bn.gql)(Zt||(Zt=Object(On.a)(["\n  query getBlob($id: Int!, $oid: String!) {\n    music(id: $id) {\n      tree(oid: $oid) {\n        oid\n        type\n        name\n        filemode\n      }\n    }\n  }\n"]))),Fn="https://stave-service.com",Kn=Object(bn.gql)(en||(en=Object(On.a)(["\n  query getNotifications($id: Int!, $notificationPage: Int!, $locale: String!) {\n    user(id: $id) {\n      notifications(notificationPage: $notificationPage) {\n        data {\n          id\n          recipientType\n          recipientId\n          type\n          params {\n            userRelationship {\n              followed {\n                id\n                nickname\n              }\n              follower {\n                id\n                nickname\n              }\n            }\n            musicBookmark {\n              user {\n                id\n                nickname\n              }\n              music {\n                id\n                title(locale: $locale)\n              }\n            }\n          }\n          readAt\n          createdAt\n          updatedAt\n        }\n        pagination {\n          totalPages\n        }\n        notificationExist\n      }\n    }\n  }\n"]))),Qn=new bn.GraphQLClient("".concat(Fn,"/graphql")),zn=function(e){var t=e.page,n=e.q;return function(){return Qn.request(_n,{page:t,q:n}).then((function(e){return e.users}))}},Yn=function(e){var t=e.id,n=e.currentUserId;return function(){return Qn.request(Ln,{id:t,currentUserId:n}).then((function(e){return e.user}))}},Gn=function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request(Bn,{id:t,musicPage:n,locale:a}).then((function(e){return e.user.musics}))}},Hn=function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request(Kn,{id:t,notificationPage:n,locale:a}).then((function(e){return e.user.notifications}))}},Jn=function(e){var t=e.id,n=e.page;return function(){return Qn.request(Rn,{id:t,followerPage:n}).then((function(e){return e.user.followers}))}},Xn=function(e){var t=e.id,n=e.page;return function(){return Qn.request(qn,{id:t,followingPage:n}).then((function(e){return e.user.following}))}},Zn=function(e){var t=e.page,n=e.locale,a=e.q;return function(){return Qn.request(An,{page:t,locale:n,q:a}).then((function(e){return e.musics}))}},ea=function(e){var t=e.id,n=e.locale,a=e.currentUserId;return function(){return Qn.request(wn,{id:t,locale:n,currentUserId:a}).then((function(e){return e.music}))}},ta=function(e){var t=e.id,n=e.locale;return function(){return Qn.request(Un,{id:t,locale:n}).then((function(e){return e.music}))}},na=function(e){var t=e.id;return function(){return Qn.request(En,{id:t}).then((function(e){return e.music}))}},aa=function(e){var t=e.id,n=e.oid;return function(){return Qn.request(Vn,{id:t,oid:n}).then((function(e){return e.music}))}},ca=function(e){var t=e.id,n=e.oid;return function(){return Qn.request(Wn,{id:t,oid:n}).then((function(e){return e.music}))}},ia=function(e){var t=e.id,n=e.page,a=e.q;return function(){return Qn.request(Pn,{musicId:t,page:n,q:a}).then((function(e){return e.issues}))}},oa=function(e){var t=e.id;return function(){return Qn.request(Cn,{id:t}).then((function(e){return e.issue}))}},ra=function(e){var t=e.page,n=e.locale,a=e.q;return function(){return Qn.request(In,{page:t,locale:n,q:a}).then((function(e){return e.bands}))}},la=function(e){var t=e.id,n=e.locale,a=e.currentUserId;return function(){return Qn.request(Sn,{id:t,locale:n,currentUserId:a}).then((function(e){return e.band}))}},sa=function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request(kn,{id:t,albumPage:n,locale:a}).then((function(e){return e.band.albums}))}},da=function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request(yn,{id:t,musicPage:n,locale:a}).then((function(e){return e.band.musics}))}},ua=function(e){var t=e.page,n=e.locale,a=e.q;return function(){return Qn.request(vn,{page:t,locale:n,q:a}).then((function(e){return e.artists}))}},ja=function(e){var t=e.id,n=e.locale,a=e.currentUserId;return function(){return Qn.request(pn,{id:t,locale:n,currentUserId:a}).then((function(e){return e.artist}))}},ba=function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request(xn,{id:t,albumPage:n,locale:a}).then((function(e){return e.artist.albums}))}},Oa=function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request(gn,{id:t,musicPage:n,locale:a}).then((function(e){return e.artist.musics}))}},ma=function(e){var t=e.page,n=e.locale,a=e.q;return function(){return Qn.request(fn,{page:t,locale:n,q:a}).then((function(e){return e.albums}))}},ha=function(e){var t=e.id,n=e.locale,a=e.currentUserId;return function(){return Qn.request(mn,{id:t,locale:n,currentUserId:a}).then((function(e){return e.album}))}},fa=function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request(hn,{id:t,musicPage:n,locale:a}).then((function(e){return e.album.musics}))}};function pa(e,t){var n=t.page,a=t.locale,c=t.q,i=t.options,o=e.key,r=e.fn,l=nt().onError;return Object(Ge.a)([o,n,a,c],r(t),Object(q.a)(Object(q.a)({},i),{},{onError:l}))}var xa=function(e){return pa({key:"musics",fn:Zn},e)},ga=function(e){return pa({key:"albums",fn:ma},e)},va=function(e){return pa({key:"artists",fn:ua},e)},Sa=function(e){return pa({key:"bands",fn:ra},e)};function ka(e,t){var n=t.id,a=t.page,c=t.locale,i=t.q,o=t.options,r=e.firstKey,l=e.secondKey,s=e.fn,d=nt().onError;return Object(Ge.a)([r,n,l,c,a,i],s(t),Object(q.a)(Object(q.a)({},o),{},{onError:d}))}function ya(e,t){var n=t.id,a=t.locale,c=t.options,i=e.key,o=e.fn,r=nt().onError;return Object(Ge.a)([i,n,a],o(t),Object(q.a)(Object(q.a)({},c),{},{onError:r}))}var Ca=function(){var e,t,n,c,i,o,r,l,s,d,u,b,m,h=un(),f=Object(R.a)(h,2),p=f[0],x=f[1],g=un(),v=Object(R.a)(g,2),S=v[0],k=v[1],y=un(),C=Object(R.a)(y,2),I=C[0],P=C[1],w=un(),E=Object(R.a)(w,2),U=E[0],A=E[1],L=Object(O.c)(z),M=xa({page:p,locale:L,q:{s:"updated_at desc"}}),N=ga({page:S,locale:L,q:{s:"updated_at desc"}}),T=va({page:I,locale:L,q:{s:"updated_at desc"}}),$=Sa({page:U,locale:L,q:{s:"updated_at desc"}}),q=pa({key:"descBookmarkMusics",fn:Zn},{page:1,locale:L,q:{s:"bookmarks_count desc"}});return Object(a.useEffect)((function(){var e=new URL(window.location.href).searchParams.get("code");if(e){var t=window.opener;t&&t.getSpotifyCode(e),window.close()}}),[]),Object(j.jsxs)(dn,{children:[Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Ie.a,{href:"https://staveservice.github.io/docs/",target:"_blank",rel:"noopener noreferrer",children:Object(j.jsx)($e.a,{aspectRatio:16/9,src:jn})})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsxs)(ke.a,{container:!0,spacing:2,children:[Object(j.jsx)(ke.a,{item:!0,xs:3,children:Object(j.jsx)(vt,{icon:Object(j.jsx)(Le.a,{fontSize:"large"}),title:"music",messageId:"createMusic",to:"musics"})}),Object(j.jsx)(ke.a,{item:!0,xs:3,children:Object(j.jsx)(vt,{icon:Object(j.jsx)(we.a,{fontSize:"large"}),title:"album",messageId:"createAlbum",to:"albums"})}),Object(j.jsx)(ke.a,{item:!0,xs:3,children:Object(j.jsx)(vt,{icon:Object(j.jsx)(Ue.a,{fontSize:"large"}),title:"artist",messageId:"createArtist",to:"artists"})}),Object(j.jsx)(ke.a,{item:!0,xs:3,children:Object(j.jsx)(vt,{icon:Object(j.jsx)(Ne.a,{fontSize:"large"}),title:"band",messageId:"createBand",to:"bands"})})]})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(ln,{data:null===(e=q.data)||void 0===e?void 0:e.data})}),Object(j.jsxs)(ye.a,{mb:3,children:[Object(j.jsx)(Ce.a,{variant:"h4",children:"Musics"}),Object(j.jsx)(rt,{musics:(null===(t=M.data)||void 0===t?void 0:t.data)||[],loading:M.isLoading,page:p,pageCount:null===(n=M.data)||void 0===n||null===(c=n.pagination)||void 0===c?void 0:c.totalPages,onPage:x})]}),Object(j.jsxs)(ye.a,{mb:3,children:[Object(j.jsx)(Ce.a,{variant:"h4",children:"Albums"}),Object(j.jsx)(lt,{albums:(null===(i=N.data)||void 0===i?void 0:i.data)||[],loading:N.isLoading,page:S,pageCount:null===(o=N.data)||void 0===o||null===(r=o.pagination)||void 0===r?void 0:r.totalPages,onPage:k})]}),Object(j.jsxs)(ye.a,{mb:3,children:[Object(j.jsx)(Ce.a,{variant:"h4",children:"Bands"}),Object(j.jsx)(ht,{bands:(null===(l=$.data)||void 0===l?void 0:l.data)||[],loading:$.isLoading,page:U,pageCount:null===(s=$.data)||void 0===s||null===(d=s.pagination)||void 0===d?void 0:d.totalPages,onPage:A})]}),Object(j.jsxs)(ye.a,{mb:3,children:[Object(j.jsx)(Ce.a,{variant:"h4",children:"Artists"}),Object(j.jsx)(mt,{artists:(null===(u=T.data)||void 0===u?void 0:u.data)||[],loading:T.isLoading,page:I,pageCount:null===(b=T.data)||void 0===b||null===(m=b.pagination)||void 0===m?void 0:m.totalPages,onPage:P})]})]})},Ia=n(19),Pa=n.n(Ia),wa=n(407),Ea=n(30),Ua=n(1330),Aa=n(88),La=n(62),Ma=n(409),Na=n(1327),Ta=["name","defaultValue","onChange","onKeyPress","errors","control","rules"],$a=function(e){var t=e.name,n=e.defaultValue,a=e.onChange,c=e.onKeyPress,i=e.errors,o=e.control,r=e.rules,l=Object(La.a)(e,Ta),s=Object(Ea.c)({name:t,control:o,rules:r,defaultValue:n}),d=s.field,u=d.ref,b=d.value,O=d.onChange,m=s.meta.invalid;return Object(j.jsx)(Na.a,Object(q.a)(Object(q.a)({},l),{},{value:b,inputRef:u,error:m,helperText:i&&Object(j.jsx)(Ma.a,{errors:i,name:t}),onChange:function(e){a&&a(e),O(e.target.value)},onKeyPress:function(e){c&&c(e)}}))};$a.defaultProps={rules:{}};var Ra=$a,qa=n(300),Ba=["disabled","loading","children"],Da=function(e){var t=e.disabled,n=e.loading,a=e.children,c=Object(La.a)(e,Ba);return Object(j.jsx)(gt.a,Object(q.a)(Object(q.a)({},c),{},{variant:"contained",startIcon:n&&Object(j.jsx)(qa.a,{size:20}),disabled:n||t,disableElevation:!0,children:a}))},_a=n(39),Wa=_a.b().shape({email:_a.d().email().required(),password:_a.d().required()}),Va=_a.b().shape({email:_a.d().email().required(),nickname:_a.d().required().min(4).max(30),familyname:_a.d().required().max(35),givenname:_a.d().required().max(35),password:_a.d().required(),passwordConfirmation:_a.d().oneOf([_a.c("password"),null])}),Fa=function(e){var t=e.onSuccess,n=Object(fe.b)().enqueueSnackbar,c=Object(O.b)(),i=Object(wa.a)(),o=Object(Ea.d)({resolver:Object(Aa.a)(Wa)}),r=o.errors,l=o.control,s=o.setValue,d=o.handleSubmit,u=Object(Ua.a)((function(e){return t=e,Pa.a.post("/auth/sign_in",t);var t}),{onSuccess:function(e){c(I(e.data.data)),c(P(e.headers)),n(i.formatMessage({id:"signinSuccessful"}),{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"center"}}),t()},onError:function(e){e.response?n(e.response.data.errors,{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}}):n(String(e),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})}}),b=u.isLoading,m=u.mutate;Object(a.useEffect)((function(){0}),[s]);return Object(j.jsxs)(ye.a,{m:3,children:[Object(j.jsx)(Ce.a,{variant:"h4",align:"center",children:Object(j.jsx)(Re.a,{id:"signin"})}),Object(j.jsxs)("form",{onSubmit:d((function(e){return m(e)})),children:[Object(j.jsx)(Ra,{type:"email",name:"email",defaultValue:"",autoComplete:"on",label:i.formatMessage({id:"email"}),variant:"outlined",margin:"normal",control:l,errors:r,disabled:b,fullWidth:!0}),Object(j.jsx)(Ra,{type:"password",name:"password",label:i.formatMessage({id:"password"}),variant:"outlined",margin:"normal",control:l,defaultValue:"",errors:r,disabled:b,fullWidth:!0}),Object(j.jsx)(Da,{type:"submit",color:"primary",loading:b,fullWidth:!0,children:Object(j.jsx)(Re.a,{id:"signin"})})]})]})},Ka=function(){var e=Object(ve.f)();return Object(j.jsx)(dn,{children:Object(j.jsx)(sn.a,{maxWidth:"xs",children:Object(j.jsx)(Fe.a,{variant:"outlined",children:Object(j.jsx)(Fa,{onSuccess:function(){return e.push("/")}})})})})},Qa=function(e){var t=e.onSuccess,n=Object(fe.b)().enqueueSnackbar,a=Object(O.b)(),c=Object(wa.a)(),i=Object(Ea.d)({resolver:Object(Aa.a)(Va)}),o=i.errors,r=i.control,l=i.handleSubmit,s=Object(Ua.a)((function(e){return t=e,Pa.a.post("/auth",t,{"Key-inflection":"camel"});var t}),{onSuccess:function(e){a(I(e.data.data)),a(P(e.headers)),n(c.formatMessage({id:"signupSuccessful"}),{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"center"}}),t()},onError:function(e){e.response?e.response.data.errors.full_messages.forEach((function(e){return n(e,{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})})):n(String(e),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})}}),d=s.isLoading,u=s.mutate;return Object(j.jsxs)(ye.a,{m:3,children:[Object(j.jsx)(Ce.a,{variant:"h4",align:"center",children:Object(j.jsx)(Re.a,{id:"signup"})}),Object(j.jsxs)("form",{onSubmit:l((function(e){return u(e)})),children:[Object(j.jsx)(Ra,{name:"nickname",defaultValue:"",label:c.formatMessage({id:"nickname"}),variant:"outlined",margin:"normal",control:r,errors:o,disabled:d,fullWidth:!0}),Object(j.jsxs)(ke.a,{container:!0,spacing:2,children:[Object(j.jsx)(ke.a,{item:!0,xs:6,children:Object(j.jsx)(Ra,{name:"familyname",defaultValue:"",label:c.formatMessage({id:"familyname"}),variant:"outlined",control:r,errors:o,disabled:d,fullWidth:!0})}),Object(j.jsx)(ke.a,{item:!0,xs:6,children:Object(j.jsx)(Ra,{name:"givenname",defaultValue:"",label:c.formatMessage({id:"givenname"}),variant:"outlined",control:r,errors:o,disabled:d,fullWidth:!0})})]}),Object(j.jsx)(Ra,{type:"email",name:"email",defaultValue:"",label:c.formatMessage({id:"email"}),variant:"outlined",margin:"normal",control:r,errors:o,disabled:d,fullWidth:!0}),Object(j.jsx)(Ra,{type:"password",name:"password",defaultValue:"",label:c.formatMessage({id:"password"}),variant:"outlined",margin:"normal",control:r,errors:o,disabled:d,fullWidth:!0}),Object(j.jsx)(Ra,{type:"password",name:"password_confirmation",defaultValue:"",label:c.formatMessage({id:"passwordConfirmation"}),variant:"outlined",margin:"normal",control:r,errors:o,disabled:d,fullWidth:!0}),Object(j.jsx)(Da,{type:"submit",loading:d,color:"primary",fullWidth:!0,children:Object(j.jsx)(Re.a,{id:"signup"})})]})]})},za=function(){var e=Object(ve.f)();return Object(j.jsx)(dn,{children:Object(j.jsx)(sn.a,{maxWidth:"xs",children:Object(j.jsx)(Fe.a,{variant:"outlined",children:Object(j.jsx)(Qa,{onSuccess:function(){return e.push("/")}})})})})},Ya=n(90),Ga=n(413),Ha=n.n(Ga),Ja=["loading"],Xa=function(e){var t=e.loading,n=Object(La.a)(e,Ja);return Object(j.jsx)(j.Fragment,{children:t?Object(j.jsx)(qa.a,Object(q.a)({},n)):null})},Za=["loading"],ec=function(e){var t=e.loading,n=Object(La.a)(e,Za);return Object(j.jsx)(Na.a,Object(q.a)(Object(q.a)({},n),{},{variant:"outlined",InputProps:{startAdornment:Object(j.jsx)(Ha.a,{}),endAdornment:Object(j.jsx)(Xa,{color:"inherit",size:20,loading:t})},fullWidth:!0}))},tc=function(){var e=Object(a.useState)(""),t=Object(R.a)(e,2),n=t[0],c=t[1],i=un(),o=Object(R.a)(i,2),r=o[0],l=o[1],s=Object(Ya.useDebounce)(n,1e3),d=Object(R.a)(s,2),u=d[0],b=d[1].isPending,m=Object(O.c)(z),h=va({page:r,locale:m,q:{name_cont:u}}),f=h.isLoading,p=h.data;return Object(j.jsxs)(dn,{children:[Object(j.jsx)(ec,{onChange:function(e){return c(e.target.value)},loading:f||b()}),Object(j.jsx)(mt,{artists:null===p||void 0===p?void 0:p.data,loading:f,page:r,pageCount:null===p||void 0===p?void 0:p.pagination.totalPages,onPage:l})]})},nc=n(1318),ac=n(1296),cc=n(415),ic=n.n(cc),oc=function(e){var t=e.children,n=e.href,a=e.startIcon;return Object(j.jsx)(gt.a,{startIcon:a,component:Ie.a,href:n,target:"_blank",rel:"noopener noreferrer",disabled:!n,children:t})},rc=n(414),lc=function(){return Object(j.jsx)(st.a,{children:Object(j.jsx)(rc.a,{size:23})})},sc=function(e){var t=e.color;return Object(j.jsx)(st.a,{color:t,children:Object(j.jsx)(dt.e,{})})},dc=function(e){var t=e.color;return Object(j.jsx)(st.a,{color:t,children:Object(j.jsx)(dt.d,{})})},uc=function(){return Object(j.jsx)(st.a,{children:Object(j.jsx)(dt.b,{size:24})})},jc=function(){var e=Object(a.useState)(!1),t=Object(R.a)(e,2),n=t[0],c=t[1];return[n,Object(a.useCallback)((function(){c(!0)}),[]),Object(a.useCallback)((function(){return c(!1)}),[])]},bc=function(e){var t=e.itunes,n=e.twitter,a=e.spotify,c=e.wikipedia,i=e.musixmatch,o=e.youtube,r=e.loading,l=jc(),s=Object(R.a)(l,3),d=s[0],u=s[1],b=s[2],O=jc(),m=Object(R.a)(O,3),h=m[0],f=m[1],p=m[2],x=jc(),g=Object(R.a)(x,3),v=g[0],S=g[1],k=g[2],y=jc(),C=Object(R.a)(y,3),I=C[0],P=C[1],w=C[2],E=jc(),U=Object(R.a)(E,3),A=U[0],L=U[1],M=U[2],N=jc(),T=Object(R.a)(N,3),$=T[0],q=T[1],B=T[2];return Object(j.jsxs)(Ke.a,{component:Fe.a,children:[Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"link"})}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"edit"})})]})}),Object(j.jsxs)(Be.a,{children:[n&&Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(oc,{startIcon:Object(j.jsx)(ut,{}),href:n.link?"https://twitter.com/".concat(n.link):void 0,children:"twitter"})}),Object(j.jsxs)(De.a,{children:[Object(j.jsx)(gt.a,{variant:"text",onClick:f,children:Object(j.jsx)(Re.a,{id:"edit"})}),n.renderDialog(h,p)]})]}),t&&Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(oc,{startIcon:Object(j.jsx)(lc,{}),href:t.link,children:"itunes"})}),Object(j.jsxs)(De.a,{children:[Object(j.jsx)(gt.a,{variant:"text",onClick:u,children:Object(j.jsx)(Re.a,{id:"edit"})}),t.renderDialog(d,b)]})]}),a&&Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(oc,{startIcon:Object(j.jsx)(uc,{}),href:a.link?"https://open.spotify.com/".concat(a.type,"/").concat(a.link):void 0,children:"spotify"})}),Object(j.jsxs)(De.a,{children:[Object(j.jsx)(gt.a,{variant:"text",onClick:S,children:Object(j.jsx)(Re.a,{id:"edit"})}),a.renderDialog(v,k)]})]}),i&&Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsxs)(ye.a,{display:"flex",alignItems:"cneter",children:[Object(j.jsx)(ye.a,{mr:1,children:Object(j.jsx)(ic.a,{color:i.link?void 0:"action"})}),"MUSIXMATCH"]})}),Object(j.jsxs)(De.a,{children:[Object(j.jsx)(gt.a,{variant:"text",onClick:L,children:Object(j.jsx)(Re.a,{id:"edit"})}),i.renderDialog(A,M)]})]}),c&&Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(oc,{startIcon:Object(j.jsx)(dc,{}),href:c.link?"https://ja.wikipedia.org/?curid=".concat(c.link):void 0,children:"wikipedia"})}),Object(j.jsxs)(De.a,{children:[Object(j.jsx)(gt.a,{variant:"text",onClick:P,children:Object(j.jsx)(Re.a,{id:"edit"})}),c.renderDialog(I,w)]})]}),o&&Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(oc,{startIcon:Object(j.jsx)(sc,{}),href:o.link||void 0,children:"youtube"})}),Object(j.jsxs)(De.a,{children:[Object(j.jsx)(gt.a,{variant:"text",onClick:q,children:Object(j.jsx)(Re.a,{id:"edit"})}),o.renderDialog($,B)]})]})]})]}),r&&Object(j.jsx)(Ve.a,{})]})};bc.defaultProps={itunes:void 0,twitter:void 0,spotify:void 0,wikipedia:void 0,musixmatch:void 0,youtube:void 0,loading:!1},bc.whyDidYouRender=!0;var Oc=bc,mc=n(416),hc=n.n(mc),fc=n(230),pc=n.n(fc),xc=["count","bookmarked","onCreate","onDestroy"],gc=function(e){var t=e.count,n=e.bookmarked,a=e.onCreate,c=e.onDestroy,i=Object(La.a)(e,xc);return Object(j.jsx)(jt.a,Object(q.a)(Object(q.a)({},i),{},{onClick:n?c:a,children:n?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Ce.a,{children:t||0}),Object(j.jsx)(pc.a,{color:"error"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Ce.a,{children:t||0}),Object(j.jsx)(hc.a,{color:"error"})]})}))},vc=function(e){var t=e.artist,n=t.artistName,a=t.artistLinkUrl;return Object(j.jsx)(ft.a,{children:Object(j.jsx)(ye.a,{display:"flex",children:Object(j.jsx)(ye.a,{flex:"1",overflow:"hidden",children:Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Ce.a,{children:n}),Object(j.jsx)(gt.a,{href:a,target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()},children:"itunes"})]})})})})},Sc=n(1322),kc=n(1292);function yc(e){var t,n,c,i,o=e.defaultValue,r=e.open,l=e.title,s=e.showSearchBar,d=e.useQueryArgs,u=e.children,b=e.onClose,O=e.onSelect,m=Object(a.useState)(""),h=Object(R.a)(m,2),f=h[0],p=h[1],x=un(),g=Object(R.a)(x,2),v=g[0],S=g[1],k=Object(Ya.useDebounce)(f,1e3),y=Object(R.a)(k,2),C=y[0],I=y[1].isPending,P=nt().onError,w=Object(Ge.a)([].concat(Object(St.a)(d.key),[C,v]),(function(){return d.fn({term:C,page:v})}),Object(q.a)({enabled:!!C&&!I()&&r,onError:P},d.options));return Object(a.useEffect)((function(){o&&p(o)}),[o]),Object(j.jsxs)(Sc.a,{open:r,onClose:b,fullWidth:!0,children:[Object(j.jsxs)(kc.a,{children:["Choose ",l]}),Object(j.jsxs)(ye.a,{p:3,children:[s&&Object(j.jsx)(Na.a,{id:"",label:"",defaultValue:o,value:f,variant:"outlined",onChange:function(e){return p(e.target.value)},fullWidth:!0}),w.isLoading&&Object(j.jsx)(Ve.a,{}),null===(t=w.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.map((function(e,t){return u(e,function(e){return function(){var t;b(),(null===(t=w.data)||void 0===t?void 0:t.data)&&O(w.data.data[e])}}(t))})),Object(j.jsx)(ye.a,{display:"flex",justifyContent:"center",children:(null===(c=w.data)||void 0===c?void 0:c.pageCount)&&Object(j.jsx)(Qe.a,{page:v,count:null===(i=w.data)||void 0===i?void 0:i.pageCount,onChange:S})})]})]})}yc.defaultProps={value:"",showSearchBar:!1,onChange:void 0};var Cc=yc,Ic=n(14);var Pc=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect;return Object(j.jsx)(Cc,{defaultValue:t,title:"Album",open:n,showSearchBar:a,useQueryArgs:{key:[Ic.ITUNES,Ic.ALBUMS],fn:function(e){return function(e,t){return Xe.jsonp("/search",{params:{entity:"musicArtist",term:e,limit:400,offset:t}})}(e.term,e.page).then((function(e){return{data:e.results}}))}},onSelect:i,onClose:c,children:function(e,t){return Object(j.jsx)(ye.a,{mb:2,onClick:t,children:Object(j.jsx)(vc,{artist:e})},e.artistId)}})},wc=n(43),Ec=n.n(wc),Uc=n(77),Ac=n(1295),Lc=n(1293),Mc=n(1294),Nc=function(){return Object(j.jsx)(gt.a,{startIcon:Object(j.jsx)(uc,{}),component:Ie.a,onClick:function(){window.open("https://accounts.spotify.com/authorize?response_type=code&client_id=".concat("3f35b18cccb84c7fa03754a435abf551","&redirect_uri=").concat(encodeURIComponent(window.location.origin),"&scope=").concat(encodeURIComponent("user-read-email")),void 0,"top=100,left=100,width=500,height=700")},rel:"noopener noreferrer",children:"Sign in Spotify"})},Tc=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPOTIFY_KEY:"3f35b18cccb84c7fa03754a435abf551",REACT_APP_SPOTIFY_SECRET_KEY:"3edc70893d3f41a6ba33011e227824d7"}),$c=Tc.REACT_APP_SPOTIFY_KEY,Rc=Tc.REACT_APP_SPOTIFY_SECRET_KEY,qc=btoa("".concat($c||"",":").concat(Rc||"")),Bc=Pa.a.create({baseURL:"https://api.spotify.com/v1/"}),Dc=Pa.a.create({baseURL:"https://accounts.spotify.com/api",headers:{Authorization:"Basic ".concat(qc),"Content-Type":"application/x-www-form-urlencoded"}});function _c(e,t,n,a){return Bc.get("/search",{params:{q:t,type:e,offset:n-1},headers:Object(q.a)({},{Authorization:"Bearer ".concat(a||"")})}).then((function(e){return e.data}))}var Wc=function(e){var t=e.open,n=e.onClose,c=e.children,i=Object(O.c)(L),o=Object(O.b)(),r=Object(a.useCallback)(function(){var e=Object(Uc.a)(Ec.a.mark((function e(t){var n,a;return Ec.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("code",t),n.append("grant_type","authorization_code"),n.append("redirect_uri",window.location.origin),e.next=6,Dc.post("/token",n);case 6:a=e.sent,o(N(a.data));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o]);return Object(a.useEffect)((function(){window.getSpotifyCode=r}),[r]),i?Object(j.jsx)(j.Fragment,{children:c({handleError:function(){o(T())}})}):Object(j.jsxs)(Sc.a,{open:t,onClose:n,fullWidth:!0,children:[Object(j.jsx)(kc.a,{children:"Spotify need SignIn"}),Object(j.jsx)(Lc.a,{children:Object(j.jsx)(Mc.a,{children:Object(j.jsx)(Nc,{})})}),Object(j.jsx)(Ac.a,{children:Object(j.jsx)(gt.a,{onClick:n,color:"default",children:"Cancel"})})]})},Vc=n(231),Fc=n.n(Vc),Kc=Fc()({media:{height:100,width:100}}),Qc=function(e){var t=e.artist,n=Kc();return Object(j.jsx)(ft.a,{children:Object(j.jsxs)(ye.a,{display:"flex",children:[Object(j.jsx)(ye.a,{display:"flex",justifyItems:"center",alignItems:"center",m:1,children:Object(j.jsx)(an.a,{image:t.images[0].url,className:n.media})}),Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Ce.a,{noWrap:!0,children:t.name}),Object(j.jsx)(Ce.a,{color:"textSecondary",noWrap:!0})]})]})})};var zc=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect,o=Object(O.c)(L);return Object(j.jsx)(Wc,{open:n,onClose:c,children:function(e){var r=e.handleError;return Object(j.jsx)(Cc,{defaultValue:t,title:"Spotify",open:n,useQueryArgs:{key:[Ic.SPOTIFY,Ic.ALBUMS],fn:function(e){return _c("artist",e.term,e.page,null===o||void 0===o?void 0:o.access_token).then((function(e){return{data:e.artists.items,page:e.artists.offset,pageCount:Math.floor(e.artists.total/e.artists.limit)}}))},options:{onError:r}},showSearchBar:a,onSelect:i,onClose:c,children:function(e,t){return Object(j.jsx)(ye.a,{mb:2,onClick:t,children:Object(j.jsx)(Qc,{artist:e})},e.id)}})}})},Yc=function(e){return new URL(e).pathname.replace(/\//g,"")},Gc=function(e){var t=e.loading,n=e.open,c=e.defaultValue,i=e.onPatch,o=e.onClose,r=Object(a.useState)(""),l=Object(R.a)(r,2),s=l[0],d=l[1];return Object(j.jsxs)(Sc.a,{open:n,onClose:o,fullWidth:!0,children:[Object(j.jsx)(kc.a,{children:"Twitter"}),Object(j.jsxs)(ye.a,{p:3,children:[Object(j.jsx)(Na.a,{name:"twitter",label:"https://twitter.com",variant:"outlined",value:s,defaultValue:c,onChange:function(e){return d(e.target.value)},onPaste:function(e){e.preventDefault(),d(Yc(e.clipboardData.getData("text")))},fullWidth:!0}),Object(j.jsx)(Da,{fullWidth:!0,color:"primary",loading:t,disabled:!s,onClick:function(){o(),i(s)},children:"UPDATE"})]})]})},Hc=function(e){var t=e.wikipedia.title;return Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:t})})},Jc=function(){return de.getState().language.locale};var Xc=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect;return Object(j.jsx)(Cc,{defaultValue:t,title:"Wikipedia",open:n,showSearchBar:a,useQueryArgs:{key:[Ic.WIKIPEDIA],fn:function(e){var t,n,a=e.term,c=e.page;return(t=a,n=c,Je.a.jsonp("https://".concat(Jc(),".wikipedia.org/w/api.php"),{params:{format:"json",action:"query",list:"search",srsearch:t,sroffset:n}})).then((function(e){return{data:e.query.search,pageCount:e.query.search.length?Math.floor(e.query.searchinfo.totalhits/e.continue.sroffset):1}}))}},onSelect:i,onClose:c,children:function(e,t){return Object(j.jsx)(ye.a,{mb:2,onClick:t,children:Object(j.jsx)(Hc,{wikipedia:e})},e.pageid)}})},Zc=n(417),ei=n.n(Zc);var ti=function(e){var t=e.queryKey,n=e.name,a=e.inputLabel,c=e.buttonLabel,i=e.patchFn,o=jc(),r=Object(R.a)(o,3),l=r[0],s=r[1],d=r[2],u=nt().onError,b=Object(O.b)(),m=Object(O.c)(z),h=Object(ve.h)(),f=Number(h.id),p=Object(Ea.d)(),x=p.errors,g=p.control,v=p.handleSubmit,S=Object(Oe.b)(),k=Object(Ua.a)((function(e){return i(f,e)}),{onSuccess:function(e){b(P(e.headers)),S.setQueryData([t,f,m],(function(e){return e&&Object(q.a)({},e)}))},onError:u});return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(jt.a,{onClick:s,children:Object(j.jsx)(ei.a,{})}),Object(j.jsxs)(Sc.a,{open:l,onClose:d,fullWidth:!0,children:[Object(j.jsx)(kc.a,{children:"Translate"}),Object(j.jsxs)("form",{onSubmit:v((function(e){return k.mutate(e)})),children:[Object(j.jsx)(Lc.a,{children:Object(j.jsx)(Ra,{name:n,defaultValue:"",label:a,variant:"outlined",control:g,errors:x,disabled:k.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(j.jsx)(Xa,{color:"inherit",size:20,loading:k.isLoading})}})}),Object(j.jsx)(Ac.a,{children:Object(j.jsx)(Da,{type:"submit",color:"primary",disabled:!n,loading:k.isLoading,fullWidth:!0,children:c})})]})]})]})},ni=function(e){var t=e.id,n=e.loading,c=e.open,i=e.onPatch,o=e.onClose,r=Object(a.useState)(""),l=Object(R.a)(r,2),s=l[0],d=l[1];return Object(a.useEffect)((function(){t&&d(t)}),[t]),Object(j.jsxs)(Sc.a,{open:c,onClose:o,fullWidth:!0,children:[Object(j.jsx)(kc.a,{children:"Youtube"}),Object(j.jsxs)(ye.a,{p:3,children:[Object(j.jsx)(Na.a,{name:"youtube",label:"Full URL",variant:"outlined",value:s,onChange:function(e){return d(e.target.value)},onPaste:function(e){e.preventDefault(),d(e.clipboardData.getData("text"))},fullWidth:!0}),Object(j.jsx)(Da,{fullWidth:!0,color:"primary",loading:n,disabled:!s,onClick:function(){o(),i(s)},children:"UPDATE"})]})]})};Pa.a.defaults.baseURL=Fn;var ai=function(){return de.getState().language.locale},ci=function(){return de.getState().currentUser.headers},ii=function(e){return function(t,n){return Pa.a.patch("".concat(Se.USERS,"/").concat(e||"undefined").concat(Se.MUSICS,"/").concat(t),{music:n,locale:ai()},ci())}},oi=function(e,t){return Pa.a.patch("".concat(Se.ALBUMS,"/").concat(e),{album:t,locale:ai()},ci())},ri=function(e,t){return Pa.a.patch("".concat(Se.BANDS,"/").concat(e),{band:t,locale:ai()},ci())},li=function(e,t){return Pa.a.patch("".concat(Se.ARTISTS,"/").concat(e),{artist:t,locale:ai()},ci())},si=function(e){var t=nt().onError;return Object(Ge.a)(["wikipedia",e],(function(){return t=e,Je.a.jsonp("https://".concat(Jc(),".wikipedia.org/w/api.php"),{params:{format:"json",action:"query",prop:"extracts",explaintext:!0,exintro:!0,pageids:t}}).then((function(e){return e.query.pages[t||0]}));var t}),{enabled:!!e,onError:t})},di=function(){var e,t,n,a,c,i,o,r,l,s,d,u,b,m,h,f,p,x=un(),g=Object(R.a)(x,2),v=g[0],S=g[1],y=un(),C=Object(R.a)(y,2),I=C[0],w=C[1],E=Object(ve.h)(),U=Number(E.id),A=nt().onError,L=Object(O.b)(),M=Object(O.c)(k),N=Object(O.c)(z),T=Object(Oe.b)(),$=Object(wa.a)(),B=(p={id:U,locale:N,currentUserId:null===M||void 0===M?void 0:M.id},ya({key:"artist",fn:ja},p)),D=function(e){return ka({firstKey:"artist",secondKey:"albums",fn:ba},e)}({id:U,page:v,locale:N}),_=function(e){return ka({firstKey:"artist",secondKey:"musics",fn:Oa},e)}({id:U,page:I,locale:N}),W=si(null===(e=B.data)||void 0===e?void 0:e.link.wikipedia),V=ot({id:null===(t=B.data)||void 0===t?void 0:t.link.itunes}),F=Object(Ua.a)((function(){return e=U,Pa.a.post("".concat(Se.ARTISTS,"/").concat(e).concat(Se.BOOKMARKS),void 0,ci());var e}),{onSuccess:function(e){L(P(e.headers)),T.setQueryData(["artist",U,N],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:A}),K=Object(Ua.a)((function(){var e,t,n,a;return n=U,a=null===(e=B.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,Pa.a.delete("".concat(Se.ARTISTS,"/").concat(n).concat(Se.BOOKMARKS,"/").concat(a||"undefined"),ci())}),{onSuccess:function(e){L(P(e.headers)),T.setQueryData(["artist",U,N],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:A}),Q=Object(Ua.a)((function(e){var t;return function(e,t,n){return Pa.a.patch("".concat(Se.ARTISTS,"/").concat(e).concat(Se.LINKS,"/").concat(t||"undefined"),n,Object(q.a)({},ci()))}(U,null===(t=B.data)||void 0===t?void 0:t.link.id,e)}),{onSuccess:function(e){L(P(e.headers)),T.setQueryData(["artist",U,N],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{link:e.data})}))},onError:A}),Y=function(e){return Q.mutate({itunes:e.artistId})},G=function(e){return Q.mutate({wikipedia:e.pageid})},H=function(e){return Q.mutate({spotify:e.id})},J=function(e){return Q.mutate({youtube:e})},X=function(e){return Q.mutate({twitter:e})};return Object(j.jsxs)(dn,{children:[(null===(n=B.data)||void 0===n?void 0:n.localed)&&Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsxs)(nc.a,{severity:"warning",children:[Object(j.jsx)(ac.a,{children:Object(j.jsx)(Re.a,{id:"untranslation"})}),Object(j.jsx)("strong",{children:Object(j.jsx)(Re.a,{id:"pleaseTranslate"})})]})}),Object(j.jsxs)(ke.a,{container:!0,children:[Object(j.jsx)(ke.a,{item:!0,xs:10,children:Object(j.jsxs)(Ce.a,{variant:"h5",children:[Object(j.jsx)(Ue.a,{}),null===(a=B.data)||void 0===a?void 0:a.name]})}),Object(j.jsx)(ke.a,{item:!0,xs:1,children:Object(j.jsx)(gc,{count:null===(c=B.data)||void 0===c?void 0:c.bookmarksCount,bookmarked:!!(null===(i=B.data)||void 0===i?void 0:i.bookmark)||!1,onCreate:function(){return F.mutate()},onDestroy:function(){return K.mutate()}})}),Object(j.jsx)(ke.a,{item:!0,xs:1,children:Object(j.jsx)(ti,{queryKey:Ic.ARTIST,name:"name",inputLabel:$.formatMessage({id:"name"}),buttonLabel:$.formatMessage({id:"translateName"}),patchFn:li})})]}),Object(j.jsx)(ye.a,{children:Object(j.jsx)(Ce.a,{variant:"body1",color:"initial",children:null===(o=W.data)||void 0===o?void 0:o.extract})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Oc,{twitter:{link:null===(r=B.data)||void 0===r?void 0:r.link.twitter,renderDialog:function(e,t){var n;return Object(j.jsx)(Gc,{defaultValue:(null===(n=B.data)||void 0===n?void 0:n.link.twitter)||void 0,open:e,loading:Q.isLoading,onClose:t,onPatch:X})}},itunes:{link:V.data?V.data[0].artistLinkUrl:"",renderDialog:function(e,t){var n;return Object(j.jsx)(Pc,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:Y,showSearchBar:!0})}},wikipedia:{link:null===(l=B.data)||void 0===l?void 0:l.link.wikipedia,renderDialog:function(e,t){var n;return Object(j.jsx)(Xc,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:G,showSearchBar:!0})}},spotify:{type:"artist",link:null===(s=B.data)||void 0===s?void 0:s.link.spotify,renderDialog:function(e,t){var n;return Object(j.jsx)(zc,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:H,showSearchBar:!0})}},youtube:{type:"channel",link:null===(d=B.data)||void 0===d?void 0:d.link.youtube,renderDialog:function(e,t){var n;return Object(j.jsx)(ni,{id:(null===(n=B.data)||void 0===n?void 0:n.link.youtube)||"",open:e,onClose:t,onPatch:J,loading:Q.isLoading})}}})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(ht,{bands:(null===(u=B.data)||void 0===u?void 0:u.bands)||[],loading:B.isLoading})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(lt,{albums:(null===(b=D.data)||void 0===b?void 0:b.data)||[],loading:D.isLoading,page:v,pageCount:null===(m=D.data)||void 0===m?void 0:m.pagination.totalPages,onPage:S})}),Object(j.jsx)(rt,{musics:(null===(h=_.data)||void 0===h?void 0:h.data)||[],loading:_.isLoading,page:I,pageCount:null===(f=_.data)||void 0===f?void 0:f.pagination.totalPages,onPage:w})]})},ui=n(1331),ji=function(e){return Object(j.jsx)(gt.a,Object(q.a)(Object(q.a)({variant:"contained",color:"secondary"},e),{},{children:Object(j.jsx)(Re.a,{id:"searchByItunes"})}))};var bi=function(e){var t=e.data,n=e.children;return(null===t||void 0===t?void 0:t.length)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ye.a,{my:3,children:Object(j.jsxs)(nc.a,{severity:"warning",children:[Object(j.jsx)(ac.a,{children:"Warning"}),"Already Existed \u2014 ",Object(j.jsx)("strong",{children:"check it out!"})]})}),Object(j.jsx)(ye.a,{mb:3,children:n})]}):Object(j.jsx)(j.Fragment,{})},Oi=function(){var e,t,n,c=un(),i=Object(R.a)(c,2),o=i[0],r=i[1],l=jc(),s=Object(R.a)(l,3),d=s[0],u=s[1],b=s[2],m=Object(a.useState)(),h=Object(R.a)(m,2),f=h[0],p=h[1],x=Object(Ea.d)(),g=x.errors,v=x.control,S=x.setValue,k=x.register,y=x.watch,C=x.handleSubmit,I=y().name,w=Object(ui.a)(I,1e3),E=Object(R.a)(w,1)[0],U=Object(ve.f)(),A=Object(ve.i)().url.replace("/new",""),L=Object(O.c)(z),M=Object(O.b)(),N=nt().onError,T=Object(Oe.b)(),$=Object(wa.a)(),q=Object(Ua.a)((function(e){return t=e,Pa.a.post(Se.ARTISTS,{artist:t,locale:ai()},ci());var t}),{onSuccess:function(e){M(P(e.headers)),U.push("".concat(A,"/").concat(e.data.id)),T.setQueryData(["artist",e.data.id,{musicPage:1,albumPage:1}],e.data),f&&T.setQueryData(["itunes","artist",f.artistId],f)},onError:N}),B=va({page:1,locale:L,q:{name_cont:E},options:{enabled:!!E,onError:N}});return Object(a.useEffect)((function(){if(k("link_attributes.itunes"),f){var e=f.artistName,t=f.artistId;S("link_attributes.itunes",t),S("name",e)}}),[k,f,S]),Object(j.jsx)(dn,{children:Object(j.jsx)(Fe.a,{children:Object(j.jsxs)(ye.a,{p:3,children:[Object(j.jsx)(Ra,{name:"name",defaultValue:"",autoComplete:"on",label:$.formatMessage({id:"name"}),variant:"outlined",control:v,errors:g,disabled:q.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(j.jsx)(Xa,{color:"inherit",size:20,loading:B.isLoading})}}),Object(j.jsx)(ji,{onClick:u,disabled:!I,fullWidth:!0,disableElevation:!0}),Object(j.jsx)(Pc,{defaultValue:I,open:d,onClose:b,onSelect:function(e){return p(e)}}),Object(j.jsx)(bi,{data:null===(e=B.data)||void 0===e?void 0:e.data,children:Object(j.jsx)(mt,{artists:null===(t=B.data)||void 0===t?void 0:t.data,page:o,pageCount:null===(n=B.data)||void 0===n?void 0:n.pagination.totalPages,onPage:r,loading:B.isLoading})}),Object(j.jsx)(Da,{color:"primary",disabled:!I,loading:q.isLoading,onClick:C((function(e){return q.mutate(e)})),fullWidth:!0,children:Object(j.jsx)(Re.a,{id:"createArtist"})})]})})})},mi=function(){var e=Object(a.useState)(""),t=Object(R.a)(e,2),n=t[0],c=t[1],i=un(),o=Object(R.a)(i,2),r=o[0],l=o[1],s=Object(Ya.useDebounce)(n,1e3),d=Object(R.a)(s,2),u=d[0],b=d[1].isPending,m=Object(O.c)(z),h=xa({page:r,locale:m,q:{title_cont:u}}),f=h.isLoading,p=h.data;return Object(j.jsxs)(dn,{children:[Object(j.jsx)(ec,{onChange:function(e){return c(e.target.value)},loading:f||b()}),Object(j.jsx)(rt,{musics:(null===p||void 0===p?void 0:p.data)||[],loading:f,page:r,pageCount:null===p||void 0===p?void 0:p.pagination.totalPages,onPage:l})]})},hi=n(1302),fi=n(1234),pi=n(1310),xi=Object(nn.a)({media:{height:100,width:100}}),gi=function(e){var t=e.music,n=t.artworkUrl100,a=t.artistName,c=t.collectionCensoredName,i=t.trackCensoredName,o=t.trackViewUrl,r=xi();return Object(j.jsx)(ft.a,{children:Object(j.jsxs)(ye.a,{display:"flex",children:[Object(j.jsx)(ye.a,{display:"flex",justifyItems:"center",alignItems:"center",mx:1,children:Object(j.jsx)(an.a,{image:n,className:r.media})}),Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Ce.a,{noWrap:!0,children:i}),Object(j.jsx)(Ce.a,{color:"textSecondary",noWrap:!0,children:a}),Object(j.jsx)(Ce.a,{color:"textSecondary",noWrap:!0,children:c}),Object(j.jsx)(gt.a,{href:o,target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()},children:"itunes"})]})]})})};var vi=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect;return Object(j.jsx)(Cc,{defaultValue:t,title:"Music",open:n,showSearchBar:a,useQueryArgs:{key:[Ic.ITUNES,Ic.MUSICS],fn:function(e){return function(e,t){return Xe.jsonp("/search",{params:{entity:"song",term:e,limit:400,offset:t}})}(e.term,e.page).then((function(e){return{data:e.results}}))}},onSelect:i,onClose:c,children:function(e,t){return Object(j.jsx)(ye.a,{mb:2,onClick:t,children:Object(j.jsx)(gi,{music:e})},e.trackId)}})},Si=function(e){var t=e.music.track;return Object(j.jsx)(ft.a,{children:Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Ce.a,{children:t.track_name}),Object(j.jsx)(Ce.a,{children:t.album_name}),Object(j.jsx)(Ce.a,{children:t.artist_name})]})})},ki=Je.a.create({baseURL:"https://api.musixmatch.com/ws/1.1",params:{apikey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPOTIFY_KEY:"3f35b18cccb84c7fa03754a435abf551",REACT_APP_SPOTIFY_SECRET_KEY:"3edc70893d3f41a6ba33011e227824d7"}).REACT_APP_MUSIXMATCH_KEY}});var yi=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect;return Object(j.jsx)(Cc,{defaultValue:t,title:"Musixmatch",open:n,useQueryArgs:{key:[Ic.MUSIXMATCH],fn:function(e){var t,n=e.term;return(t=n,ki.jsonp("track.search",{params:{q_track:t}})).then((function(e){return{data:e.message.body.track_list}}))}},showSearchBar:a,onSelect:i,onClose:c,children:function(e,t){return Object(j.jsx)(ye.a,{mb:2,onClick:t,children:Object(j.jsx)(Si,{music:e})},e.track.track_id)}})},Ci=Object(nn.a)({media:{height:100,width:100}}),Ii=function(e){var t=e.track,n=Ci();return Object(j.jsx)(ft.a,{children:Object(j.jsxs)(ye.a,{display:"flex",children:[Object(j.jsx)(ye.a,{display:"flex",justifyItems:"center",alignItems:"center",m:1,children:Object(j.jsx)(an.a,{image:t.album.images[0].url,className:n.media})}),Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Ce.a,{noWrap:!0,children:t.name}),Object(j.jsx)(Ce.a,{color:"textSecondary",noWrap:!0}),Object(j.jsx)(Ce.a,{color:"textSecondary",noWrap:!0,children:t.artists.map((function(e){return e.name}))})]})]})})};var Pi=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect,o=Object(O.c)(L);return Object(j.jsx)(Wc,{open:n,onClose:c,children:function(e){var r=e.handleError;return Object(j.jsx)(Cc,{defaultValue:t,title:"Spotify",open:n,useQueryArgs:{key:[Ic.SPOTIFY,Ic.ALBUMS],fn:function(e){return _c("track",e.term,e.page,null===o||void 0===o?void 0:o.access_token).then((function(e){return{data:e.tracks.items,page:e.tracks.offset,pageCount:Math.floor(e.tracks.total/e.tracks.limit)}}))},options:{onError:r}},showSearchBar:a,onSelect:i,onClose:c,children:function(e,t){return Object(j.jsx)(ye.a,{mb:2,onClick:t,children:Object(j.jsx)(Ii,{track:e})},e.id)}})}})},wi=n(65),Ei=n.n(wi),Ui=n(1315);function Ai(e){var t=e.maxLength,n=e.onSelectOption,c=e.onRemoveOption,i=e.textFieldProps,o=e.autocompleteProps,r=Object(a.useState)(!1),l=Object(R.a)(r,2),s=l[0],d=l[1],u=Object(a.useState)([]),b=Object(R.a)(u,2),O=b[0],m=b[1],h=jc(),f=Object(R.a)(h,3),p=f[0],x=f[1],g=f[2];return Object(a.useEffect)((function(){m((null===o||void 0===o?void 0:o.value)||[])}),[o.inputValue,null===o||void 0===o?void 0:o.value]),Object(j.jsx)(Ui.a,Object(q.a)(Object(q.a)({},o),{},{open:p,disabled:s,getOptionDisabled:function(){return!!t&&O.length>=t},noOptionsText:"No Results",onChange:function(e,t,a){if(t&&Array.isArray(t)){switch(d(!0),a){case"select-option":n&&n(t[t.length-1],t);break;case"remove-option":var i=O.filter((function(e){return!t.includes(e)}))[0];c&&c(i,t)}d(!1),m(t)}},onOpen:x,onClose:g,renderInput:function(e){return Object(j.jsx)(Na.a,Object(q.a)(Object(q.a)(Object(q.a)({},e),i),{},{InputProps:Object(q.a)(Object(q.a)(Object(q.a)({},i.InputProps),e.InputProps),{},{endAdornment:Object(j.jsxs)(j.Fragment,{children:[o.loading?Object(j.jsx)(qa.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))}Ai.defaultProps={onSelectOption:void 0,onRemoveOption:void 0,maxLength:void 0};var Li=Ai,Mi=function(){var e,t=Object(a.useState)(""),n=Object(R.a)(t,2),c=n[0],i=n[1],o=nt().onError,r=Ei()(c,1e3),l=Object(R.a)(r,2),s=l[0],d=l[1].isPending,u=Object(O.b)(),b=Object(O.c)(z),m=Object(ve.h)(),h=Number(m.id),f=Number(m.userId),p=Object(Oe.b)(),x=Object(wa.a)(),g=p.getQueryData([Ic.MUSIC,h]),v=Object(Ua.a)((function(e){var t=e.option;return function(e,t,n){return Pa.a.post("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t).concat(Se.COMPOSERS),n,ci())}(f,h,t)}),{onSuccess:function(e,t){var n=t.options;u(P(e.headers)),p.setQueryData([Ic.MUSIC,h],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{composers:n})}))},onError:o}),S=Object(Ua.a)((function(e){var t=e.option;return function(e,t,n){return Pa.a.delete("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t).concat(Se.COMPOSERS,"/").concat(n),ci())}(f,h,t.id)}),{onSuccess:function(e,t){var n=t.options;u(P(e.headers)),p.setQueryData([Ic.MUSIC,h],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{composers:n})}))},onError:o}),k=va({page:1,locale:b,q:{name_cont:s},options:{enabled:!!s}});return Object(j.jsx)(Li,{onSelectOption:function(e,t){return v.mutate({option:e,options:t})},onRemoveOption:function(e,t){return S.mutate({option:e,options:t})},textFieldProps:{label:x.formatMessage({id:"composers"}),variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,value:(null===g||void 0===g?void 0:g.composers)||[],options:(null===(e=k.data)||void 0===e?void 0:e.data)||[],loading:v.isLoading||S.isLoading||d(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t){return i(t)}}})},Ni=function(){var e,t=Object(a.useState)(""),n=Object(R.a)(t,2),c=n[0],i=n[1],o=nt().onError,r=Ei()(c,1e3),l=Object(R.a)(r,2),s=l[0],d=l[1].isPending,u=Object(O.b)(),b=Object(O.c)(z),m=Object(ve.h)(),h=Number(m.id),f=Number(m.userId),p=Object(Oe.b)(),x=Object(wa.a)(),g=p.getQueryData([Ic.MUSIC,h]),v=Object(Ua.a)((function(e){var t=e.option;return function(e,t,n){return Pa.a.post("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t).concat(Se.LYRISTS),n,ci())}(f,h,t)}),{onSuccess:function(e,t){var n=t.options;u(P(e.headers)),p.setQueryData([Ic.MUSIC,h],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{lyrists:n})}))},onError:o}),S=Object(Ua.a)((function(e){var t=e.option;return function(e,t,n){return Pa.a.delete("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t).concat(Se.LYRISTS,"/").concat(n),ci())}(f,h,t.id)}),{onSuccess:function(e,t){var n=t.options;u(P(e.headers)),p.setQueryData([Ic.MUSIC,h],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{lyrists:n})}))},onError:o}),k=va({page:1,locale:b,q:{name_cont:s},options:{enabled:!!s}});return Object(j.jsx)(Li,{onSelectOption:function(e,t){return v.mutate({option:e,options:t})},onRemoveOption:function(e,t){return S.mutate({option:e,options:t})},textFieldProps:{label:x.formatMessage({id:"lyrists"}),variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,value:(null===g||void 0===g?void 0:g.lyrists)||[],options:(null===(e=k.data)||void 0===e?void 0:e.data)||[],loading:v.isLoading||S.isLoading||d(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t){return i(t)}}})},Ti=function(){var e,t=Object(a.useState)(""),n=Object(R.a)(t,2),c=n[0],i=n[1],o=nt().onError,r=Ei()(c,1e3),l=Object(R.a)(r,2),s=l[0],d=l[1].isPending,u=Object(O.b)(),b=Object(O.c)(y),m=Object(O.c)(z),h=Object(ve.i)(),f=Number(h.params.id),p=Object(Oe.b)(),x=Object(wa.a)(),g=p.getQueryData([Ic.MUSIC,f]),v=Object(Ua.a)((function(e){var t=e.option;return Pa.a.post(h.url+Se.BANDS,t,b)}),{onSuccess:function(e,t){var n=t.option;u(P(e.headers)),p.setQueryData([Ic.MUSIC,f],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{band:n})}))},onError:o}),S=Object(Ua.a)((function(e){var t=e.option;return Pa.a.delete("".concat(h.url+Se.BANDS,"/").concat(t.id),b)}),{onSuccess:function(e){u(P(e.headers)),p.setQueryData([Ic.MUSIC,f],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{band:null})}))},onError:o}),k=Sa({page:1,locale:m,q:{name_cont:s},options:{enabled:!!s}});return Object(j.jsx)(Li,{maxLength:1,onSelectOption:function(e,t){return v.mutate({option:e,options:t})},onRemoveOption:function(e,t){return S.mutate({option:e,options:t})},textFieldProps:{label:x.formatMessage({id:"band"}),variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,options:(null===(e=k.data)||void 0===e?void 0:e.data)||[],value:(null===g||void 0===g?void 0:g.band)?[g.band]:[],inputValue:c,loading:v.isLoading||S.isLoading||d(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t,n){return"input"===n&&i(t)}}})},$i=function(){var e=jc(),t=Object(R.a)(e,3),n=t[0],a=t[1],c=t[2];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(gt.a,{onClick:a,children:Object(j.jsx)(Re.a,{id:"edit"})}),Object(j.jsx)(Sc.a,{onClose:c,open:n,fullWidth:!0,children:Object(j.jsx)(sn.a,{children:Object(j.jsxs)(ye.a,{mb:3,children:[Object(j.jsx)(kc.a,{children:Object(j.jsx)(Re.a,{id:"editInfo"})}),Object(j.jsx)(Mi,{}),Object(j.jsx)(Ni,{}),Object(j.jsx)(Ti,{})]})})})]})},Ri=n(1297),qi=n(126),Bi=n.n(qi),Di=n(1313),_i=["name","defaultValue","onChange","onKeyPress","control","rules","children"],Wi=function(e){var t=e.name,n=e.defaultValue,a=e.onChange,c=e.onKeyPress,i=e.control,o=e.rules,r=e.children,l=Object(La.a)(e,_i),s=Object(Ea.c)({name:t,control:i,rules:o,defaultValue:n}),d=s.field,u=d.ref,b=d.value,O=d.onChange,m=s.meta.invalid;return Object(j.jsx)(Di.a,Object(q.a)(Object(q.a)({},l),{},{value:b,inputRef:u,error:m,onChange:function(e,t){a&&a(e,t),O(e.target.value)},onKeyPress:function(e){c&&c(e)},children:r}))};Wi.defaultProps={rules:{}};var Vi=Wi,Fi=_a.b().shape({artist_id:_a.a().required(),role:_a.a().required()}),Ki=_a.b().shape({email:_a.d().email().required(),nickname:_a.d().required().min(4).max(30),familyname:_a.d().required().max(35),givenname:_a.d().required().max(35),introduction:_a.d()}),Qi=_a.b().shape({title:_a.d().required(),description:_a.d().required()}),zi=_a.b().shape({email:_a.d().email().required(),description:_a.d().required()}),Yi=function(){var e,t,n=Object(a.useState)(""),c=Object(R.a)(n,2),i=c[0],o=c[1],l=jc(),s=Object(R.a)(l,3),d=s[0],u=s[1],b=s[2],m=Ei()(i,1e3),h=Object(R.a)(m,1)[0],f=Object(Ea.d)({defaultValues:{artist_id:void 0},resolver:Object(Aa.a)(Fi)}),p=f.control,x=f.handleSubmit,g=f.setValue,v=f.register,S=nt().onError,k=Object(ve.i)(),C=Number(k.params.id),I=k.url+Se.ARTISTS,w=Object(O.b)(),E=Object(O.c)(y),U=Object(O.c)(z),A=Object(Oe.b)(),L=Object(wa.a)(),M=A.getQueryData([Ic.MUSIC,C]),N=Object(Ua.a)((function(e){return Pa.a.post(I,e,E)}),{onSuccess:function(e){w(P(e.headers)),A.setQueryData([Ic.MUSIC,C],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{artistMusics:[].concat(Object(St.a)(t.artistMusics||[]),[e.data])})}))},onError:S}),T=Object(Ua.a)((function(e){return Pa.a.delete("".concat(I,"/").concat(e.id),E)}),{onSuccess:function(e,t){w(P(e.headers)),A.setQueryData([Ic.MUSIC,C],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{artistMusics:e.artistMusics&&e.artistMusics.filter((function(e){return e!==t}))})}))},onError:S}),$=va({page:1,locale:U,q:{name_cont:h},options:{enabled:!!h}});return Object(a.useEffect)((function(){v("artist_id")}),[v]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(gt.a,{onClick:u,children:Object(j.jsx)(Re.a,{id:"edit"})}),Object(j.jsxs)(Sc.a,{onClose:b,open:d,fullWidth:!0,children:[Object(j.jsx)(kc.a,{children:Object(j.jsx)(Re.a,{id:"role"})}),Object(j.jsxs)(sn.a,{children:[Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Ke.a,{component:Fe.a,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"role"})}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"artist"})}),Object(j.jsx)(De.a,{align:"right",children:Object(j.jsx)(Re.a,{id:"delete"})})]})}),Object(j.jsx)(Be.a,{children:null===M||void 0===M||null===(e=M.artistMusics)||void 0===e?void 0:e.map((function(e){return Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"/",children:e.role})}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.ARTISTS,"/").concat(e.artist.id),children:e.artist.name})}),Object(j.jsx)(De.a,{align:"right",children:Object(j.jsx)(jt.a,{onClick:function(){return T.mutate(e)},children:Object(j.jsx)(Bi.a,{})})})]},e.id)}))})]})})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsxs)(ke.a,{container:!0,spacing:1,children:[Object(j.jsx)(ke.a,{item:!0,xs:3,children:Object(j.jsxs)(Vi,{defaultValue:0,control:p,name:"role",variant:"outlined",fullWidth:!0,children:[Object(j.jsx)(Ri.a,{value:0,children:"Vocal"}),Object(j.jsx)(Ri.a,{value:1,children:"Guitar"}),Object(j.jsx)(Ri.a,{value:2,children:"Base"}),Object(j.jsx)(Ri.a,{value:3,children:"Drum"}),Object(j.jsx)(Ri.a,{value:4,children:"Vocal&Guitar"}),Object(j.jsx)(Ri.a,{value:5,children:"Vocal&Base"})]})}),Object(j.jsx)(ke.a,{item:!0,xs:9,children:Object(j.jsx)(Li,{maxLength:1,onSelectOption:function(e){return g("artist_id",e.id)},onRemoveOption:function(){return g("artist_id","")},textFieldProps:{label:L.formatMessage({id:"artist"}),variant:"outlined"},autocompleteProps:{multiple:!0,options:(null===(t=$.data)||void 0===t?void 0:t.data)||[],inputValue:i,getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t,n){return"input"===n&&o(t)}}})})]})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Da,{color:"primary",loading:N.isLoading,onClick:x((function(e){return N.mutate(e)})),fullWidth:!0,children:Object(j.jsx)(Re.a,{id:"addArtist"})})})]})]})]})},Gi=function(){var e,t,n=Object(a.useState)(""),c=Object(R.a)(n,2),i=c[0],o=c[1],l=jc(),s=Object(R.a)(l,3),d=s[0],u=s[1],b=s[2],m=Ei()(i,1e3),h=Object(R.a)(m,2),f=h[0],p=h[1].isPending,x=Object(Ea.d)(),g=x.register,v=x.handleSubmit,S=x.setValue,k=Object(ve.h)(),y=Number(k.userId),C=Number(k.id),I=Object(O.b)(),w=Object(O.c)(z),E=nt().onError,U=Object(Oe.b)(),A=Object(wa.a)(),L=U.getQueryData([Ic.MUSIC,C]),M=Object(Ua.a)((function(e){return function(e,t,n){return Pa.a.post("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t).concat(Se.ALBUMS),n,Object(q.a)(Object(q.a)({},ci()),{},{"Key-inflection":"camel"}))}(y,C,e)}),{onSuccess:function(e){I(P(e.headers)),U.setQueryData([Ic.MUSIC,C],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{albums:[].concat(Object(St.a)(t.albums||[]),[e.data.album])})}))},onError:E}),N=Object(Ua.a)((function(e){return function(e,t,n){return Pa.a.delete("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t).concat(Se.ALBUMS,"/").concat(n),ci())}(y,C,e.id)}),{onSuccess:function(e,t){I(P(e.headers)),U.setQueryData([Ic.MUSIC,C],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{albums:e.albums&&e.albums.filter((function(e){return e!==t}))})}))},onError:E}),T=ga({page:1,locale:w,q:{title_cont:f},options:{enabled:!!f}});return Object(a.useEffect)((function(){g("album_id")}),[g]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(gt.a,{onClick:u,children:Object(j.jsx)(Re.a,{id:"edit"})}),Object(j.jsxs)(Sc.a,{onClose:b,open:d,fullWidth:!0,children:[Object(j.jsx)(kc.a,{children:Object(j.jsx)(Re.a,{id:"editAlbum"})}),Object(j.jsxs)(sn.a,{children:[Object(j.jsx)(Ke.a,{component:Fe.a,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"artist"})}),Object(j.jsx)(De.a,{align:"right",children:Object(j.jsx)(Re.a,{id:"delete"})})]})}),Object(j.jsx)(Be.a,{children:null===L||void 0===L||null===(e=L.albums)||void 0===e?void 0:e.map((function(e){return Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"/",children:e.title})}),Object(j.jsx)(De.a,{align:"right",children:Object(j.jsx)(jt.a,{onClick:function(){return N.mutate(e)},children:Object(j.jsx)(Bi.a,{})})})]},e.id)}))})]})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Li,{maxLength:1,onSelectOption:function(e){return S("album_id",e.id)},onRemoveOption:function(){return S("album_id","")},textFieldProps:{label:A.formatMessage({id:"albums"}),variant:"outlined",margin:"normal"},autocompleteProps:{options:(null===(t=T.data)||void 0===t?void 0:t.data)||[],multiple:!0,loading:M.isLoading||N.isLoading||p(),getOptionSelected:function(e,t){return e.title===t.title},getOptionLabel:function(e){return e.title},onInputChange:function(e,t){return o(t)}}})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Da,{color:"primary",loading:M.isLoading,onClick:v((function(e){return M.mutate(e)})),fullWidth:!0,children:Object(j.jsx)(Re.a,{id:"addAlbum"})})})]})]})]})},Hi=n(419),Ji=n.n(Hi),Xi=function(e){var t=new URL(e),n=t.pathname;return n.includes("watch")?t.searchParams.get("v"):n.includes("channel")?n.split("/")[2]:null},Zi=function(){var e,t,n,a,c,i=nt().onError,o=Object(ve.h)(),l=Number(o.id),s=Number(o.userId),d=Object(O.b)(),u=Object(O.c)(z),b=Object(Oe.b)(),m=b.getQueryData([Ic.MUSIC,l,u]),h=b.getQueryData([Ic.ITUNES,Ic.MUSIC,null===m||void 0===m||null===(e=m.link)||void 0===e?void 0:e.itunes]),f=Object(Ua.a)((function(e){return function(e,t,n,a){return Pa.a.patch("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t).concat(Se.LINKS,"/").concat(n||"undefined"),a,Object(q.a)({},ci()))}(s,l,null===m||void 0===m?void 0:m.link.id,e)}),{onSuccess:function(e){d(P(e.headers)),b.setQueryData([Ic.MUSIC,l,u],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{link:e.data})}))},onError:i}),p=function(e){return f.mutate({spotify:e.id})},x=function(e){return f.mutate({itunes:e.trackId})},g=function(e){return f.mutate({musixmatch:e.track.track_id})},v=function(e){return f.mutate({youtube:e})};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Oc,{itunes:{link:h&&h[0]?h[0].trackViewUrl:void 0,renderDialog:function(e,t){return Object(j.jsx)(vi,{defaultValue:null===m||void 0===m?void 0:m.title,open:e,onClose:t,onSelect:x,showSearchBar:!0})}},spotify:{type:"track",link:null===m||void 0===m||null===(t=m.link)||void 0===t?void 0:t.spotify,renderDialog:function(e,t){return Object(j.jsx)(Pi,{defaultValue:null===m||void 0===m?void 0:m.title,open:e,onClose:t,onSelect:p,showSearchBar:!0})}},musixmatch:{renderDialog:function(e,t){return Object(j.jsx)(yi,{defaultValue:null===m||void 0===m?void 0:m.title,open:e,onClose:t,onSelect:g,showSearchBar:!0})}},youtube:{type:"v",link:null===m||void 0===m?void 0:m.link.youtube,renderDialog:function(e,t){return Object(j.jsx)(ni,{id:(null===m||void 0===m?void 0:m.link.youtube)||"",open:e,onClose:t,onPatch:v,loading:f.isLoading})}}})}),(null===m||void 0===m?void 0:m.link.youtube)&&Object(j.jsx)(ye.a,{mb:3,display:"block",position:"relative",width:"100%",height:"0",pt:"56.25%",children:Object(j.jsx)("iframe",{className:Ji.a.iframe,width:"560",height:"315",src:"https://www.youtube.com/embed/".concat(Xi(null===m||void 0===m?void 0:m.link.youtube)||"undefined"),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),Object(j.jsxs)(ye.a,{mb:3,children:[Object(j.jsx)($i,{}),Object(j.jsx)(Ke.a,{component:Fe.a,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"main"})}),Object(j.jsx)(De.a,{})]})}),Object(j.jsxs)(Be.a,{children:[Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"releaseDate"})}),Object(j.jsx)(De.a,{children:h&&h[0]&&h[0].releaseDate&&Object(pi.a)(new Date(h[0].releaseDate),"yyyy/MM/dd")})]}),Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"composers"})}),Object(j.jsx)(De.a,{children:null===m||void 0===m||null===(n=m.composers)||void 0===n?void 0:n.map((function(e){return Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))})]}),Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"lyrists"})}),Object(j.jsx)(De.a,{children:null===m||void 0===m||null===(a=m.lyrists)||void 0===a?void 0:a.map((function(e){return Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))})]}),Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"band"})}),Object(j.jsx)(De.a,{children:(null===m||void 0===m?void 0:m.band)&&Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.BANDS,"/").concat(m.band.id),children:m.band.name})})]}),Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"user"})}),Object(j.jsx)(De.a,{children:(null===m||void 0===m?void 0:m.user)&&Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.USERS,"/").concat(m.user.id),children:m.user.nickname})})]})]})]})})]}),Object(j.jsxs)(ye.a,{mb:3,children:[Object(j.jsx)(Yi,{}),Object(j.jsx)(Ke.a,{component:Fe.a,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"role"})}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"artist"})})]})}),Object(j.jsx)(Be.a,{children:null===m||void 0===m||null===(c=m.artistMusics)||void 0===c?void 0:c.map((function(e){return Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:e.role}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.ARTISTS,"/").concat(e.artist.id),children:e.artist.name})})]},e.id)}))})]})})]}),Object(j.jsx)(Gi,{}),Object(j.jsx)(lt,{albums:(null===m||void 0===m?void 0:m.albums)||[]})]})},eo=function(){var e=jc(),t=Object(R.a)(e,3),n=t[0],a=t[1],c=t[2],i=Object(Ea.d)(),o=i.errors,r=i.control,l=i.handleSubmit,s=Object(ve.f)(),d=Object(ve.i)(),u=Number(d.params.id),b=Number(d.params.userId),m=Object(O.c)(z),h=Object(Oe.b)(),f=h.getQueryData([Ic.MUSIC,u,m]),p=nt().onError,x=Object(O.b)(),g=Object(Ua.a)((function(){return function(e,t){return Pa.a.delete("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t),ci())}(b,u)}),{onSuccess:function(e){x(P(e.headers)),h.removeQueries([Ic.MUSIC,u,m]),s.push(Se.ROOT)},onError:p});return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Sc.a,{onClose:c,open:n,children:Object(j.jsxs)(ye.a,{m:3,children:[Object(j.jsx)(kc.a,{children:Object(j.jsx)(Re.a,{id:"alertDelete"})}),Object(j.jsxs)(Ce.a,{children:["Please type"," ",Object(j.jsx)(ye.a,{display:"inline",fontWeight:"Bold",children:null===f||void 0===f?void 0:f.title})," ","to confirm."]}),Object(j.jsx)(Ra,{name:"title",defaultValue:"",autoComplete:"on",label:"Title",variant:"outlined",control:r,errors:o,disabled:g.isLoading,fullWidth:!0,rules:{validate:function(e){return e===(null===f||void 0===f?void 0:f.title)}}}),Object(j.jsx)(Da,{type:"button",color:"secondary",loading:g.isLoading,onClick:l((function(){return g.mutate()})),fullWidth:!0,children:"Delete Music"})]})}),Object(j.jsx)(gt.a,{variant:"contained",color:"secondary",onClick:a,children:"Delete this music"})]})};eo.defaultProps={music:void 0};var to=eo,no=function(e){var t=e.issues,n=e.page,a=e.pageCount,c=e.onPage,i=e.loading,o=Object(ve.i)();return Object(j.jsx)(Ye,{page:n,pageCount:a,onPage:c,loading:i,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsx)(We.a,{children:Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"title"})})})}),Object(j.jsx)(Be.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(j.jsx)(We.a,{children:Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(o.url,"/").concat(e.id),children:e.title})})},e.id)}))})]})})},ao=function(){var e,t=un(),n=Object(R.a)(t,2),a=n[0],c=n[1],i=Object(ve.i)(),o=Object(wa.a)(),l=(e={id:Number(i.params.id),page:a},ka({firstKey:"music",secondKey:"issues",fn:ia},e)),s=l.data,d=l.isLoading;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsxs)(ke.a,{container:!0,children:[Object(j.jsx)(ke.a,{item:!0,xs:10,children:Object(j.jsx)(Na.a,{variant:"outlined",label:o.formatMessage({id:"searchIssues"}),onKeyPress:function(){},fullWidth:!0})}),Object(j.jsx)(ke.a,{item:!0,xs:2,children:Object(j.jsx)(gt.a,{variant:"contained",component:r.b,to:i.url+Se.NEW,children:Object(j.jsx)(Re.a,{id:"create"})})})]})}),Object(j.jsx)(no,{issues:(null===s||void 0===s?void 0:s.data)||[],loading:d,page:a,pageCount:null===s||void 0===s?void 0:s.pagination.totalPages,onPage:c})]})},co=n(420),io=n.n(co),oo=n(421),ro=n.n(oo),lo=function(e){var t=e.files,n=e.blobPath,a=e.treePath;return Object(j.jsx)(Ke.a,{component:Fe.a,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"file"})})]})}),Object(j.jsx)(Be.a,{children:t.map((function(e){return Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:"blob"===e.type?Object(j.jsx)(io.a,{color:"action"}):Object(j.jsx)(ro.a,{color:"action"})}),Object(j.jsx)(De.a,{children:"blob"===e.type?Object(j.jsx)(Ie.a,{to:{pathname:"".concat(n,"/").concat(e.name),state:{oid:e.oid,path:e.name}},component:r.b,children:e.name}):Object(j.jsx)(Ie.a,{to:{pathname:"".concat(a,"/").concat(e.name),state:{oid:e.oid,path:e.name}},component:r.b,children:e.name})})]},e.oid)}))})]})})},so=function(){var e,t=Object(ve.i)(),n=Number(t.params.id),a=Number(t.params.userId),c=Object(O.c)(z),i=Object(Oe.b)().getQueryData([Ic.MUSIC,n,c]),o=ya({key:"musicRootTree",fn:na},{id:n});return Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:[Fn,"/git/",a,"/",null===i||void 0===i?void 0:i.title,".git"]}),Object(j.jsx)("p",{children:"Files"}),Object(j.jsx)(lo,{files:(null===(e=o.data)||void 0===e?void 0:e.rootTree)||[],treePath:"".concat(t.url,"/tree"),blobPath:"".concat(t.url,"/blob")})]})},uo=function(){var e,t,n=Object(ve.h)(),a=Object(ve.i)(),c=Object(ve.g)().state.oid,i=Number(n.id),o=ya({key:"musicTree",fn:aa},{id:i,oid:c});return Object(j.jsxs)("div",{children:[Object(j.jsx)("pre",{children:null===(e=o.data)||void 0===e?void 0:e.blob}),Object(j.jsx)(lo,{files:(null===(t=o.data)||void 0===t?void 0:t.tree)||[],treePath:a.url.replace("tree","blob"),blobPath:a.url.replace("tree","blob")})]})},jo=n(1323),bo=n(1298),Oo=function(){var e,t=Object(ve.h)(),n=Object(ve.g)().state.oid,a=Number(t.id),c=ya({key:"musicBlob",fn:ca},{id:a,oid:n});return Object(j.jsx)(Fe.a,{children:Object(j.jsx)(jo.a,{style:bo.a,children:(null===(e=c.data)||void 0===e?void 0:e.blob)||""})})},mo=function(){var e=Object(Ea.d)({resolver:Object(Aa.a)(Qi)}),t=e.errors,n=e.control,a=e.handleSubmit,c=Object(ve.i)().url.replace("/new",""),i=Object(ve.h)(),o=Number(i.userId),r=Number(i.id),l=Object(ve.f)(),s=Object(O.b)(),d=nt().onError,u=Object(wa.a)(),b=Object(Ua.a)((function(e){return function(e,t,n){return Pa.a.post("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t).concat(Se.ISSUES),n,ci())}(o,r,e)}),{onSuccess:function(e){s(P(e.headers)),l.push("".concat(c,"/").concat(e.data.id))},onError:d}),m=b.isLoading,h=b.mutate;return Object(j.jsxs)("form",{onSubmit:a((function(e){return h(e)})),children:[Object(j.jsx)(Ra,{name:"title",defaultValue:"",autoComplete:"on",label:u.formatMessage({id:"title"}),variant:"outlined",margin:"normal",control:n,errors:t,disabled:m,fullWidth:!0}),Object(j.jsx)(Ra,{name:"description",defaultValue:"",autoComplete:"on",label:u.formatMessage({id:"description"}),variant:"outlined",margin:"normal",control:n,errors:t,disabled:m,rows:10,fullWidth:!0,multiline:!0}),Object(j.jsx)(Da,{type:"submit",loading:m,children:Object(j.jsx)(Re.a,{id:"createIssue"})})]})},ho=n(424),fo=n.n(ho),po=n(1324),xo=n(277),go=["inline","className","children"],vo=function(){var e=Object(ve.h)(),t=Number(e.id),n=ya({key:"issue",fn:oa},{id:t}),a=n.data,c=n.isLoading,i={code:function(e){var t=e.inline,n=e.className,a=e.children,c=Object(La.a)(e,go),i=/language-(\w+)/.exec(n||"");return!t&&i?Object(j.jsx)(po.a,Object(q.a)(Object(q.a)({style:xo.dark,language:i[1],PreTag:"div"},c),{},{children:String(a).replace(/\n$/,"")})):Object(j.jsx)("code",Object(q.a)(Object(q.a)({className:n},c),{},{children:a}))}};return Object(j.jsxs)(j.Fragment,{children:[c&&Object(j.jsx)(Ve.a,{}),Object(j.jsx)(Ce.a,{variant:"h3",children:null===a||void 0===a?void 0:a.title}),Object(j.jsx)(fo.a,{components:i,children:(null===a||void 0===a?void 0:a.description)||""})]})},So=n(426),ko=n.n(So),yo=function(){var e,t,n,a=nt().onError,c=Object(ve.h)(),i=Number(c.id),o=Object(Oe.b)().getQueryData([Ic.MUSIC,i]),r=Object(Ge.a)([Ic.MUSIXMATCH,null===o||void 0===o?void 0:o.link.id],(function(){return e=null===o||void 0===o?void 0:o.link.musixmatch,ki.jsonp("track.lyrics.get",{params:{track_id:e}});var e}),{onError:a}),l=r.data;return r.isLoading?Object(j.jsx)(qa.a,{}):Object(j.jsx)("div",{className:ko.a.lyric,children:(null===l||void 0===l||null===(e=l.message)||void 0===e||null===(t=e.body)||void 0===t||null===(n=t.lyrics)||void 0===n?void 0:n.lyrics_body)||""})},Co=n(1301),Io=n(1321),Po=n(1266),wo=n(1300),Eo=n(1334),Uo=n(1299),Ao=n(1332),Lo=n(428),Mo=n.n(Lo),No=n(429),To=n.n(No),$o=n(430),Ro=n.n($o),qo=n(427),Bo=n.n(qo),Do=function(e){var t=e.value;return e.muted||!t?Object(j.jsx)(Bo.a,{}):t>=.6?Object(j.jsx)(Mo.a,{}):t>=.3?Object(j.jsx)(To.a,{}):Object(j.jsx)(Ro.a,{})};Do.defaultProps={value:void 0,muted:!1};var _o=function(e){var t=e.className,n=e.volume,a=e.muted,c=e.onMute,i=e.onVolume;return Object(j.jsx)(Uo.a,{className:t,value:"",selected:a,onChange:function(){c&&c()},children:Object(j.jsxs)(ye.a,{width:200,display:"flex",alignItems:"center",children:[Object(j.jsx)(Do,{value:n,muted:a}),Object(j.jsx)(Ao.a,{className:t,disabled:a,value:n,onClick:function(e){return e.stopPropagation()},onChange:i})]})})};_o.defaultProps={className:"",muted:!1,onVolume:void 0,onMute:void 0};var Wo=_o,Vo=n(432),Fo=n.n(Vo),Ko=n(431),Qo=n.n(Ko),zo=function(e){var t=e.className,n=e.paused,a=e.disabled,c=e.onPause;return Object(j.jsx)(Uo.a,{className:t,value:"check",disabled:a,onClick:function(){a||c&&c()},children:n?Object(j.jsx)(Qo.a,{}):Object(j.jsx)(Fo.a,{})})};zo.defaultProps={className:"",paused:!0,disabled:!1,onPause:void 0};var Yo=zo,Go=Object(nn.a)((function(e){return Object(Po.a)({appBar:{top:"auto",bottom:0},itunes:{color:e.palette.itunes.main},colorPrimary:{background:e.palette.itunes.light},barColorPrimary:{backgroundColor:e.palette.itunes.main}})})),Ho=function(e){var t=e.src,n=e.selectInput,a=e.onVolume,c=e.onPlay,i=e.onMute,o=Object(Io.a)({src:t||""}),r=Object(R.a)(o,3),l=r[0],s=r[1],d=r[2],u=Go();return Object(j.jsxs)(wo.a,{position:"fixed",color:"inherit",className:u.appBar,children:[l,Object(j.jsx)(Ve.a,{classes:{colorPrimary:u.colorPrimary,barColorPrimary:u.barColorPrimary},variant:"determinate",value:s.time/s.duration*100}),Object(j.jsx)(Co.a,{children:Object(j.jsx)(ye.a,{width:"100%",children:Object(j.jsxs)(ye.a,{display:"flex",justifyContent:"space-between",children:[Object(j.jsxs)(Eo.a,{children:[Object(j.jsx)(Wo,{className:u.itunes,muted:s.muted,volume:100*s.volume,onVolume:function(e,t){Array.isArray(t)||a(t,d)},onMute:function(){return i(s,d)}}),Object(j.jsx)(Yo,{className:u.itunes,paused:s.paused,onPause:function(){return c(s,d)}})]}),Object(j.jsx)(ye.a,{display:"flex",alignItems:"center",children:n})]})})})]})},Jo=Object(nn.a)((function(e){return Object(Po.a)({appBar:{top:"auto",bottom:0,color:"#191414"},spotify:{color:e.palette.spotify.main},colorPrimary:{background:e.palette.spotify.light},barColorPrimary:{backgroundColor:e.palette.spotify.main}})})),Xo=function(e){var t=e.src,n=e.selectInput,a=e.onVolume,c=e.onPlay,i=e.onMute,o=Object(Io.a)({src:t}),r=Object(R.a)(o,3),l=r[0],s=r[1],d=r[2],u=Object(O.c)(L),b=Jo();return Object(j.jsxs)(wo.a,{position:"fixed",color:"inherit",className:b.appBar,children:[l,Object(j.jsx)(Ve.a,{classes:{colorPrimary:b.colorPrimary,barColorPrimary:b.barColorPrimary},variant:"determinate",value:s.time/s.duration*100}),Object(j.jsx)(Co.a,{children:Object(j.jsx)(ye.a,{width:"100%",children:Object(j.jsxs)(ye.a,{display:"flex",justifyContent:"space-between",children:[Object(j.jsxs)(Eo.a,{children:[Object(j.jsx)(Wo,{className:b.spotify,muted:s.muted,volume:100*s.volume,onVolume:function(e,t){Array.isArray(t)||a(t,d)},onMute:function(){return i(s,d)}}),Object(j.jsx)(Yo,{className:b.spotify,paused:s.paused,onPause:function(){return c(s,d)},disabled:!u})]}),!u&&Object(j.jsx)(Nc,{}),Object(j.jsx)(ye.a,{display:"flex",alignItems:"center",children:n})]})})})]})},Zo=function(e){var t=e.src,n=Object.entries(t).filter((function(e){return!!Object(R.a)(e,2)[1]})).map((function(e){return Object(R.a)(e,1)[0]})),c=Object(a.useState)(""),i=Object(R.a)(c,2),o=i[0],r=i[1],l=function(e){return r(e.target.value)},s=function(e,t){return e.muted?t.unmute():t.mute()},d=function(e,t){return e.paused?t.play():t.pause()},u=function(e,t){Array.isArray(e)||t.volume(e/100)};Object(a.useEffect)((function(){t&&r(n[0])}),[t]);var b=function(){return Object(j.jsx)(ye.a,{display:"flex",alignItems:"center",children:Object(j.jsx)(Di.a,{value:o,onChange:l,children:n.map((function(e){return Object(j.jsx)(Ri.a,{value:e,children:e},e)}))})})};return"itunes"===o?Object(j.jsxs)(j.Fragment,{children:[t.itunes&&Object(j.jsx)(Ho,{src:t.itunes,selectInput:Object(j.jsx)(b,{}),onMute:s,onVolume:u,onPlay:d}),Object(j.jsx)(Co.a,{})]}):"spotify"===o?Object(j.jsxs)(j.Fragment,{children:[t.spotify&&Object(j.jsx)(Xo,{src:t.spotify,selectInput:Object(j.jsx)(b,{}),onMute:s,onVolume:u,onPlay:d}),Object(j.jsx)(Co.a,{})]}):Object(j.jsx)(j.Fragment,{})},er=function(e,t,n){var a=e.options;return Object(Ge.a)(["spotify","music",t],(function(){return function(e,t){return Bc.get("/tracks/".concat(e||""),{headers:Object(q.a)({},{Authorization:"Bearer ".concat(t||"")})}).then((function(e){return e.data}))}(t,n)}),Object(q.a)(Object(q.a)({},a),{},{enabled:!!t&&!!n}))},tr=function(){var e,t,n,a,c,i,o,l,s,d=Object(ve.i)(),u=Number(d.params.id),b=Number(d.params.userId),m=Object(ve.g)(),h=nt().onError,f=Object(O.b)(),p=Object(O.c)(k),x=Object(O.c)(L),g=Object(O.c)(z),v=Object(Oe.b)(),S=Object(wa.a)(),y=(s={id:u,locale:g,currentUserId:null===p||void 0===p?void 0:p.id},ya({key:"music",fn:ea},s)),C=ct({id:null===(e=y.data)||void 0===e||null===(t=e.link)||void 0===t?void 0:t.itunes}),I=er({options:{onError:function(e){f(T()),h(e)}}},null===(n=y.data)||void 0===n?void 0:n.link.spotify,null===x||void 0===x?void 0:x.access_token),w=Object(Ua.a)((function(){return function(e,t){return Pa.a.post("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t).concat(Se.BOOKMARKS),void 0,ci())}(b,u)}),{onSuccess:function(e){f(P(e.headers)),v.setQueryData(["music",u,g],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:h}),E=Object(Ua.a)((function(){var e,t;return function(e,t,n){return Pa.a.delete("".concat(Se.USERS,"/").concat(e).concat(Se.MUSICS,"/").concat(t).concat(Se.BOOKMARKS,"/").concat(n||"undefined"),ci())}(b,u,null===(e=y.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id)}),{onSuccess:function(e){f(P(e.headers)),v.setQueryData(["music",u,g],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:h});return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(dn,{children:[(null===(a=y.data)||void 0===a?void 0:a.localed)&&Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsxs)(nc.a,{severity:"warning",children:[Object(j.jsx)(ac.a,{children:Object(j.jsx)(Re.a,{id:"untranslation"})}),Object(j.jsx)("strong",{children:Object(j.jsx)(Re.a,{id:"pleaseTranslate"})})]})}),Object(j.jsxs)(ke.a,{container:!0,children:[Object(j.jsx)(ke.a,{item:!0,xs:11,children:Object(j.jsxs)(Ce.a,{variant:"h5",children:[Object(j.jsx)(Le.a,{}),null===(c=y.data)||void 0===c?void 0:c.title]})}),Object(j.jsx)(ke.a,{item:!0,xs:1,children:Object(j.jsx)(gc,{count:null===(i=y.data)||void 0===i?void 0:i.bookmarksCount,bookmarked:!!(null===(o=y.data)||void 0===o?void 0:o.bookmark)||!1,onCreate:function(){return w.mutate()},onDestroy:function(){return E.mutate()}})}),Object(j.jsx)(ke.a,{item:!0,xs:1,children:Object(j.jsx)(ti,{queryKey:Ic.MUSIC,name:"title",inputLabel:S.formatMessage({id:"title"}),buttonLabel:S.formatMessage({id:"translateTitle"}),patchFn:ii(b)})})]}),Object(j.jsx)(ye.a,{height:"100px",width:"100px",m:"auto",children:C.data&&C.data[0]&&Object(j.jsx)($e.a,{src:C.data[0].artworkUrl100})}),Object(j.jsx)(ye.a,{my:3,children:Object(j.jsx)(gt.a,{variant:"contained",color:"primary",disabled:!!y.data&&!y.data.scoreExist,component:r.b,to:d.url+Se.TAB,fullWidth:!0,disableElevation:!0,children:Object(j.jsx)(Re.a,{id:"watchScore"})})}),Object(j.jsxs)(fi.a,{value:m.pathname.includes("issues")?d.url+Se.ISSUES:m.pathname.includes("files")?d.url+Se.FILES:m.pathname,children:[Object(j.jsx)(hi.a,{label:S.formatMessage({id:"info"}),value:d.url,component:r.b,to:d.url}),Object(j.jsx)(hi.a,{label:S.formatMessage({id:"file"}),value:d.url+Se.FILES,component:r.b,to:d.url+Se.FILES}),Object(j.jsx)(hi.a,{label:S.formatMessage({id:"lyric"}),value:d.url+Se.LYRIC,component:r.b,to:d.url+Se.LYRIC,disabled:!0}),Object(j.jsx)(hi.a,{label:S.formatMessage({id:"issues"}),value:d.url+Se.ISSUES,component:r.b,to:d.url+Se.ISSUES}),Object(j.jsx)(hi.a,{label:S.formatMessage({id:"setting"}),value:d.url+Se.SETTING,component:r.b,to:d.url+Se.SETTING,disabled:(null===p||void 0===p?void 0:p.id)!==Number(d.params.userId)})]}),Object(j.jsxs)(ve.c,{children:[Object(j.jsx)(ve.a,{exact:!0,path:d.path,component:Zi}),Object(j.jsx)(ve.a,{exact:!0,path:d.path+Se.FILES,component:so}),Object(j.jsx)(ve.a,{exact:!0,path:d.path+Se.SETTING,component:to}),Object(j.jsx)(ve.a,{exact:!0,path:d.path+Se.LYRIC,component:yo}),Object(j.jsx)(ve.a,{exact:!0,path:d.path+Se.FILES,component:so}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(d.path+Se.FILES+Se.TREE,"/:filename"),component:uo}),Object(j.jsx)(ve.a,{strict:!0,path:"".concat(d.path+Se.FILES+Se.BLOB,"/:filename"),component:Oo}),Object(j.jsx)(ve.a,{exact:!0,path:d.path+Se.ISSUES,component:ao}),Object(j.jsx)(ve.a,{exact:!0,path:d.path+Se.ISSUES+Se.NEW,component:mo}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(d.path).concat(Se.ISSUES,"/:id"),component:vo})]})]}),Object(j.jsx)(Zo,{src:{itunes:C.data&&C.data[0]?C.data[0].previewUrl:void 0,spotify:null===(l=I.data)||void 0===l?void 0:l.preview_url}})]})},nr=function(){var e,t,n,c=un(),i=Object(R.a)(c,2),o=i[0],r=i[1],l=jc(),s=Object(R.a)(l,3),d=s[0],u=s[1],b=s[2],m=Object(a.useState)(),h=Object(R.a)(m,2),f=h[0],p=h[1],x=Object(Ea.d)(),g=x.errors,v=x.control,S=x.watch,y=x.register,C=x.setValue,I=x.handleSubmit,w=S().title,E=Object(ui.a)(w,1e3),U=Object(R.a)(E,2),A=U[0],L=U[1].isPending,M=Object(O.b)(),N=Object(O.c)(k),T=Object(O.c)(z),$=Object(ve.f)(),q=Object(ve.i)(),B=Number(q.params.id),D="".concat(Se.USERS,"/").concat((null===N||void 0===N?void 0:N.id)||"undefinde").concat(Se.MUSICS),_=nt().onError,W=Object(Oe.b)(),V=Object(wa.a)(),F=Object(Ua.a)((function(e){return t=null===N||void 0===N?void 0:N.id,n=e,Pa.a.post("".concat(Se.USERS,"/").concat(t||"undefined").concat(Se.MUSICS),{music:n,locale:ai()},ci());var t,n}),{onSuccess:function(e){M(P(e.headers)),$.push("".concat(D,"/").concat(e.data.id)),W.setQueryData(["music",B],e.data),f&&W.setQueryData(["itunes","music",f.trackId],f)},onError:_}),K=xa({page:o,locale:T,q:{title_cont:A},options:{enabled:!L()&&!!A,onError:_}});return Object(a.useEffect)((function(){if(y("link_attributes.itunes"),f){var e=f.trackCensoredName,t=f.trackId;C("title",e),C("link_attributes.itunes",t)}}),[y,f,C]),Object(j.jsx)(dn,{children:Object(j.jsx)(Fe.a,{children:Object(j.jsxs)(ye.a,{p:3,children:[Object(j.jsx)(ye.a,{height:"100px",width:"100px",m:"auto",children:Object(j.jsx)($e.a,{src:(null===f||void 0===f?void 0:f.artworkUrl100)||"undefiend"})}),Object(j.jsx)(Ra,{name:"title",defaultValue:"",autoComplete:"on",label:V.formatMessage({id:"title"}),variant:"outlined",control:v,errors:g,disabled:F.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(j.jsx)(Xa,{color:"inherit",size:20,loading:K.isLoading})}}),Object(j.jsx)(ji,{disabled:!A,onClick:u,fullWidth:!0,disableElevation:!0}),Object(j.jsx)(vi,{defaultValue:A,open:d,onClose:b,onSelect:function(e){return p(e)}}),Object(j.jsx)(bi,{data:null===(e=K.data)||void 0===e?void 0:e.data,children:Object(j.jsx)(rt,{musics:(null===(t=K.data)||void 0===t?void 0:t.data)||[],page:o,pageCount:null===(n=K.data)||void 0===n?void 0:n.pagination.totalPages,onPage:r,loading:K.isLoading})}),Object(j.jsx)(Da,{color:"primary",loading:F.isLoading,disabled:!A,onClick:I((function(e){return F.mutate(e)})),fullWidth:!0,children:Object(j.jsx)(Re.a,{id:"createMusic"})})]})})})},ar=n(433),cr=n.n(ar),ir=n(144),or=n(1303),rr=n(438),lr=n.n(rr),sr=function(e){var t=e.title,n=e.artist;return Object(j.jsxs)(ye.a,{className:"SongInfo",display:"flex",alignItems:"center",height:"100%",children:[Object(j.jsx)(ye.a,{className:"at-song-title",mx:3,children:Object(j.jsx)(Ce.a,{variant:"body1",children:t})}),"-",Object(j.jsx)(ye.a,{className:"at-song-artist",mx:3,children:Object(j.jsx)(Ce.a,{variant:"body2",children:n})})]})},dr=n(434),ur=n.n(dr),jr=function(e){var t=e.className,n=e.disabled,a=e.onStop;return Object(j.jsx)(Uo.a,{className:t,value:"check",disabled:n,onClick:function(){n||a&&a()},children:Object(j.jsx)(ur.a,{})})};jr.defaultProps={className:"",disabled:!1,onStop:void 0};var br=jr,Or=n(435),mr=n.n(Or),hr=function(e){var t=e.className,n=e.selected,a=e.onClick;return Object(j.jsx)(Uo.a,{className:t,value:"check",selected:n,onClick:a,children:Object(j.jsx)(mr.a,{})})};hr.defaultProps={className:"",selected:!1,onClick:void 0};var fr=hr,pr=n(436),xr=n.n(pr),gr=function(e){var t=e.className,n=e.selected,a=e.onClick;return Object(j.jsx)(Uo.a,{className:t,value:"check",selected:n,onClick:a,children:Object(j.jsx)(xr.a,{})})};gr.defaultProps={className:"",selected:!1,onClick:void 0};var vr=gr,Sr=n(437),kr=function(e){var t=e.className,n=e.selected,a=e.onClick;return Object(j.jsx)(Uo.a,{value:"check",className:t,selected:n,onClick:a,children:Object(j.jsx)(Sr.a,{size:24})})};kr.defaultProps={className:"",selected:!1,onClick:void 0};var yr=kr,Cr=n(1329),Ir=n(1289),Pr=function(e){var t=e.onLayout,n=e.layout;return Object(j.jsxs)(Ir.a,{className:"Layout",children:[Object(j.jsx)(Cr.a,{id:"layout-select-label",children:"Layout"}),Object(j.jsxs)(Di.a,{id:"layout-select",labelId:"layout-select-label",value:n,onChange:t,autoWidth:!0,children:[Object(j.jsx)(Ri.a,{value:0,children:"Horizontal"}),Object(j.jsx)(Ri.a,{value:1,children:"Page"})]})]})};Pr.defaultProps={layout:0,onLayout:void 0};var wr=Pr,Er=function(e){var t=e.zoom,n=e.onZoom,a=[25,50,75,90,100,110,125,150,200].map((function(e){return Object(j.jsxs)(Ri.a,{value:e,children:[e,"%"]},e)}));return Object(j.jsxs)(Ir.a,{className:"Zoom",children:[Object(j.jsx)(Cr.a,{id:"zoom-select-label",children:"Zoom"}),Object(j.jsx)(Di.a,{id:"zoom-select",labelId:"zoom-select-label",value:t,onChange:n,children:a})]})};Er.defaultProps={zoom:100,onZoom:void 0};var Ur=Er,Ar=function(e){var t=e.alphaTabApi,n=ir.LayoutMode.Horizontal,c=ir.LayoutMode.Page,i=Object(a.useState)(""),o=Object(R.a)(i,2),r=o[0],l=o[1],s=Object(a.useState)(""),d=Object(R.a)(s,2),u=d[0],b=d[1],O=Object(a.useState)(100),m=Object(R.a)(O,2),h=m[0],f=m[1],p=Object(a.useState)(!0),x=Object(R.a)(p,2),g=x[0],v=x[1],S=Object(a.useState)(!0),k=Object(R.a)(S,2),y=k[0],C=k[1],I=Object(or.a)(!1),P=Object(R.a)(I,2),w=P[0],E=P[1],U=Object(or.a)(!1),A=Object(R.a)(U,2),L=A[0],M=A[1],N=Object(or.a)(!1),T=Object(R.a)(N,2),$=T[0],q=T[1],B=Object(or.a)(!1),D=Object(R.a)(B,2),_=D[0],W=D[1],V=Object(a.useState)(c),F=Object(R.a)(V,2),K=F[0],Q=F[1],z=Object(a.useState)(100),Y=Object(R.a)(z,2),G=Y[0],H=Y[1],J=Object(ve.f)(),X=function(){return C(!1)},Z=function(e){var t=e.state;return v(0===t)},ee=function(e){l(e.title),b(e.artist)};return Object(a.useEffect)((function(){return null===t||void 0===t||t.scoreLoaded.on(ee),null===t||void 0===t||t.playerReady.on(X),null===t||void 0===t||t.playerStateChanged.on(Z),function(){null===t||void 0===t||t.scoreLoaded.off(ee),null===t||void 0===t||t.playerReady.off(X),null===t||void 0===t||t.playerStateChanged.off(Z)}}),[t]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(wo.a,{className:"Header",position:"fixed",color:"default",children:[Object(j.jsx)(Co.a,{children:Object(j.jsxs)(ke.a,{container:!0,children:[Object(j.jsx)(ke.a,{item:!0,xs:1,children:Object(j.jsx)(jt.a,{onClick:function(){return J.goBack()},children:Object(j.jsx)(lr.a,{})})}),Object(j.jsx)(ke.a,{className:"at-controls-left",item:!0,xs:3,children:Object(j.jsx)(sr,{title:r,artist:u})}),Object(j.jsx)(ke.a,{item:!0,xs:5,children:Object(j.jsx)(ye.a,{display:"flex",justifyContent:"center",children:Object(j.jsxs)(Eo.a,{children:[Object(j.jsx)(br,{onStop:function(){return null===t||void 0===t?void 0:t.stop()}}),Object(j.jsx)(Yo,{paused:g,disabled:y,onPause:function(){return null===t||void 0===t?void 0:t.playPause()}}),Object(j.jsx)(Wo,{volume:h,muted:w,onMute:function(){t&&(E(),0===t.masterVolume?t.masterVolume=h/100:t.masterVolume=0)},onVolume:function(e,n){t&&(Array.isArray(n)||(t.masterVolume=n/100,f(n)))}}),Object(j.jsx)(fr,{selected:L,onClick:function(){t&&(M(),t.countInVolume=L?0:1)}}),Object(j.jsx)(vr,{selected:$,onClick:function(){t&&(q(),t.isLooping=!$)}}),Object(j.jsx)(yr,{selected:_,onClick:function(){t&&(W(),t.metronomeVolume=_?0:1)}})]})})}),Object(j.jsx)(ke.a,{item:!0,xs:3,children:Object(j.jsxs)(ke.a,{className:"at-controls-right",container:!0,children:[Object(j.jsx)(ke.a,{item:!0,xs:6}),Object(j.jsx)(ke.a,{item:!0,xs:3,children:Object(j.jsx)(Ur,{zoom:G,onZoom:function(e){if(t){H(e.target.value);var n=parseInt(e.target.value,10)/100;t.settings.display.scale=n,t.updateSettings(),t.render()}}})}),Object(j.jsx)(ke.a,{item:!0,xs:3,children:Object(j.jsx)(wr,{layout:K,onLayout:function(e){if(t){switch(e.target.value){case n:Q(n),t.settings.display.layoutMode=n;break;case c:Q(c),t.settings.display.layoutMode=c}t.updateSettings(),t.render()}}})})]})})]})}),y&&Object(j.jsx)(Ve.a,{})]})})};Ar.defaultProps={alphaTabApi:void 0};var Lr=Ar,Mr=n(1291),Nr=n(1233),Tr=n(1304),$r=n(1305),Rr=function(e){var t=e.color;return Object(j.jsx)(st.a,{color:t,children:Object(j.jsx)(dt.a,{})})},qr=(new ir.model.Track,function(e){var t=e.track,n=e.selectedIndex,c=e.i,i=e.onListItemClick,o=e.onMute,r=e.onSolo,l=Object(a.useState)(!1),s=Object(R.a)(l,2),d=s[0],u=s[1],b=Object(a.useState)(!1),O=Object(R.a)(b,2),m=O[0],h=O[1],f=n===c;return Object(j.jsxs)(Nr.a,{id:"at-track-template",button:!0,selected:f,onClick:function(){i&&i(t,c)},children:[Object(j.jsx)(Tr.a,{children:Object(j.jsx)(Rr,{color:f?"primary":"inherit"})}),Object(j.jsx)($r.a,{primary:t.name,secondary:Object(j.jsxs)(Eo.a,{children:[Object(j.jsx)(Uo.a,{size:"small",selected:d,onClick:function(e){e.stopPropagation(),o&&o(d,t),u(!d)},children:"M"}),Object(j.jsx)(Uo.a,{size:"small",selected:m,onClick:function(e){e.stopPropagation(),r&&r(m,t),h(!m)},children:"S"})]})})]},t.name)}),Br=function(e){var t=e.tracks,n=e.selectedIndex,a=e.onListItemClick,c=e.onSolo,i=e.onMute;return Object(j.jsx)(Mr.a,{className:"at-track-list",component:Fe.a,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(j.jsx)(qr,{track:e,selectedIndex:n,i:t,onListItemClick:a,onSolo:c,onMute:i},e.index)}))})};Br.defaultProps={tracks:[],selectedIndex:0,onMute:void 0,onSolo:void 0,onListItemClick:void 0};var Dr=Br,_r=n(439),Wr=n.n(_r),Vr={tex:!0,player:{enablePlayer:!0,soundFont:"https://cdn.jsdelivr.net/npm/@coderline/alphatab@latest/dist/soundfont/sonivox.sf2"}},Fr=(new ir.model.Score,function(){var e=Object(a.useState)([]),t=Object(R.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(0),o=Object(R.a)(i,2),r=o[0],l=o[1],s=Object(a.useState)(),d=Object(R.a)(s,2),u=d[0],b=d[1],m=Object(a.useRef)(null),h=Object(fe.b)().enqueueSnackbar,f=cr()({src:"https://cdn.jsdelivr.net/npm/@coderline/alphatab@latest/dist/alphaTab.js"}),p=Object(R.a)(f,2),x=p[0],g=p[1],v=Object(ve.i)(),S=Object(O.c)(z),k=Number(v.params.id);ya({key:"musicScore",fn:ta},{id:k,locale:S,options:{onSuccess:function(e){null===u||void 0===u||u.tex(e.score)},enabled:x}});var y=function(e){return c(e.tracks)},C=Object(a.useCallback)((function(){u&&l(u.tracks[0].index)}),[u]);return Object(a.useEffect)((function(){!x&&m.current&&b(new window.alphaTab.AlphaTabApi(m.current,Vr))}),[x]),Object(a.useEffect)((function(){return null===u||void 0===u||u.renderStarted.on(C),null===u||void 0===u||u.scoreLoaded.on(y),function(){null===u||void 0===u||u.renderStarted.off(C),null===u||void 0===u||u.scoreLoaded.off(y),null===u||void 0===u||u.destroy()}}),[u,null===u||void 0===u?void 0:u.renderStarted,null===u||void 0===u?void 0:u.scoreLoaded,C]),Object(a.useEffect)((function(){g&&h(g.type,{variant:"error"})}),[h,g]),Object(j.jsxs)(ye.a,{className:"at-wrap",position:"relative",display:"flex",flexDirection:"column",height:"93vh",overflow:"hidden",children:[Object(j.jsx)(Lr,{alphaTabApi:u}),Object(j.jsxs)(ye.a,{className:"at-content",position:"relative",overflow:"hidden",flexGrow:1,children:[Object(j.jsx)(ye.a,{className:Wr.a.atSidebar,position:"absolute",top:"0",left:"0",bottom:"0",zIndex:1001,display:"flex",alignContent:"stretch",width:"auto",maxWidth:"60px",overflow:"hidden",border:1,borderLeft:0,borderTop:0,borderBottom:0,borderColor:"divider",children:Object(j.jsx)(Dr,{tracks:n,selectedIndex:r,onMute:function(e,t){return null===u||void 0===u?void 0:u.changeTrackMute([t],!e)},onSolo:function(e,t){return null===u||void 0===u?void 0:u.changeTrackSolo([t],!e)},onListItemClick:function(e,t){l(t),null===u||void 0===u||u.renderTracks([e])}})}),Object(j.jsx)(ye.a,{className:"at-viewport",overflow:"auto",position:"absolute",top:0,left:70,right:0,bottom:0,pr:3,children:Object(j.jsx)("div",{ref:m,className:"at-main"})})]})]})}),Kr=function(){var e=Object(a.useState)(""),t=Object(R.a)(e,2),n=t[0],c=t[1],i=un(),o=Object(R.a)(i,2),r=o[0],l=o[1],s=Object(Ya.useDebounce)(n,1e3),d=Object(R.a)(s,2),u=d[0],b=d[1].isPending,m=Object(O.c)(z),h=Sa({page:r,locale:m,q:{name_cont:u}}),f=h.isLoading,p=h.data;return Object(j.jsxs)(dn,{children:[Object(j.jsx)(ec,{onChange:function(e){return c(e.target.value)},loading:f||b()}),Object(j.jsx)(ht,{bands:(null===p||void 0===p?void 0:p.data)||[],loading:f,page:r,pageCount:null===p||void 0===p?void 0:p.pagination.totalPages,onPage:l})]})},Qr=function(){var e,t,n=Object(a.useState)(""),c=Object(R.a)(n,2),i=c[0],o=c[1],l=jc(),s=Object(R.a)(l,3),d=s[0],u=s[1],b=s[2],m=Ei()(i,1e3),h=Object(R.a)(m,2),f=h[0],p=h[1].isPending,x=Object(Ea.d)(),g=x.register,v=x.handleSubmit,S=x.setValue,k=Object(ve.i)(),C=Number(k.params.id),I=k.url+Se.ARTISTS,w=Object(O.b)(),E=Object(O.c)(y),U=Object(O.c)(z),A=nt().onError,L=Object(Oe.b)(),M=L.getQueryData(["band",C]),N=Object(Ua.a)((function(e){return Pa.a.post(I,e,E)}),{onSuccess:function(e){w(P(e.headers)),L.setQueryData(["band",C],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{artists:[].concat(Object(St.a)(t.artists||[]),[e.data.artist])})}))},onError:A}),T=Object(Ua.a)((function(e){return Pa.a.delete("".concat(I,"/").concat(e.id),E)}),{onSuccess:function(e,t){w(P(e.headers)),L.setQueryData(["band",C],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{artists:e.artists&&e.artists.filter((function(e){return e!==t}))})}))},onError:A}),$=va({page:1,locale:U,q:{name_cont:f},options:{enabled:!!f}});return Object(a.useEffect)((function(){g("artist_id")}),[g]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(gt.a,{onClick:u,children:"Edit"}),Object(j.jsxs)(Sc.a,{onClose:b,open:d,fullWidth:!0,children:[Object(j.jsx)(kc.a,{children:"Edit Albums"}),Object(j.jsxs)(sn.a,{children:[Object(j.jsx)(Ke.a,{component:Fe.a,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:"Artist"}),Object(j.jsx)(De.a,{align:"right",children:"Delete"})]})}),Object(j.jsx)(Be.a,{children:null===M||void 0===M||null===(e=M.artists)||void 0===e?void 0:e.map((function(e){return Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"/",children:e.name})}),Object(j.jsx)(De.a,{align:"right",children:Object(j.jsx)(jt.a,{onClick:function(){return T.mutate(e)},children:Object(j.jsx)(Bi.a,{})})})]},e.id)}))})]})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Li,{maxLength:1,onSelectOption:function(e){return S("artist_id",e.id)},onRemoveOption:function(){return S("artist_id","")},textFieldProps:{label:"Artist",variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,options:(null===(t=$.data)||void 0===t?void 0:t.data)||[],inputValue:i,loading:N.isLoading||T.isLoading||p(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t,n){return"input"===n&&o(t)}}})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Da,{color:"primary",loading:N.isLoading,onClick:v((function(e){return N.mutate(e)})),fullWidth:!0,children:"Add Artist"})})]})]})]})},zr=function(){var e,t,n,a,c,i,o,r,l,s,d,u,b,m,h,f,p,x=un(),g=Object(R.a)(x,2),v=g[0],S=g[1],y=un(),C=Object(R.a)(y,2),I=C[0],w=C[1],E=Object(ve.h)(),U=Number(E.id),A=nt().onError,L=Object(O.b)(),M=Object(O.c)(k),N=Object(O.c)(z),T=Object(Oe.b)(),$=Object(wa.a)(),B=(p={id:U,locale:N,currentUserId:null===M||void 0===M?void 0:M.id},ya({key:"band",fn:la},p)),D=function(e){return ka({firstKey:"band",secondKey:"albums",fn:sa},e)}({id:U,page:v,locale:N}),_=function(e){return ka({firstKey:"band",secondKey:"musics",fn:da},e)}({id:U,page:I,locale:N}),W=ot({id:null===(e=B.data)||void 0===e?void 0:e.link.itunes}),V=si(null===(t=B.data)||void 0===t?void 0:t.link.wikipedia),F=Object(Ua.a)((function(){return e=U,Pa.a.post("".concat(Se.BANDS,"/").concat(e).concat(Se.BOOKMARKS),void 0,ci());var e}),{onSuccess:function(e){L(P(e.headers)),T.setQueryData(["band",U,N],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:A}),K=Object(Ua.a)((function(){var e,t,n,a;return n=U,a=null===(e=B.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,Pa.a.delete("".concat(Se.BANDS,"/").concat(n).concat(Se.BOOKMARKS,"/").concat(a||"undefined"),ci())}),{onSuccess:function(e){L(P(e.headers)),T.setQueryData(["band",U,N],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:A}),Q=Object(Ua.a)((function(e){var t;return function(e,t,n){return Pa.a.patch("".concat(Se.BANDS,"/").concat(e).concat(Se.LINKS,"/").concat(t||"undefined"),{band_link:n,locale:ai()},Object(q.a)({},ci()))}(U,null===(t=B.data)||void 0===t?void 0:t.link.id,e)}),{onSuccess:function(e){L(P(e.headers)),T.setQueryData(["band",U,N],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{link:e.data})}))},onError:A}),Y=function(e){return Q.mutate({itunes:e.artistId})},G=function(e){return Q.mutate({wikipedia:e.pageid})},H=function(e){return Q.mutate({spotify:e.id})},J=function(e){return Q.mutate({youtube:e})},X=function(e){return Q.mutate({twitter:e})};return Object(j.jsxs)(dn,{children:[(null===(n=B.data)||void 0===n?void 0:n.localed)&&Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsxs)(nc.a,{severity:"warning",children:[Object(j.jsx)(ac.a,{children:Object(j.jsx)(Re.a,{id:"untranslation"})}),Object(j.jsx)("strong",{children:Object(j.jsx)(Re.a,{id:"pleaseTranslate"})})]})}),Object(j.jsxs)(ke.a,{container:!0,children:[Object(j.jsx)(ke.a,{item:!0,xs:10,children:Object(j.jsxs)(Ce.a,{variant:"h5",children:[Object(j.jsx)(Ne.a,{}),null===(a=B.data)||void 0===a?void 0:a.name]})}),Object(j.jsx)(ke.a,{item:!0,xs:1,children:Object(j.jsx)(gc,{count:null===(c=B.data)||void 0===c?void 0:c.bookmarksCount,bookmarked:!!(null===(i=B.data)||void 0===i?void 0:i.bookmark)||!1,onCreate:function(){return F.mutate()},onDestroy:function(){return K.mutate()}})}),Object(j.jsx)(ke.a,{item:!0,xs:1,children:Object(j.jsx)(ti,{queryKey:Ic.BAND,name:"name",inputLabel:$.formatMessage({id:"name"}),buttonLabel:$.formatMessage({id:"translateName"}),patchFn:ri})})]}),Object(j.jsx)(ye.a,{children:null===(o=V.data)||void 0===o?void 0:o.extract}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Oc,{twitter:{link:null===(r=B.data)||void 0===r?void 0:r.link.twitter,renderDialog:function(e,t){var n;return Object(j.jsx)(Gc,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.link.twitter,open:e,loading:Q.isLoading,onClose:t,onPatch:X})}},itunes:{link:W.data?W.data[0].artistLinkUrl:"",renderDialog:function(e,t){var n;return Object(j.jsx)(Pc,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:Y,showSearchBar:!0})}},wikipedia:{link:null===(l=B.data)||void 0===l?void 0:l.link.wikipedia,renderDialog:function(e,t){var n;return Object(j.jsx)(Xc,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:G,showSearchBar:!0})}},spotify:{type:"artist",link:null===(s=B.data)||void 0===s?void 0:s.link.spotify,renderDialog:function(e,t){var n;return Object(j.jsx)(zc,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:H,showSearchBar:!0})}},youtube:{type:"channel",link:null===(d=B.data)||void 0===d?void 0:d.link.youtube,renderDialog:function(e,t){var n;return Object(j.jsx)(ni,{id:(null===(n=B.data)||void 0===n?void 0:n.link.youtube)||"",open:e,onClose:t,onPatch:J,loading:Q.isLoading})}}})}),Object(j.jsxs)(ye.a,{mb:3,children:[Object(j.jsx)(Qr,{}),Object(j.jsx)(mt,{artists:null===(u=B.data)||void 0===u?void 0:u.artists,loading:B.isLoading})]}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(rt,{musics:(null===(b=_.data)||void 0===b?void 0:b.data)||[],loading:_.isLoading,page:I,pageCount:null===(m=_.data)||void 0===m?void 0:m.pagination.totalPages,onPage:w})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(lt,{albums:(null===(h=D.data)||void 0===h?void 0:h.data)||[],loading:B.isLoading,page:v,pageCount:null===(f=D.data)||void 0===f?void 0:f.pagination.totalPages,onPage:S})})]})},Yr=function(){var e,t,n,c=un(),i=Object(R.a)(c,2),o=i[0],r=i[1],l=jc(),s=Object(R.a)(l,3),d=s[0],u=s[1],b=s[2],m=Object(a.useState)(),h=Object(R.a)(m,2),f=h[0],p=h[1],x=Object(Ea.d)(),g=x.errors,v=x.control,S=x.setValue,k=x.watch,y=x.register,C=x.handleSubmit,I=k().name,w=Object(ui.a)(I,1e3),E=Object(R.a)(w,1)[0],U=Object(ve.f)(),A=Object(ve.i)(),L=Object(O.b)(),M=Object(O.c)(z),N=nt().onError,T=Object(Oe.b)(),$=Object(wa.a)(),q=Object(Ua.a)((function(e){return t=e,Pa.a.post(Se.BANDS,{band:t,locale:ai()},ci());var t}),{onSuccess:function(e){L(P(e.headers)),U.push("".concat(Se.BANDS,"/").concat(e.data.id)),T.setQueryData(["band",Number(A.params.id),{musicPage:1,albumPage:1}],e.data),f&&T.setQueryData(["itunes","artist",f.artistId],f)},onError:N}),B=Sa({page:o,locale:M,q:{name_cont:E},options:{enabled:!!E,onError:N}});return Object(a.useEffect)((function(){if(y("link_attributes.itunes"),f){var e=f.artistName,t=f.artistId;S("link_attributes.itunes",t),S("name",e)}}),[y,f,S]),Object(j.jsx)(dn,{children:Object(j.jsx)(Fe.a,{children:Object(j.jsxs)(ye.a,{p:3,children:[Object(j.jsx)(Ra,{name:"name",defaultValue:"",autoComplete:"on",label:$.formatMessage({id:"name"}),variant:"outlined",control:v,errors:g,disabled:q.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(j.jsx)(Xa,{color:"inherit",size:20,loading:q.isLoading})}}),Object(j.jsx)(ji,{onClick:u,disabled:!I,fullWidth:!0,disableElevation:!0}),Object(j.jsx)(Pc,{defaultValue:I,open:d,onClose:b,onSelect:function(e){return p(e)}}),Object(j.jsx)(bi,{data:null===(e=B.data)||void 0===e?void 0:e.data,children:Object(j.jsx)(ht,{bands:(null===(t=B.data)||void 0===t?void 0:t.data)||[],page:o,pageCount:null===(n=B.data)||void 0===n?void 0:n.pagination.totalPages,onPage:r,loading:B.isLoading})}),Object(j.jsx)(Da,{color:"primary",loading:q.isLoading,disabled:!I,onClick:C((function(e){return q.mutate(e)})),fullWidth:!0,children:Object(j.jsx)(Re.a,{id:"createBand"})})]})})})},Gr=function(e){var t=e.users,n=e.page,a=e.pageCount,c=e.onPage,i=e.loading;return Object(j.jsx)(Ye,{page:n,pageCount:a,onPage:c,loading:i,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Re.a,{id:"name"})}),Object(j.jsx)(De.a,{})]})}),Object(j.jsx)(Be.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"".concat(Se.USERS,"/").concat(e.id),children:e.nickname})}),Object(j.jsx)(De.a,{children:Object(j.jsx)(Ot,{href:e.link.twitter&&"https://twitter.com/".concat(e.link.twitter),children:Object(j.jsx)(ut,{})})})]},e.id)}))})]})})},Hr=function(){var e=Object(a.useState)(""),t=Object(R.a)(e,2),n=t[0],c=t[1],i=Object(Ya.useDebounce)(n,1e3),o=Object(R.a)(i,2),r=o[0],l=o[1].isPending,s=un(),d=Object(R.a)(s,2),u=d[0],b=d[1],O=pa({key:"users",fn:zn},{page:u,q:{nickname_cont:r}}),m=O.isLoading,h=O.data;return Object(j.jsxs)(dn,{children:[Object(j.jsx)(ec,{onChange:function(e){return c(e.target.value)},loading:m||l()}),Object(j.jsx)(Gr,{users:null===h||void 0===h?void 0:h.data,loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:b})]})},Jr=["followed","onFollow","onUnfollow"],Xr=function(e){var t=e.followed,n=e.onFollow,a=e.onUnfollow,c=Object(La.a)(e,Jr);return t?Object(j.jsx)(gt.a,Object(q.a)(Object(q.a)({onClick:a},c),{},{children:Object(j.jsx)(Re.a,{id:"unfollowUs"})})):Object(j.jsx)(gt.a,Object(q.a)(Object(q.a)({onClick:n},c),{},{children:Object(j.jsx)(Re.a,{id:"followUs"})}))},Zr=function(){var e,t,n=un(),a=Object(R.a)(n,2),c=a[0],i=a[1],o=Object(ve.h)(),r=Number(o.id),l=Object(O.c)(z),s=ka({firstKey:"user",secondKey:"musics",fn:Gn},{id:r,page:c,locale:l});return Object(j.jsx)(rt,{musics:(null===(e=s.data)||void 0===e?void 0:e.data)||[],loading:s.isLoading,pageCount:null===(t=s.data)||void 0===t?void 0:t.pagination.totalPages,page:c,onPage:i})},el=function(){var e=nt().onError,t=Object(ve.h)(),n=Number(t.id),a=Object(Oe.b)(),c=Object(Ge.a)([Ic.USER,n,Ic.PROFILE],function(e){return function(){return Qn.request(Dn,{id:e}).then((function(e){return e.user}))}}(n)),i=c.isLoading,o=c.data,r=a.getQueryData([Ic.USER,n,Ic.PROFILE]),l=Object(Ua.a)((function(e){return function(e,t,n){return Pa.a.patch("".concat(Se.USERS,"/").concat(e).concat(Se.LINKS,"/").concat(t||"undefined"),{twitter:n},Object(q.a)({},ci()))}(n,null===o||void 0===o?void 0:o.link.id,e)}),{onSuccess:function(e){a.setQueryData([Ic.USER,n,Ic.PROFILE],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{link:e.data})}))},onError:e}),s=function(e){return l.mutate(e)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(ye.a,{my:3,children:Object(j.jsx)(Oc,{loading:i,twitter:{link:null===o||void 0===o?void 0:o.link.twitter,renderDialog:function(e,t){return Object(j.jsx)(Gc,{defaultValue:null===r||void 0===r?void 0:r.link.twitter,open:e,loading:l.isLoading,onClose:t,onPatch:s})}}})})})},tl=function(){var e,t,n,a,c,i,o,r,l=un(),s=Object(R.a)(l,2),d=s[0],u=s[1],b=un(),m=Object(R.a)(b,2),h=m[0],f=m[1],p=un(),x=Object(R.a)(p,2),g=x[0],v=x[1],S=un(),k=Object(R.a)(S,2),y=k[0],C=k[1],I=Object(ve.h)(),P=Number(I.id),w=Object(O.c)(z),E=Object(Ge.a)([Ic.USER,P,Ic.BOOKMARKS,Ic.MUSICS,d,w],function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request($n,{id:t,bookmarkedMusicPage:n,locale:a}).then((function(e){return e.user.bookmarkedMusics}))}}({id:P,page:d,locale:w})),U=Object(Ge.a)([Ic.USER,P,Ic.BOOKMARKS,Ic.BANDS,g,w],function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request(Tn,{id:t,bookmarkedBandPage:n,locale:a}).then((function(e){return e.user.bookmarkedBands}))}}({id:P,page:g,locale:w})),A=Object(Ge.a)([Ic.USER,P,Ic.BOOKMARKS,Ic.ARTISTS,h,w],function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request(Nn,{id:t,bookmarkedArtistPage:n,locale:a}).then((function(e){return e.user.bookmarkedArtists}))}}({id:P,page:h,locale:w})),L=Object(Ge.a)([Ic.USER,P,Ic.BOOKMARKS,Ic.ALBUMS,y,w],function(e){var t=e.id,n=e.page,a=e.locale;return function(){return Qn.request(Mn,{id:t,bookmarkedAlbumPage:n,locale:a}).then((function(e){return e.user.bookmarkedAlbums}))}}({id:P,page:y,locale:w}));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(rt,{musics:(null===(e=E.data)||void 0===e?void 0:e.data)||[],pageCount:null===(t=E.data)||void 0===t?void 0:t.pagination.totalPages,loading:E.isLoading,page:d,onPage:u}),Object(j.jsx)(ht,{bands:(null===(n=U.data)||void 0===n?void 0:n.data)||[],pageCount:null===(a=U.data)||void 0===a?void 0:a.pagination.totalPages,loading:U.isLoading,page:g,onPage:v}),Object(j.jsx)(mt,{artists:null===(c=A.data)||void 0===c?void 0:c.data,pageCount:null===(i=A.data)||void 0===i?void 0:i.pagination.totalPages,loading:A.isLoading,page:h,onPage:f}),Object(j.jsx)(lt,{albums:(null===(o=L.data)||void 0===o?void 0:o.data)||[],pageCount:null===(r=L.data)||void 0===r?void 0:r.pagination.totalPages,loading:L.isLoading,page:y,onPage:C})]})},nl=function(){var e=nt().onError,t=Object(O.b)(),n=Object(O.c)(k),a=Object(Ea.d)({resolver:Object(Aa.a)(Ki)}),c=a.errors,i=a.control,o=a.handleSubmit,r=Object(wa.a)(),l=Object(Ua.a)((function(e){return t=null===n||void 0===n?void 0:n.id,a=e,Pa.a.patch("".concat(Se.USERS,"/").concat(t||"undefined"),a,ci());var t,a}),{onSuccess:function(e){t(I(e.data)),t(P(e.headers))},onError:e}),s=l.isLoading,d=l.mutate;return Object(j.jsxs)("form",{onSubmit:o((function(e){return d(e)})),children:[Object(j.jsx)(Ce.a,{variant:"h5",color:"initial",children:Object(j.jsx)(Re.a,{id:"setting"})}),Object(j.jsx)(Ra,{name:"email",defaultValue:null===n||void 0===n?void 0:n.email,label:r.formatMessage({id:"email"}),variant:"outlined",margin:"normal",control:i,errors:c,disabled:s,fullWidth:!0}),Object(j.jsx)(Ra,{name:"nickname",defaultValue:null===n||void 0===n?void 0:n.nickname,label:r.formatMessage({id:"nickname"}),variant:"outlined",margin:"normal",control:i,errors:c,disabled:s,fullWidth:!0}),Object(j.jsx)(Ra,{name:"familyname",defaultValue:null===n||void 0===n?void 0:n.familyname,label:r.formatMessage({id:"familyname"}),variant:"outlined",margin:"normal",control:i,errors:c,disabled:s,fullWidth:!0}),Object(j.jsx)(Ra,{name:"givenname",defaultValue:null===n||void 0===n?void 0:n.givenname,label:r.formatMessage({id:"givenname"}),variant:"outlined",margin:"normal",control:i,errors:c,disabled:s,fullWidth:!0}),Object(j.jsx)(Ra,{name:"introduction",defaultValue:null===n||void 0===n?void 0:n.introduction,label:r.formatMessage({id:"introduction"}),variant:"outlined",margin:"normal",control:i,errors:c,disabled:s,rows:10,fullWidth:!0,multiline:!0}),Object(j.jsx)(Da,{type:"submit",loading:s,color:"primary",fullWidth:!0,children:"UPDATE"})]})},al=function(){var e,t=nt().onError,n=Object(O.b)(),a=Object(O.c)(k),c=Object(ve.i)(),i=Object(ve.g)(),o=Number(c.params.id),l=Object(Oe.b)(),s=Object(wa.a)(),d=(e={id:o,currentUserId:null===a||void 0===a?void 0:a.id},ya({key:"user",fn:Yn},e)),u=d.isLoading,b=d.data,m=Object(Ua.a)((function(){return e=o,Pa.a.post("".concat(Se.USERS,"/").concat(e).concat(Se.RELATIONSHIPS),void 0,ci());var e}),{onSuccess:function(e){n(P(e.headers)),l.setQueryData(["user",o],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{followed:e.data})}))},onError:t}),h=Object(Ua.a)((function(){var e,t,n;return t=o,n=null===b||void 0===b||null===(e=b.followed)||void 0===e?void 0:e.id,Pa.a.delete("".concat(Se.USERS,"/").concat(t).concat(Se.RELATIONSHIPS,"/").concat(n||"undefined"),ci())}),{onSuccess:function(e){n(P(e.headers)),l.setQueryData(["user",o],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{followed:void 0})}))},onError:t}),f=(null===a||void 0===a?void 0:a.id)===o;return Object(j.jsxs)(dn,{children:[Object(j.jsxs)(ke.a,{container:!0,children:[Object(j.jsx)(ke.a,{item:!0,xs:11,children:Object(j.jsx)(Ce.a,{variant:"h6",children:null===b||void 0===b?void 0:b.nickname})}),Object(j.jsx)(ke.a,{item:!0,xs:1,children:!f&&Object(j.jsx)(Xr,{followed:!!(null===b||void 0===b?void 0:b.followed),onFollow:function(){return m.mutate()},onUnfollow:function(){return h.mutate()},disabled:u})})]}),Object(j.jsxs)(ke.a,{container:!0,spacing:2,children:[Object(j.jsx)(ke.a,{item:!0,children:Object(j.jsxs)(Ie.a,{component:r.b,to:"".concat(Se.USERS,"/").concat(o).concat(Se.FOLLOWERS),children:[null===b||void 0===b?void 0:b.followersCount,Object(j.jsx)(Re.a,{id:"follower"})]})}),Object(j.jsx)(ke.a,{item:!0,children:Object(j.jsxs)(Ie.a,{component:r.b,to:"".concat(Se.USERS,"/").concat(o).concat(Se.FOLLOWING),children:[null===b||void 0===b?void 0:b.followingCount,Object(j.jsx)(Re.a,{id:"following"})]})})]}),null===b||void 0===b?void 0:b.introduction,Object(j.jsxs)(fi.a,{value:i.pathname.includes("issues")?c.url+Se.ISSUES:i.pathname,children:[Object(j.jsx)(hi.a,{label:s.formatMessage({id:"profile"}),value:c.url,component:r.b,to:c.url}),Object(j.jsx)(hi.a,{label:s.formatMessage({id:"musics"}),value:c.url+Se.MUSICS,component:r.b,to:c.url+Se.MUSICS}),Object(j.jsx)(hi.a,{label:s.formatMessage({id:"bookmark"}),value:c.url+Se.BOOKMARKS,component:r.b,to:c.url+Se.BOOKMARKS}),Object(j.jsx)(hi.a,{label:s.formatMessage({id:"setting"}),value:c.url+Se.SETTING,component:r.b,to:c.url+Se.SETTING,disabled:!f})]}),Object(j.jsxs)(ve.c,{children:[Object(j.jsx)(ve.a,{exact:!0,path:c.path,component:el}),Object(j.jsx)(ve.a,{exact:!0,path:c.path+Se.MUSICS,component:Zr}),Object(j.jsx)(ve.a,{exact:!0,path:c.path+Se.SETTING,component:nl}),Object(j.jsx)(ve.a,{exact:!0,path:c.path+Se.BOOKMARKS,component:tl}),Object(j.jsx)(ve.a,{exact:!0,path:c.path+Se.BOOKMARKS,component:tl})]})]})},cl=function(){var e,t,n=un(),a=Object(R.a)(n,2),c=a[0],i=a[1],o=Object(ve.h)(),r=Number(o.id),l=ka({firstKey:"user",secondKey:"follower",fn:Jn},{id:r,page:c});return Object(j.jsxs)(dn,{children:[Object(j.jsx)(Ce.a,{variant:"h5",color:"initial",children:Object(j.jsx)(Re.a,{id:"follower"})}),Object(j.jsx)(Gr,{users:null===(e=l.data)||void 0===e?void 0:e.data,loading:l.isLoading,page:c,pageCount:null===(t=l.data)||void 0===t?void 0:t.pagination.totalPages,onPage:i})]})},il=function(){var e,t,n=un(),a=Object(R.a)(n,2),c=a[0],i=a[1],o=Object(ve.h)(),r=Number(o.id),l=ka({firstKey:"user",secondKey:"following",fn:Xn},{id:r,page:c});return Object(j.jsxs)(dn,{children:[Object(j.jsx)(Ce.a,{variant:"h5",color:"initial",children:Object(j.jsx)(Re.a,{id:"following"})}),Object(j.jsx)(Gr,{users:null===(e=l.data)||void 0===e?void 0:e.data,loading:l.isLoading,page:c,pageCount:null===(t=l.data)||void 0===t?void 0:t.pagination.totalPages,onPage:i})]})},ol=function(){var e=Object(a.useState)(""),t=Object(R.a)(e,2),n=t[0],c=t[1],i=un(),o=Object(R.a)(i,2),r=o[0],l=o[1],s=Object(Ya.useDebounce)(n,1e3),d=Object(R.a)(s,2),u=d[0],b=d[1].isPending,m=Object(O.c)(z),h=ga({page:r,locale:m,q:{title_cont:u}}),f=h.isLoading,p=h.data;return Object(j.jsxs)(dn,{children:[Object(j.jsx)(ec,{onChange:function(e){return c(e.target.value)},loading:f||b()}),Object(j.jsx)(lt,{albums:(null===p||void 0===p?void 0:p.data)||[],loading:f,page:r,pageCount:null===p||void 0===p?void 0:p.pagination.totalPages,onPage:l})]})},rl=Object(nn.a)({media:{height:100,width:100}}),ll=function(e){var t=e.album,n=t.artistName,a=t.collectionName,c=t.artworkUrl100,i=t.artistViewUrl,o=rl();return Object(j.jsx)(ft.a,{children:Object(j.jsxs)(ye.a,{display:"flex",children:[Object(j.jsx)(ye.a,{mx:1,children:Object(j.jsx)(an.a,{image:c,className:o.media})}),Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Ce.a,{children:a}),Object(j.jsx)(Ce.a,{children:n})]}),Object(j.jsx)(gt.a,{href:i,target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()},children:"itunes"})]})})};var sl=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect;return Object(j.jsx)(Cc,{defaultValue:t,title:"Album",open:n,showSearchBar:a,useQueryArgs:{key:[Ic.ITUNES,Ic.ALBUMS],fn:function(e){return function(e,t){return Xe.jsonp("/search",{params:{entity:"album",term:e,limit:400,offset:t}})}(e.term,e.page).then((function(e){return{data:e.results}}))}},onSelect:i,onClose:c,children:function(e,t){return Object(j.jsx)(ye.a,{mb:2,onClick:t,children:Object(j.jsx)(ll,{album:e})},e.collectionId)}})},dl=Fc()({media:{height:100,width:100}}),ul=function(e){var t=e.album,n=dl();return Object(j.jsx)(ft.a,{children:Object(j.jsxs)(ye.a,{display:"flex",children:[Object(j.jsx)(ye.a,{display:"flex",justifyItems:"center",alignItems:"center",mx:1,children:Object(j.jsx)(an.a,{image:t.images[0].url,className:n.media})}),Object(j.jsxs)(xt.a,{children:[Object(j.jsx)(Ce.a,{noWrap:!0,children:t.name}),Object(j.jsx)(Ce.a,{color:"textSecondary",noWrap:!0})]})]})})};var jl=function(e){var t=e.defaultValue,n=e.open,c=e.showSearchBar,i=e.onClose,o=e.onSelect,r=nt().onError,l=Object(O.c)(L),s=Object(O.b)(),d=Object(a.useCallback)(function(){var e=Object(Uc.a)(Ec.a.mark((function e(t){var n,a;return Ec.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("code",t),n.append("grant_type","authorization_code"),n.append("redirect_uri",window.location.origin),e.next=6,Dc.post("/token",n);case 6:a=e.sent,s(N(a.data));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s]);return Object(a.useEffect)((function(){window.getSpotifyCode=d}),[d]),l?Object(j.jsx)(Cc,{defaultValue:t,title:"Spotify",open:n,useQueryArgs:{key:[Ic.SPOTIFY,Ic.ALBUMS],fn:function(e){return _c("album",e.term,e.page,null===l||void 0===l?void 0:l.access_token).then((function(e){return{data:e.albums.items,page:e.albums.offset,pageCount:Math.floor(e.albums.total/e.albums.limit)}}))},options:{onError:function(e){r(e),s(T())}}},showSearchBar:c,onSelect:o,onClose:i,children:function(e,t){return Object(j.jsx)(ye.a,{mb:2,onClick:t,children:Object(j.jsx)(ul,{album:e})},e.id)}}):Object(j.jsxs)(Sc.a,{open:n,onClose:i,fullWidth:!0,children:[Object(j.jsx)(kc.a,{children:"Spotify need SignIn"}),Object(j.jsx)(Lc.a,{children:Object(j.jsx)(Mc.a,{children:Object(j.jsx)(Nc,{})})}),Object(j.jsx)(Ac.a,{children:Object(j.jsx)(gt.a,{onClick:i,color:"default",children:"Cancel"})})]})},bl=function(){var e,t,n,c=Object(a.useState)(""),i=Object(R.a)(c,2),o=i[0],l=i[1],s=jc(),d=Object(R.a)(s,3),u=d[0],b=d[1],m=d[2],h=Object(Ea.d)(),f=h.register,p=h.handleSubmit,x=h.setValue,g=Ei()(o,1e3),v=Object(R.a)(g,2),S=v[0],k=v[1].isPending,C=Object(O.b)(),I=Object(O.c)(y),w=Object(O.c)(z),E=nt().onError,U=Object(ve.i)(),A=Number(U.params.id),L=U.url+Se.ARTISTS,M=Object(Oe.b)(),N=M.getQueryData([Ic.ALBUM,A]),T=Object(Ua.a)((function(e){return Pa.a.post(L,e,I)}),{onSuccess:function(e){C(P(e.headers)),M.setQueryData([Ic.ALBUM,A],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{artists:[].concat(Object(St.a)(t.artists||[]),[e.data.artist])})}))},onError:E}),$=Object(Ua.a)((function(e){return Pa.a.delete("".concat(L,"/").concat(e.id),I)}),{onSuccess:function(e,t){C(P(e.headers)),M.setQueryData([Ic.ALBUM,A],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{artists:e.artists&&e.artists.filter((function(e){return e!==t}))})}))},onError:E}),B=va({page:1,locale:w,q:{name_cont:S},options:{enabled:!!S}});return Object(a.useEffect)((function(){f("artist_id")}),[f]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(gt.a,{onClick:b,children:"Edit"}),Object(j.jsxs)(Sc.a,{onClose:m,open:u,fullWidth:!0,children:[Object(j.jsx)(kc.a,{children:"Edit Albums"}),Object(j.jsxs)(sn.a,{children:[Object(j.jsx)(Ke.a,{component:Fe.a,children:Object(j.jsxs)(qe.a,{children:[Object(j.jsx)(_e.a,{children:Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:"Artist"}),Object(j.jsx)(De.a,{align:"right",children:"Delete"})]})}),Object(j.jsx)(Be.a,{children:null===N||void 0===N||null===(e=N.artists)||void 0===e?void 0:e.map((function(e){return Object(j.jsxs)(We.a,{children:[Object(j.jsx)(De.a,{children:Object(j.jsx)(Ie.a,{component:r.b,to:"/",children:e.name})}),Object(j.jsx)(De.a,{align:"right",children:Object(j.jsx)(jt.a,{onClick:function(){return $.mutate(e)},children:Object(j.jsx)(Bi.a,{})})})]},e.id)}))})]})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Li,{onSelectOption:function(e){return x("artist_id",e.id)},onRemoveOption:function(){return x("artist_id","")},textFieldProps:{label:"Artist",variant:"outlined",margin:"normal"},autocompleteProps:{value:null===(t=B.data)||void 0===t?void 0:t.data,options:(null===(n=B.data)||void 0===n?void 0:n.data)||[],loading:T.isLoading||$.isLoading||k(),multiple:!0,inputValue:o,getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t){return l(t)}}})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Da,{color:"primary",loading:T.isLoading,onClick:p((function(e){return T.mutate(e)})),fullWidth:!0,children:"Add Artist"})})]})]})]})},Ol=function(){var e,t,n,a,c,i,o,r,l,s,d=un(),u=Object(R.a)(d,2),b=u[0],m=u[1],h=nt().onError,f=Object(ve.i)(),p=Number(f.params.id),x=Object(O.b)(),g=Object(O.c)(k),v=Object(O.c)(z),S=Object(Oe.b)(),y=Object(wa.a)(),C=(s={id:p,locale:v,currentUserId:null===g||void 0===g?void 0:g.id},ya({key:"album",fn:ha},s)),I=function(e){return ka({firstKey:"album",secondKey:"musics",fn:fa},e)}({id:p,page:b,locale:v}),w=it({id:null===(e=C.data)||void 0===e?void 0:e.link.itunes}),E=Object(Ua.a)((function(e){var t;return function(e,t,n){return Pa.a.patch("".concat(Se.ALBUMS,"/").concat(e).concat(Se.LINKS,"/").concat(t||"undefined"),n,Object(q.a)({},ci()))}(p,null===(t=C.data)||void 0===t?void 0:t.link.id,e)}),{onSuccess:function(e){x(P(e.headers)),S.setQueryData([Ic.ALBUM,p,v],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{link:e.data})}))},onError:h}),U=Object(Ua.a)((function(){return e=p,Pa.a.post("".concat(Se.ALBUMS,"/").concat(e).concat(Se.BOOKMARKS),void 0,ci());var e}),{onSuccess:function(e){x(P(e.headers)),S.setQueryData([Ic.ALBUM,p,v],(function(t){return t&&Object(q.a)(Object(q.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:h}),A=Object(Ua.a)((function(){var e,t,n,a;return n=p,a=null===(e=C.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,Pa.a.delete("".concat(Se.ALBUMS,"/").concat(n).concat(Se.BOOKMARKS,"/").concat(a||"undefined"),ci())}),{onSuccess:function(e){x(P(e.headers)),S.setQueryData([Ic.ALBUM,p,v],(function(e){return e&&Object(q.a)(Object(q.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:h}),L=function(e){return E.mutate({itunes:e.collectionId})},M=function(e){return E.mutate({spotify:e.id})};return Object(j.jsxs)(dn,{children:[(null===(t=C.data)||void 0===t?void 0:t.localed)&&Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsxs)(nc.a,{severity:"warning",children:[Object(j.jsx)(ac.a,{children:Object(j.jsx)(Re.a,{id:"untranslation"})}),Object(j.jsx)("strong",{children:Object(j.jsx)(Re.a,{id:"pleaseTranslate"})})]})}),Object(j.jsxs)(ke.a,{container:!0,children:[Object(j.jsx)(ke.a,{item:!0,xs:11,children:Object(j.jsxs)(Ce.a,{variant:"h5",children:[Object(j.jsx)(we.a,{}),null===(n=C.data)||void 0===n?void 0:n.title]})}),Object(j.jsx)(ke.a,{item:!0,xs:1,children:Object(j.jsx)(gc,{count:null===(a=C.data)||void 0===a?void 0:a.bookmarksCount,bookmarked:!!(null===(c=C.data)||void 0===c?void 0:c.bookmark),onCreate:function(){return U.mutate()},onDestroy:function(){return A.mutate()}})}),Object(j.jsx)(ke.a,{item:!0,xs:1,children:Object(j.jsx)(ti,{queryKey:Ic.ARTIST,name:"title",inputLabel:y.formatMessage({id:"title"}),buttonLabel:y.formatMessage({id:"translateTitle"}),patchFn:oi})})]}),Object(j.jsx)(ye.a,{height:"100px",width:"100px",m:"auto",children:w.data&&w.data[0]&&Object(j.jsx)($e.a,{src:w.data[0].artworkUrl100})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(Oc,{itunes:{link:w.data&&w.data[0]?w.data[0].collectionViewUrl:"",renderDialog:function(e,t){return Object(j.jsx)(sl,{open:e,onClose:t,onSelect:L,showSearchBar:!0})}},spotify:{type:"album",link:null===(i=C.data)||void 0===i?void 0:i.link.spotify,renderDialog:function(e,t){var n;return Object(j.jsx)(jl,{defaultValue:null===(n=C.data)||void 0===n?void 0:n.title,open:e,onClose:t,onSelect:M,showSearchBar:!0})}}})}),Object(j.jsx)(ye.a,{mb:3,children:Object(j.jsx)(rt,{musics:(null===(o=I.data)||void 0===o?void 0:o.data)||[],loading:I.isLoading,page:b,pageCount:null===(r=I.data)||void 0===r?void 0:r.pagination.totalPages,onPage:m})}),Object(j.jsx)(bl,{}),Object(j.jsx)(mt,{artists:null===(l=C.data)||void 0===l?void 0:l.artists,loading:C.isLoading})]})},ml=function(){var e,t,n,c=un(),i=Object(R.a)(c,2),o=i[0],r=i[1],l=jc(),s=Object(R.a)(l,3),d=s[0],u=s[1],b=s[2],m=Object(a.useState)(),h=Object(R.a)(m,2),f=h[0],p=h[1],x=Object(Ea.d)(),g=x.errors,v=x.control,S=x.setValue,k=x.register,y=x.watch,C=x.handleSubmit,I=y().title,w=Object(ui.a)(I,1e3),E=Object(R.a)(w,1)[0],U=Object(O.b)(),A=Object(O.c)(z),L=Object(ve.f)(),M=nt().onError,N=Object(Oe.b)(),T=Object(wa.a)(),$=Object(Ua.a)((function(e){return t=e,Pa.a.post(Se.ALBUMS,{album:t,locale:ai()},ci());var t}),{onSuccess:function(e){U(P(e.headers)),L.push("".concat(Se.ALBUMS,"/").concat(e.data.id)),N.setQueryData(["album",e.data.id],e.data),f&&N.setQueryData(["itunes","music",f.collectionId],f)},onError:M}),q=ga({page:o,locale:A,q:{title_cont:E},options:{enabled:!!E,onError:M}});return Object(a.useEffect)((function(){k("link_attributes.itunes")}),[k]),Object(j.jsx)(dn,{children:Object(j.jsx)(Fe.a,{children:Object(j.jsxs)(ye.a,{p:2,children:[Object(j.jsx)(ye.a,{height:"100px",width:"100px",m:"auto",children:Object(j.jsx)($e.a,{src:(null===f||void 0===f?void 0:f.artworkUrl100)||"undefiend"})}),Object(j.jsx)(Ra,{name:"title",defaultValue:"",autoComplete:"on",label:T.formatMessage({id:"title"}),variant:"outlined",control:v,errors:g,disabled:$.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(j.jsx)(Xa,{color:"inherit",size:20,loading:q.isLoading})}}),Object(j.jsx)(ji,{onClick:u,disabled:!I,fullWidth:!0,disableElevation:!0}),Object(j.jsx)(sl,{defaultValue:I,open:d,onClose:b,onSelect:function(e){p(e);var t=e.collectionName,n=e.collectionId;S("title",t),S("link_attributes.itunes",n)}}),Object(j.jsx)(bi,{data:null===(e=q.data)||void 0===e?void 0:e.data,children:Object(j.jsx)(lt,{albums:(null===(t=q.data)||void 0===t?void 0:t.data)||[],page:o,pageCount:null===(n=q.data)||void 0===n?void 0:n.pagination.totalPages,onPage:r,loading:q.isLoading})}),Object(j.jsx)(Da,{color:"primary",loading:$.isLoading,disabled:!I,onClick:C((function(e){return $.mutate(e)})),fullWidth:!0,children:Object(j.jsx)(Re.a,{id:"createAlbum"})})]})})})},hl=function(){var e=Object(a.useState)(!1),t=Object(R.a)(e,2),n=t[0],c=t[1],i=nt().onError,o=Object(Ea.d)({resolver:Object(Aa.a)(zi)}),l=o.errors,s=o.control,d=o.handleSubmit,u=Object(Ua.a)((function(e){return function(e){return Pa.a.post(Se.CONTACTS,e)}(e)}),{onSuccess:function(){c(!0)},onError:i});return n?Object(j.jsxs)(dn,{children:[Object(j.jsx)(Ce.a,{children:"Successed"}),Object(j.jsx)(Ie.a,{component:r.b,to:"/",children:"return Home"})]}):Object(j.jsx)(dn,{children:Object(j.jsxs)("form",{onSubmit:d((function(e){return u.mutate(e)})),children:[Object(j.jsx)(Ce.a,{children:"Contact"}),Object(j.jsx)(Ra,{name:"email",label:"Email",defaultValue:"",variant:"outlined",margin:"normal",control:s,errors:l,fullWidth:!0}),Object(j.jsx)(Ra,{name:"description",label:"Description",defaultValue:"",variant:"outlined",margin:"normal",control:s,errors:l,rows:20,multiline:!0,fullWidth:!0}),Object(j.jsx)(Da,{type:"submit",color:"primary",loading:u.isLoading,fullWidth:!0,children:"Submit"})]})})},fl=function(){return Object(j.jsxs)(ve.c,{children:[Object(j.jsx)(ve.a,{exact:!0,path:Se.MUSICS,component:mi}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(Se.MUSICS).concat(Se.NEW),component:nr}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(Se.USERS,"/:userId").concat(Se.MUSICS,"/:id").concat(Se.TAB),component:Fr}),Object(j.jsx)(ve.a,{strict:!0,path:"".concat(Se.USERS,"/:userId").concat(Se.MUSICS,"/:id"),component:tr}),Object(j.jsx)(ve.a,{exact:!0,path:Se.USERS,component:Hr}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(Se.USERS,"/:id").concat(Se.FOLLOWERS),component:cl}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(Se.USERS,"/:id").concat(Se.FOLLOWING),component:il}),Object(j.jsx)(ve.a,{strict:!0,path:"".concat(Se.USERS,"/:id"),component:al}),Object(j.jsx)(ve.a,{exact:!0,path:Se.BANDS,component:Kr}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(Se.BANDS).concat(Se.NEW),component:Yr}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(Se.BANDS,"/:id"),component:zr}),Object(j.jsx)(ve.a,{exact:!0,path:Se.ARTISTS,component:tc}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(Se.ARTISTS).concat(Se.NEW),component:Oi}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(Se.ARTISTS,"/:id"),component:di}),Object(j.jsx)(ve.a,{exact:!0,path:Se.ALBUMS,component:ol}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(Se.ALBUMS).concat(Se.NEW),component:ml}),Object(j.jsx)(ve.a,{exact:!0,path:"".concat(Se.ALBUMS,"/:id"),component:Ol}),Object(j.jsx)(ve.a,{exact:!0,path:Se.SIGNIN,component:Ka}),Object(j.jsx)(ve.a,{exact:!0,path:Se.SIGNUP,component:za}),Object(j.jsx)(ve.a,{exact:!0,path:Se.CONTACTS,component:hl}),Object(j.jsx)(ve.a,{exact:!0,path:Se.ROOT,component:Ca})]})},pl=n(147),xl=n.n(pl),gl=n(1326),vl=n(1307),Sl=n(442),kl=n.n(Sl),yl=n(441),Cl=n.n(yl),Il=n(443),Pl=n.n(Il),wl=function(e){var t=e.open,n=e.handleClose,a=Object(O.b)(),c=Object(O.c)(z),i=Object(O.c)(Y);return Object(j.jsxs)(Sc.a,{onClose:n,open:t,fullWidth:!0,children:[Object(j.jsx)(kc.a,{children:Object(j.jsx)(Re.a,{id:"setting"})}),Object(j.jsxs)(Di.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:c,onChange:function(e){a(J(e.target.value))},children:[Object(j.jsx)(Ri.a,{value:"ja",children:"Japanese"}),Object(j.jsx)(Ri.a,{value:"en",children:"English"})]}),Object(j.jsxs)(Di.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:i,onChange:function(e){a(X(e.target.value))},children:[Object(j.jsx)(Ri.a,{value:"JP",children:"JP"}),Object(j.jsx)(Ri.a,{value:"US",children:"US"})]})]})},El=n(1311),Ul=n(1316),Al=n(1306),Ll=n(1333),Ml=n(440),Nl=n.n(Ml),Tl={ja:Ul.a},$l=function(e){var t=e.notifications,n=e.loading,a=nt().onError,c=Object(O.b)(),i=Object(O.c)(k),o=Object(O.c)(z),l=Object(Oe.b)(),s=Object(wa.a)(),d=Object(Ua.a)((function(e){return function(e,t){return Pa.a.patch("".concat(Se.USERS,"/").concat(t||"undefined","/notifications/").concat(e),void 0,ci())}(e,null===i||void 0===i?void 0:i.id)}),{onError:a,onSuccess:function(e,t){c(P(e.headers)),l.setQueryData([Ic.NOTIFICATIONS,1],(function(e){return e?(e.data[e.data.findIndex((function(e){return e.id===t}))].readAt=(new Date).toLocaleDateString(),e.notificationExist=e.data.some((function(e){return!e.readAt})),e):e}))}}).mutate;return Object(j.jsxs)(ye.a,{p:1,children:[n&&Object(j.jsx)(Ve.a,{}),!(null===t||void 0===t?void 0:t.length)&&Object(j.jsx)(Ce.a,{variant:"h6",children:Object(j.jsx)(Re.a,{id:"noNotification"})}),null===t||void 0===t?void 0:t.map((function(e){var t=function(){return d(e.id)};return"UserRelationshipNotification"===e.type?Object(j.jsxs)(Nr.a,{component:r.b,to:"".concat(Se.USERS,"/").concat(e.params.userRelationship.follower.id),selected:!!e.readAt,onClick:t,button:!0,children:[Object(j.jsx)(Al.a,{children:Object(j.jsx)(Ll.a,{children:Object(j.jsx)(Nl.a,{})})}),Object(j.jsx)($r.a,{primary:s.formatMessage({id:"beFollowed"},{username:e.params.userRelationship.follower.nickname}),secondary:Object(El.a)(new Date(e.createdAt),{locale:Tl[o]})})]},e.id):"MusicBookmarkNotification"===e.type?Object(j.jsxs)(Nr.a,{component:r.b,to:"".concat(Se.USERS,"/").concat(e.params.musicBookmark.user.id),selected:!!e.readAt,onClick:t,button:!0,children:[Object(j.jsx)(Al.a,{children:Object(j.jsx)(Ll.a,{children:Object(j.jsx)(pc.a,{})})}),Object(j.jsx)($r.a,{primary:s.formatMessage({id:"beBookmarked"},{username:e.params.musicBookmark.user.nickname,music:e.params.musicBookmark.music.title}),secondary:Object(El.a)(new Date(e.createdAt),{locale:Tl[o]})})]},e.id):Object(j.jsx)(j.Fragment,{})}))]})},Rl=function(){var e,t=jc(),n=Object(R.a)(t,3),a=n[0],c=n[1],i=n[2],o=Object(fe.b)().enqueueSnackbar,l=Object(O.b)(),s=Object(O.c)(k),d=Object(O.c)(y),u=Object(O.c)(z),b=Object(ve.f)(),m=Object(wa.a)(),h=(e={id:null===s||void 0===s?void 0:s.id,page:1,locale:u,options:{enabled:!!s}},ka({firstKey:"user",secondKey:"notifications",fn:Hn},e)),f=Object(Ua.a)((function(){return Pa.a.delete("/auth/sign_out",d)}),{onMutate:function(){l(w()),b.push({pathname:Se.SIGNIN})},onSuccess:function(){o(m.formatMessage({id:"signoutSuccessful"}),{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"center"}})},onError:function(e){o(String(e),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})}}),p=function(){return f.mutate()};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(wo.a,{position:"fixed",color:"default",children:Object(j.jsxs)(Co.a,{children:[Object(j.jsx)(Ce.a,{variant:"h6",children:Object(j.jsx)(Ie.a,{underline:"none",color:"inherit",component:r.b,to:"/",children:"Stave"})}),Object(j.jsxs)(ye.a,{ml:"auto",children:[(null===s||void 0===s?void 0:s.id)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(xl.a,{variant:"popover",popupId:"demo-popup-popover",children:function(e){var t,n;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(jt.a,Object(q.a)(Object(q.a)({},Object(pl.bindTrigger)(e)),{},{children:Object(j.jsx)(vl.a,{color:"secondary",variant:"dot",invisible:!(null===(t=h.data)||void 0===t?void 0:t.notificationExist),children:Object(j.jsx)(Cl.a,{})})})),Object(j.jsx)(gl.a,Object(q.a)(Object(q.a)({},Object(pl.bindPopover)(e)),{},{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(j.jsx)($l,{notifications:null===(n=h.data)||void 0===n?void 0:n.data,loading:h.isLoading})}))]})}}),Object(j.jsx)(xl.a,{variant:"popover",popupId:"demo-popup-popover",children:function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(jt.a,Object(q.a)(Object(q.a)({},Object(pl.bindTrigger)(e)),{},{children:Object(j.jsx)(kl.a,{})})),Object(j.jsxs)(gl.a,Object(q.a)(Object(q.a)({},Object(pl.bindPopover)(e)),{},{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(j.jsx)(Ri.a,{component:r.b,to:"".concat(Se.USERS,"/").concat(s.id),children:Object(j.jsx)(Re.a,{id:"account"})}),Object(j.jsx)(Ri.a,{disabled:f.isLoading,onClick:p,children:Object(j.jsx)(Re.a,{id:"signout"})})]}))]})}})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(gt.a,{color:"inherit",variant:"contained",component:r.b,to:Se.SIGNIN,children:Object(j.jsx)(Re.a,{id:"signin"})}),Object(j.jsx)(gt.a,{color:"inherit",variant:"contained",component:r.b,to:Se.SIGNUP,children:Object(j.jsx)(Re.a,{id:"signup"})})]}),Object(j.jsx)(jt.a,{onClick:c,children:Object(j.jsx)(Pl.a,{})})]})]})}),Object(j.jsx)(Co.a,{}),Object(j.jsx)(wl,{open:a,handleClose:i})]})},ql=function(){return Object(j.jsx)(dn,{children:Object(j.jsx)(Ie.a,{component:r.b,to:Se.CONTACTS,children:Object(j.jsx)(Re.a,{id:"contact"})})})},Bl=n(1309),Dl=n(1308),_l=n(160),Wl=function(){var e=Object(O.b)(),t=Object(O.c)(te),n=Object(a.useState)("up"),c=Object(R.a)(n,2),i=c[0],o=c[1],r=function(){return e(ae())};return Object(j.jsx)(Sc.a,{fullWidth:!0,open:t,onClose:r,children:Object(j.jsx)(_l.a,{value:i,children:Object(j.jsxs)(Fe.a,{square:!0,children:[Object(j.jsxs)(Dl.a,{value:i,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){return o(t)},"aria-label":"disabled tabs example",variant:"fullWidth",children:[Object(j.jsx)(hi.a,{label:"SignIn",value:"in"}),Object(j.jsx)(hi.a,{label:"SignUp",value:"up"})]}),Object(j.jsx)(Bl.a,{value:"in",children:Object(j.jsx)(Fa,{onSuccess:r})}),Object(j.jsx)(Bl.a,{value:"up",children:Object(j.jsx)(Qa,{onSuccess:r})})]})})})},Vl=function(){return Object(j.jsx)(je,{children:Object(j.jsx)(pe,{children:Object(j.jsx)(b,{children:Object(j.jsx)(he,{children:Object(j.jsxs)(ge,{children:[Object(j.jsx)(l.ReactQueryDevtools,{initialIsOpen:!0}),Object(j.jsxs)(r.a,{children:[Object(j.jsx)(Rl,{}),Object(j.jsx)(fl,{}),Object(j.jsx)(ql,{}),Object(j.jsx)(Wl,{})]})]})})})})})},Fl=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1336)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))};n(1224);o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(Vl,{})}),document.getElementById("root")),Fl()},14:function(e){e.exports=JSON.parse('{"ALBUMS":"albums","ALBUM":"album","ARTISTS":"artists","ARTIST":"artist","BANDS":"bands","BAND":"band","MUSICS":"musics","MUSIC":"music","SCORE":"score","REPOSITORY":"repository","BLOB":"blob","USERS":"users","USER":"user","PROFILE":"profile","NOTIFICATIONS":"notifications","FOLLOWERS":"followers","FOLLOWING":"following","ISSUES":"issues","ISSUE":"issue","BOOKMARKS":"bookmarks","ITUNES":"itunes","WIKIPEDIA":"wikipedia","MUSIXMATCH":"musixmatch","SPOTIFY":"spotify"}')},4:function(e){e.exports=JSON.parse('{"ROOT":"/","SIGNUP":"/signup","SIGNIN":"/signin","NOTIFICATIONS":"/notifications","ALBUMS":"/albums","ARTISTS":"/artists","COMPOSERS":"/composers","LYRISTS":"/lyrists","MUSICS":"/musics","ISSUES":"/issues","INFO":"/info","SETTING":"/setting","BANDS":"/bands","USERS":"/users","LINKS":"/links","BOOKMARKS":"/bookmarks","RELATIONSHIPS":"/relationships","FOLLOWERS":"/followers","FOLLOWING":"/following","ARTIST_MUSICS":"/artist_musics","ALBUM_MUSICS":"/album_musics","ARTIST_BANDS":"/artist_bands","ARTIST_ALBUMS":"/artist_albums","BAND_ALBUMS":"/band_albums","TAB":"/tab","NEW":"/new","FILES":"/files","FILE":"/file","TREE":"/tree","BLOB":"/blob","LYRIC":"/lyric","CONTACTS":"/contacts"}')},419:function(e,t,n){e.exports={iframe:"Info_iframe__3V9Dg"}},426:function(e,t,n){e.exports={lyric:"Lyric_lyric__2iWqX"}},439:function(e,t,n){e.exports={atSidebar:"Score_atSidebar__zvymR"}}},[[1225,1,2]]]);
//# sourceMappingURL=main.23074e0d.chunk.js.map