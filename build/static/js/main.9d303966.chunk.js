(this.webpackJsonpstave_front=this.webpackJsonpstave_front||[]).push([[0],{1185:function(e,t,n){},1186:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(28),i=n.n(r),o=n(79),s=n(13),l=n(1271),d=n(198),u=n(376),j=n(12),b=n(378),O=n(1255),m=n(97),h=n(98),f=n(379),x=n.n(f),p=n(55),v={currentUser:void 0,headers:void 0},g=Object(m.b)({name:"currentUser",initialState:v,reducers:{setCurrentUser:function(e,t){e.currentUser=t.payload},setHeaders:function(e,t){var n,a=t.payload,c=a["content-type"],r=a["access-token"],i=a.client,o=a.uid,s=(null===(n=e.headers)||void 0===n?void 0:n.headers["access-token"])||"";e.headers={headers:{"content-type":c,"access-token":r||s,client:i,uid:o}}},remove:function(e){e.currentUser=void 0,e.headers=void 0}}}),S=function(e){return e.currentUser.currentUser},k=function(e){return e.currentUser.headers},C=g.actions,I=C.setCurrentUser,y=C.setHeaders,E=C.remove,P=g.reducer,U={code:void 0,token:void 0},A=Object(m.b)({name:"spotify",initialState:U,reducers:{setCode:function(e,t){e.code=t.payload},setToken:function(e,t){e.token=t.payload},remove:function(e){e.code="",e.token=void 0}}}),w=function(e){return e.spotify.token},L=A.actions,N=(L.setCode,L.setToken),M=L.remove,T=A.reducer,R=Object(m.b)({name:"spotify",initialState:{opened:!1},reducers:{close:function(e){e.opened=!1},open:function(e){e.opened=!0}}}),B=function(e){return e.authModal.opened},q=R.actions,D=q.close,_=q.open,$=R.reducer,V=Object(p.b)({currentUser:P,spotify:T,authModal:$}),W={key:"root",version:1,storage:x.a},F=Object(h.g)(W,V),K=Object(m.c)({serializableCheck:{ignoredActions:[h.a,h.f,h.b,h.c,h.d,h.e]}}),Q=Object(m.a)({reducer:F,middleware:K}),z=Object(h.h)(Q),Y=n(42),G=n(5),H=n(8),J=n(1274),X=n(1244),Z=n(1280),ee=n(117),te=n(1231),ne=n(1236),ae=n(1234),ce=n(1232),re=n(1233),ie=n(1235),oe=n(74),se=n.n(oe),le=n(1230),de=n(415),ue=n(1229),je=n(1269),be=n(2),Oe=function(e){var t=e.page,n=e.pageCount,a=e.onPage,c=e.loading,r=e.children;return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)(ue.a,{component:de.a,children:[r,c&&Object(be.jsx)(le.a,{})]}),t&&Object(be.jsx)(je.a,{count:n,page:t,onChange:a})]})};Oe.defaultProps={page:void 0,pageCount:void 0,onPage:void 0,loading:!1};var me=Oe,he=n(4),fe=function(){var e=Object(j.b)(),t=Object(o.b)().enqueueSnackbar;return{onError:function(n){var a;401===(null===(a=n.response)||void 0===a?void 0:a.status)&&(e(E()),e(_())),t(String(n),{variant:"error"})}}},xe=n(140),pe=n.n(xe),ve=pe.a.create({baseURL:"https://itunes.apple.com"}),ge=function(e){return ve.jsonp("/lookup",{params:{id:e,entity:"musicArtist"}})},Se=function(e){return ve.jsonp("/lookup",{params:{id:e,entity:"album"}})},ke=function(e){return ve.jsonp("/lookup",{params:{id:e,entity:"song"}})},Ce=function(e){var t=e.musics,n=e.page,a=e.pageCount,c=e.onPage,r=e.loading,i=t.map((function(e){return e.link.itunes||0})).join(","),o=[{route:G.MUSICS,name:"Musics"},{route:G.BANDS,name:"Bands"},{route:G.ARTISTS,name:"Composers"},{route:G.ARTISTS,name:"Lyrists"},{route:G.USERS,name:"Users"}],l=0,d="",u=fe().onError,j=Object(J.a)([he.ITUNES,he.MUSICS,i],(function(){return ke(i).then((function(e){return e.results}))}),{enabled:!!i,onError:u});return Object(be.jsx)(me,{page:n,pageCount:a,onPage:c,loading:r,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{}),o.map((function(e){return Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:e.route,children:e.name})},e.name)}))]})}),Object(be.jsx)(ne.a,{children:null===t||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.title,a=e.band,c=e.user,r=e.composers,i=e.lyrists;return e.link.itunes&&j.data?(d=j.data[l].artworkUrl60,l+=1):d=void 0,Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:d&&Object(be.jsx)(se.a,{loading:j.isLoading,src:d})}),Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.USERS,"/").concat(c.id).concat(G.MUSICS,"/").concat(t),children:n})}),Object(be.jsx)(ae.a,{children:a&&Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.BANDS,"/").concat(a.id),children:null===a||void 0===a?void 0:a.name})}),Object(be.jsx)(ae.a,{children:null===r||void 0===r?void 0:r.map((function(e){return Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))}),Object(be.jsx)(ae.a,{children:null===i||void 0===i?void 0:i.map((function(e){return Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))}),Object(be.jsx)(ae.a,{children:c&&Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.USERS,"/").concat(c.id),children:c.nickname})})]},t)}))})]})})},Ie=function(e){var t=e.albums,n=e.loading,a=e.page,c=e.pageCount,r=e.onPage,i=fe().onError,o=t.map((function(e){return e.link.itunes})).join(","),l=0,d="",u=Object(J.a)([he.ITUNES,he.ALBUMS,o],(function(){return Se(o).then((function(e){return e.results}))}),{onError:i});return Object(be.jsx)(me,{page:a,pageCount:c,onPage:r,loading:n,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{}),Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:G.ALBUMS,children:"Albums"})})]})}),Object(be.jsx)(ne.a,{children:null===t||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.title;return e.link.itunes&&u.data?(d=u.data[l].artworkUrl60,l+=1):d=void 0,Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:d&&Object(be.jsx)(se.a,{src:d})}),Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.ALBUMS,"/").concat(t),children:n})})]},t)}))})]})})},ye=n(414),Ee=n(112),Pe=function(){return Object(be.jsx)(ye.a,{children:Object(be.jsx)(Ee.c,{})})},Ue=n(1237),Ae=function(e){var t=e.href,n=e.windowFeatures,a=e.children,c=e.onWindow;return Object(be.jsx)(Ue.a,{component:ie.a,rel:"noopener noreferrer",disabled:!t,onClick:function(){var e=window.open(t,void 0,n);c&&c(e)},children:a})};Ae.defaultProps={href:void 0,windowFeatures:void 0,onWindow:void 0};var we=Ae,Le=function(e){var t=e.artists,n=e.page,a=e.pageCount,c=e.onPage,r=e.loading;return Object(be.jsx)(me,{page:n,pageCount:a,onPage:c,loading:r,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:G.ARTISTS,children:"Artists"})}),Object(be.jsx)(ae.a,{})]})}),Object(be.jsx)(ne.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.id),children:e.name})}),Object(be.jsx)(ae.a,{children:Object(be.jsx)(we,{href:e.link.twitter?"https://twitter.com/".concat(e.link.twitter):void 0,children:Object(be.jsx)(Pe,{})})})]},e.id)}))})]})})},Ne=function(e){var t=e.bands,n=e.page,a=e.pageCount,c=e.onPage,r=e.loading;return Object(be.jsx)(me,{page:n,pageCount:a,onPage:c,loading:r,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsx)(re.a,{children:Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.BANDS),children:"Band"})})})}),Object(be.jsx)(ne.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(be.jsx)(re.a,{children:Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.BANDS,"/").concat(e.id),children:e.name})})},e.id)}))})]})})},Me=n(1238),Te=n(1241),Re=n(1239),Be=n(1242),qe=n(200),De=n.n(qe),_e=n(201),$e=n.n(_e),Ve=n(202),We=n.n(Ve),Fe=n(203),Ke=n.n(Fe),Qe=function(e){var t=e.type,n=null,a="",c="large";switch(t){case"Album":n=Object(be.jsx)(De.a,{fontSize:c}),a=G.ALBUMS;break;case"Artist":n=Object(be.jsx)($e.a,{fontSize:c}),a=G.ARTISTS;break;case"Music":n=Object(be.jsx)(We.a,{fontSize:c}),a=G.MUSICS;break;case"Band":n=Object(be.jsx)(Ke.a,{fontSize:c}),a=G.BANDS;break;default:return null}return Object(be.jsxs)(Me.a,{variant:"outlined",children:[Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(Z.a,{textAlign:"center",children:n}),Object(be.jsx)(ee.a,{variant:"h5",component:"h2",children:t}),Object(be.jsxs)(ee.a,{color:"textSecondary",children:["create ",t]}),Object(be.jsxs)(ee.a,{variant:"body2",component:"p",children:["create ",t]})]}),Object(be.jsx)(Te.a,{children:Object(be.jsx)(Be.a,{size:"small",component:s.b,to:"".concat(a).concat(G.NEW),children:"Create"})})]})},ze=n(26),Ye=n(380),Ge=n.n(Ye);n(483),n(484);var He,Je,Xe,Ze,et,tt,nt,at,ct,rt,it,ot,st,lt,dt,ut,jt,bt,Ot,mt,ht,ft,xt,pt,vt,gt,St,kt,Ct,It,yt=function(e){var t,n,a=e.cards,c=e.children;return Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Ge.a,{speed:500,children:(t=a||[],n=2,t.reduce((function(e,a,c){return c%n?e:[].concat(Object(ze.a)(e),[t.slice(c,c+n)])}),[])).map((function(e){var t=Object(H.a)(e,2),n=t[0],a=t[1];return Object(be.jsx)(Z.a,{py:3,children:c(n,a)},n.id)}))})})},Et=n(1228),Pt=n(1243),Ut=Object(Et.a)({media:{height:100,width:100}}),At=function(e){var t,n,a,c=e.music,r=e.onClick,i=Ut(),o=Object(J.a)([he.ITUNES,he.MUSIC,c.link.itunes],(function(){return ke(c.link.itunes).then((function(e){return e.results[0]}))})).data;return Object(be.jsx)(Me.a,{onClick:r,children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{display:"flex",justifyItems:"center",alignItems:"center",p:1,children:(null===o||void 0===o?void 0:o.artworkUrl100)&&Object(be.jsx)(Pt.a,{image:null===o||void 0===o?void 0:o.artworkUrl60,className:i.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{variant:"h6",noWrap:!0,children:c.title}),(null===(t=c.band)||void 0===t?void 0:t.name)&&Object(be.jsxs)(ee.a,{color:"textSecondary",noWrap:!0,children:["Band: ",null===(n=c.band)||void 0===n?void 0:n.name]}),(null===(a=c.composers)||void 0===a?void 0:a.length)?Object(be.jsxs)(ee.a,{color:"textSecondary",noWrap:!0,children:["Composer:"," ",c.composers.map((function(e){return Object(be.jsx)("span",{children:e.name},e.id)}))]}):null]})]})})},wt=function(e,t){return"".concat(G.USERS,"/").concat(e||"undefined").concat(G.MUSICS,"/").concat(t)},Lt=function(e){var t=e.data,n=Object(Y.f)();return Object(be.jsx)(yt,{cards:t,children:function(e,t){return Object(be.jsxs)(X.a,{container:!0,spacing:2,children:[Object(be.jsx)(X.a,{item:!0,xs:6,children:Object(be.jsx)(At,{onClick:function(){var t;return n.push(wt(null===(t=e.user)||void 0===t?void 0:t.id,e.id))},music:e})}),Object(be.jsx)(X.a,{item:!0,xs:6,children:Object(be.jsx)(At,{onClick:function(){var e;return n.push(wt(null===(e=t.user)||void 0===e?void 0:e.id,t.id))},music:t})})]})}})},Nt=n(1245),Mt=function(e){var t=e.children;return Object(be.jsx)(Nt.a,{children:Object(be.jsx)(Z.a,{my:5,children:t})})},Tt=function(){var e=Object(a.useState)(1),t=Object(H.a)(e,2),n=t[0],c=t[1];return[n,Object(a.useCallback)((function(e,t){return c(t)}),[])]},Rt=n(17),Bt=n(18),qt=Object(Rt.gql)(He||(He=Object(Bt.a)(["\n  query getAlbum($id: Int!, $currentUserId: Int) {\n    album(id: $id) {\n      id\n      title\n      link {\n        id\n        itunes\n      }\n      artists {\n        id\n        name\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),Dt=Object(Rt.gql)(Je||(Je=Object(Bt.a)(["\n  query getAlbumMusics($id: Int!, $musicPage: Int!) {\n    album(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title\n          link {\n            itunes\n            spotify\n          }\n          band {\n            name\n          }\n          composers {\n            id\n            name\n          }\n          lyrists {\n            id\n            name\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),_t=Object(Rt.gql)(Xe||(Xe=Object(Bt.a)(["\n  query getAlbums($page: Int!, $q: JSON) {\n    albums(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        title\n        link {\n          itunes\n        }\n      }\n    }\n  }\n"]))),$t=Object(Rt.gql)(Ze||(Ze=Object(Bt.a)(["\n  query getArtist($id: Int!, $currentUserId: Int) {\n    artist(id: $id) {\n      id\n      name\n      link {\n        id\n        itunes\n        twitter\n        wikipedia\n        spotify\n      }\n      bands {\n        id\n        name\n        link {\n          itunes\n        }\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),Vt=Object(Rt.gql)(et||(et=Object(Bt.a)(["\n  query getArtist($id: Int!, $albumPage: Int!) {\n    artist(id: $id) {\n      albums(albumPage: $albumPage) {\n        data {\n          id\n          title\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Wt=Object(Rt.gql)(tt||(tt=Object(Bt.a)(["\n  query getMusics($id: Int!, $musicPage: Int!) {\n    artist(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title\n          link {\n            itunes\n          }\n          band {\n            name\n          }\n          composers {\n            id\n            name\n          }\n          lyrists {\n            id\n            name\n          }\n          user {\n            id\n            nickname\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Ft=Object(Rt.gql)(nt||(nt=Object(Bt.a)(["\n  query getArtists($page: Int!, $q: JSON) {\n    artists(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        name\n        link {\n          twitter\n        }\n      }\n    }\n  }\n"]))),Kt=Object(Rt.gql)(at||(at=Object(Bt.a)(["\n  query getBand($id: Int!, $currentUserId: Int) {\n    band(id: $id) {\n      id\n      name\n      link {\n        id\n        itunes\n        twitter\n        wikipedia\n        spotify\n      }\n      artists {\n        id\n        name\n        link {\n          id\n          twitter\n        }\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),Qt=Object(Rt.gql)(ct||(ct=Object(Bt.a)(["\n  query getBandAlbums($id: Int!, $albumPage: Int!) {\n    band(id: $id) {\n      albums(albumPage: $albumPage) {\n        data {\n          id\n          title\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),zt=Object(Rt.gql)(rt||(rt=Object(Bt.a)(["\n  query getBandMusics($id: Int!, $musicPage: Int!) {\n    band(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title\n          composers {\n            id\n            name\n          }\n          lyrists {\n            id\n            name\n          }\n          user {\n            id\n            nickname\n          }\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Yt=Object(Rt.gql)(it||(it=Object(Bt.a)(["\n  query getIssue($id: Int!) {\n    issue(id: $id) {\n      id\n      title\n      description\n    }\n  }\n"]))),Gt=Object(Rt.gql)(ot||(ot=Object(Bt.a)(["\n  query getBands($page: Int!, $q: JSON) {\n    bands(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        name\n      }\n    }\n  }\n"]))),Ht=Object(Rt.gql)(st||(st=Object(Bt.a)(["\n  query getIssues($musicId: Int!, $page: Int!) {\n    issues(musicId: $musicId, page: $page) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        title\n        description\n      }\n    }\n  }\n"]))),Jt=Object(Rt.gql)(lt||(lt=Object(Bt.a)(["\n  query getMusic($id: Int!, $currentUserId: Int) {\n    music(id: $id) {\n      id\n      title\n      scoreExist\n      link {\n        id\n        itunes\n        musixmatch\n        spotify\n      }\n      user {\n        id\n        nickname\n      }\n      band {\n        id\n        name\n      }\n      artistMusics {\n        id\n        role\n        artist {\n          id\n          name\n        }\n      }\n      composers {\n        id\n        name\n      }\n      lyrists {\n        id\n        name\n      }\n      albums {\n        id\n        title\n        link {\n          itunes\n        }\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),Xt=Object(Rt.gql)(dt||(dt=Object(Bt.a)(["\n  query getRootTree($id: Int!) {\n    music(id: $id) {\n      rootTree {\n        oid\n        type\n        name\n        filemode\n      }\n    }\n  }\n"]))),Zt=Object(Rt.gql)(ut||(ut=Object(Bt.a)(["\n  query getMusic($id: Int!) {\n    music(id: $id) {\n      id\n      title\n      score\n    }\n  }\n"]))),en=Object(Rt.gql)(jt||(jt=Object(Bt.a)(["\n  query getMusics($page: Int!, $q: JSON) {\n    musics(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        title\n        link {\n          itunes\n        }\n        user {\n          id\n          nickname\n        }\n        band {\n          id\n          name\n        }\n        composers {\n          id\n          name\n        }\n        lyrists {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),tn=Object(Rt.gql)(bt||(bt=Object(Bt.a)(["\n  query getUserMusics($id: Int!, $currentUserId: Int) {\n    user(id: $id) {\n      nickname\n      introduction\n      followingCount\n      followersCount\n      followed(currentUserId: $currentUserId) {\n        id\n      }\n    }\n  }\n"]))),nn=Object(Rt.gql)(Ot||(Ot=Object(Bt.a)(["\n  query getBookmarkAlbums($id: Int!, $bookmarkedAlbumPage: Int!) {\n    user(id: $id) {\n      bookmarkedAlbums(bookmarkedAlbumPage: $bookmarkedAlbumPage) {\n        data {\n          id\n          title\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),an=Object(Rt.gql)(mt||(mt=Object(Bt.a)(["\n  query getBookmarkArtists($id: Int!, $bookmarkedArtistPage: Int!) {\n    user(id: $id) {\n      bookmarkedArtists(bookmarkedArtistPage: $bookmarkedArtistPage) {\n        data {\n          id\n          name\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),cn=Object(Rt.gql)(ht||(ht=Object(Bt.a)(["\n  query getBookmarkBands($id: Int!, $bookmarkedBandPage: Int!) {\n    user(id: $id) {\n      bookmarkedBands(bookmarkedBandPage: $bookmarkedBandPage) {\n        data {\n          id\n          name\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),rn=Object(Rt.gql)(ft||(ft=Object(Bt.a)(["\n  query getBookmarkMusic($id: Int!, $bookmarkedMusicPage: Int!) {\n    user(id: $id) {\n      bookmarkedMusics(bookmarkedMusicPage: $bookmarkedMusicPage) {\n        data {\n          id\n          title\n          band {\n            name\n          }\n          composers {\n            id\n            name\n          }\n          lyrists {\n            id\n            name\n          }\n          link {\n            itunes\n          }\n          user {\n            nickname\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),on=Object(Rt.gql)(xt||(xt=Object(Bt.a)(["\n  query getUserFollower($id: Int!, $followerPage: Int!) {\n    user(id: $id) {\n      followers(followerPage: $followerPage) {\n        pagination {\n          totalPages\n        }\n        data {\n          id\n          nickname\n          link {\n            twitter\n          }\n        }\n      }\n    }\n  }\n"]))),sn=Object(Rt.gql)(pt||(pt=Object(Bt.a)(["\n  query getUserFollowing($id: Int!, $followingPage: Int!) {\n    user(id: $id) {\n      following(followingPage: $followingPage) {\n        pagination {\n          totalPages\n        }\n        data {\n          id\n          nickname\n          link {\n            twitter\n          }\n        }\n      }\n    }\n  }\n"]))),ln=Object(Rt.gql)(vt||(vt=Object(Bt.a)(["\n  query getUserMusics($id: Int!, $musicPage: Int!) {\n    user(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title\n          band {\n            name\n          }\n          composers {\n            id\n            name\n          }\n          lyrists {\n            id\n            name\n          }\n          link {\n            itunes\n          }\n          user {\n            id\n            nickname\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),dn=Object(Rt.gql)(gt||(gt=Object(Bt.a)(["\n  query getUserMusics($id: Int!) {\n    user(id: $id) {\n      link {\n        id\n        twitter\n      }\n    }\n  }\n"]))),un=Object(Rt.gql)(St||(St=Object(Bt.a)(["\n  query getUsers($page: Int!, $q: JSON) {\n    users(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        nickname\n        link {\n          twitter\n        }\n      }\n    }\n  }\n"]))),jn=Object(Rt.gql)(kt||(kt=Object(Bt.a)(["\n  query getBlob($id: Int!, $oid: String!) {\n    music(id: $id) {\n      blob(oid: $oid)\n    }\n  }\n"]))),bn=Object(Rt.gql)(Ct||(Ct=Object(Bt.a)(["\n  query getBlob($id: Int!, $oid: String!) {\n    music(id: $id) {\n      tree(oid: $oid) {\n        oid\n        type\n        name\n        filemode\n      }\n    }\n  }\n"])));It="http://34.127.71.40";var On=new Rt.GraphQLClient("".concat(It,"/graphql")),mn=function(e,t){return function(){return On.request(en,{page:e,q:t}).then((function(e){return e.musics}))}},hn=function(e,t){return function(){return On.request(Gt,{page:e,q:t}).then((function(e){return e.bands}))}},fn=function(e,t){return function(){return On.request(Ft,{page:e,q:t}).then((function(e){return e.artists}))}},xn=function(e,t){return function(){return On.request(_t,{page:e,q:t}).then((function(e){return e.albums}))}},pn=function(){var e,t,n,c,r,i,o,s,l,d,u,j,b,O=Tt(),m=Object(H.a)(O,2),h=m[0],f=m[1],x=Tt(),p=Object(H.a)(x,2),v=p[0],g=p[1],S=Tt(),k=Object(H.a)(S,2),C=k[0],I=k[1],y=Tt(),E=Object(H.a)(y,2),P=E[0],U=E[1],A=fe().onError,w=Object(J.a)([he.MUSICS,h],mn(h,{s:"updated_at desc"}),{onError:A}),L=Object(J.a)([he.ALBUMS,v],xn(v,{s:"updated_at desc"}),{onError:A}),N=Object(J.a)([he.ARTISTS,C],fn(C,{s:"updated_at desc"}),{onError:A}),M=Object(J.a)([he.BANDS,P],hn(P,{s:"updated_at desc"}),{onError:A}),T=Object(J.a)([he.MUSICS,1,he.BOOKMARKS],mn(1,{s:"bookmarks_count desc"}),{onError:A});return Object(a.useEffect)((function(){var e=new URL(window.location.href).searchParams.get("code");if(e){var t=window.opener;t&&t.getSpotifyCode(e),window.close()}}),[]),Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsxs)(X.a,{container:!0,spacing:2,children:[Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(Qe,{type:"Music"})}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(Qe,{type:"Album"})}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(Qe,{type:"Artist"})}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(Qe,{type:"Band"})})]})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Lt,{data:null===(e=T.data)||void 0===e?void 0:e.data})}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(ee.a,{variant:"h4",children:"Musics"}),Object(be.jsx)(Ce,{musics:(null===(t=w.data)||void 0===t?void 0:t.data)||[],loading:w.isLoading,page:h,pageCount:null===(n=w.data)||void 0===n||null===(c=n.pagination)||void 0===c?void 0:c.totalPages,onPage:f})]}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(ee.a,{variant:"h4",children:"Albums"}),Object(be.jsx)(Ie,{albums:(null===(r=L.data)||void 0===r?void 0:r.data)||[],loading:L.isLoading,page:v,pageCount:null===(i=L.data)||void 0===i||null===(o=i.pagination)||void 0===o?void 0:o.totalPages,onPage:g})]}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(ee.a,{variant:"h4",children:"Bands"}),Object(be.jsx)(Ne,{bands:(null===(s=M.data)||void 0===s?void 0:s.data)||[],loading:M.isLoading,page:P,pageCount:null===(l=M.data)||void 0===l||null===(d=l.pagination)||void 0===d?void 0:d.totalPages,onPage:U})]}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(ee.a,{variant:"h4",children:"Artists"}),Object(be.jsx)(Le,{artists:(null===(u=N.data)||void 0===u?void 0:u.data)||[],loading:N.isLoading,page:C,pageCount:null===(j=N.data)||void 0===j||null===(b=j.pagination)||void 0===b?void 0:b.totalPages,onPage:I})]})]})},vn=n(19),gn=n.n(vn),Sn=n(27),kn=n(1281),Cn=n(76),In=n(9),yn=n(54),En=n(381),Pn=n(1282),Un=["name","defaultValue","onChange","onKeyPress","errors","control","rules"],An=function(e){var t=e.name,n=e.defaultValue,a=e.onChange,c=e.onKeyPress,r=e.errors,i=e.control,o=e.rules,s=Object(yn.a)(e,Un),l=Object(Sn.c)({name:t,control:i,rules:o,defaultValue:n}),d=l.field,u=d.ref,j=d.value,b=d.onChange,O=l.meta.invalid;return Object(be.jsx)(Pn.a,Object(In.a)(Object(In.a)({},s),{},{value:j,inputRef:u,error:O,helperText:r&&Object(be.jsx)(En.a,{errors:r,name:t}),onChange:function(e){a&&a(e),b(e.target.value)},onKeyPress:function(e){c&&c(e)}}))};An.defaultProps={rules:{}};var wn=An,Ln=n(274),Nn=["disabled","loading","children"],Mn=function(e){var t=e.disabled,n=e.loading,a=e.children,c=Object(yn.a)(e,Nn);return Object(be.jsx)(Be.a,Object(In.a)(Object(In.a)({},c),{},{variant:"contained",startIcon:n&&Object(be.jsx)(Ln.a,{size:20}),disabled:n||t,disableElevation:!0,children:a}))},Tn=n(34),Rn=Tn.b().shape({email:Tn.d().email().required(),password:Tn.d().required()}),Bn=Tn.b().shape({email:Tn.d().email().required(),nickname:Tn.d().required().min(4).max(30),familyname:Tn.d().required().max(35),givenname:Tn.d().required().max(35),password:Tn.d().required(),passwordConfirmation:Tn.d().oneOf([Tn.c("password"),null])}),qn=function(e){var t=e.onSuccess,n=Object(o.b)().enqueueSnackbar,c=Object(j.b)(),r=Object(Sn.d)({resolver:Object(Cn.a)(Rn)}),i=r.errors,s=r.control,l=r.setValue,d=r.handleSubmit,u=Object(kn.a)((function(e){return t=e,gn.a.post("/auth/sign_in",t);var t}),{onSuccess:function(e){c(I(e.data.data)),c(y(e.headers)),n("SignIn successful",{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"center"}}),t()},onError:function(e){e.response?n(e.response.data.errors,{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}}):n(String(e),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})}}),b=u.isLoading,O=u.mutate;Object(a.useEffect)((function(){l("email","test@test.com"),l("password","password")}),[l]);return Object(be.jsxs)(Z.a,{m:3,children:[Object(be.jsx)(ee.a,{variant:"h4",align:"center",children:"SignIn"}),Object(be.jsxs)("form",{onSubmit:d((function(e){return O(e)})),children:[Object(be.jsx)(wn,{type:"email",name:"email",defaultValue:"",autoComplete:"on",label:"Email",variant:"outlined",margin:"normal",control:s,errors:i,disabled:b,fullWidth:!0}),Object(be.jsx)(wn,{type:"password",name:"password",label:"Password",variant:"outlined",margin:"normal",control:s,defaultValue:"",errors:i,disabled:b,fullWidth:!0}),Object(be.jsx)(Mn,{type:"submit",color:"primary",loading:b,fullWidth:!0,children:"SignIn"})]})]})},Dn=function(){var e=Object(Y.f)();return Object(be.jsx)(Mt,{children:Object(be.jsx)(Nt.a,{maxWidth:"xs",children:Object(be.jsx)(de.a,{variant:"outlined",children:Object(be.jsx)(qn,{onSuccess:function(){return e.push("/")}})})})})},_n=function(e){var t=e.onSuccess,n=Object(o.b)().enqueueSnackbar,a=Object(j.b)(),c=Object(Sn.d)({resolver:Object(Cn.a)(Bn)}),r=c.errors,i=c.control,s=c.handleSubmit,l=Object(kn.a)((function(e){return t=e,gn.a.post("/auth",t,{"Key-inflection":"camel"});var t}),{onSuccess:function(e){a(I(e.data.data)),a(y(e.headers)),n("SignUp successful",{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"center"}}),t()},onError:function(e){e.response?e.response.data.errors.full_messages.forEach((function(e){return n(e,{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})})):n(String(e),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})}}),d=l.isLoading,u=l.mutate;return Object(be.jsxs)(Z.a,{m:3,children:[Object(be.jsx)(ee.a,{variant:"h4",align:"center",children:"SignUp"}),Object(be.jsxs)("form",{onSubmit:s((function(e){return u(e)})),children:[Object(be.jsx)(wn,{name:"nickname",defaultValue:"",label:"NickName",variant:"outlined",margin:"normal",control:i,errors:r,disabled:d,fullWidth:!0}),Object(be.jsxs)(X.a,{container:!0,spacing:2,children:[Object(be.jsx)(X.a,{item:!0,xs:6,children:Object(be.jsx)(wn,{name:"familyname",defaultValue:"",label:"FamilyName",variant:"outlined",control:i,errors:r,disabled:d,fullWidth:!0})}),Object(be.jsx)(X.a,{item:!0,xs:6,children:Object(be.jsx)(wn,{name:"givenname",defaultValue:"",label:"GivenName",variant:"outlined",control:i,errors:r,disabled:d,fullWidth:!0})})]}),Object(be.jsx)(wn,{type:"email",name:"email",defaultValue:"",label:"Email",variant:"outlined",margin:"normal",control:i,errors:r,disabled:d,fullWidth:!0}),Object(be.jsx)(wn,{type:"password",name:"password",defaultValue:"",label:"Password",variant:"outlined",margin:"normal",control:i,errors:r,disabled:d,fullWidth:!0}),Object(be.jsx)(wn,{type:"password",name:"password_confirmation",defaultValue:"",label:"PasswordConfirmation",variant:"outlined",margin:"normal",control:i,errors:r,disabled:d,fullWidth:!0}),Object(be.jsx)(Mn,{type:"submit",loading:d,color:"primary",fullWidth:!0,children:"SignUp"})]})]})},$n=function(){var e=Object(Y.f)();return Object(be.jsx)(Mt,{children:Object(be.jsx)(Nt.a,{maxWidth:"xs",children:Object(be.jsx)(de.a,{variant:"outlined",children:Object(be.jsx)(_n,{onSuccess:function(){return e.push("/")}})})})})},Vn=n(78),Wn=n(385),Fn=n.n(Wn),Kn=["loading"],Qn=function(e){var t=e.loading,n=Object(yn.a)(e,Kn);return Object(be.jsx)(be.Fragment,{children:t?Object(be.jsx)(Ln.a,Object(In.a)({},n)):null})},zn=["loading"],Yn=function(e){var t=e.loading,n=Object(yn.a)(e,zn);return Object(be.jsx)(Pn.a,Object(In.a)(Object(In.a)({},n),{},{variant:"outlined",InputProps:{startAdornment:Object(be.jsx)(Fn.a,{}),endAdornment:Object(be.jsx)(Qn,{color:"inherit",size:20,loading:t})},fullWidth:!0}))},Gn=function(){var e=Object(a.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],r=Object(Vn.useDebounce)(n,1e3),i=Object(H.a)(r,2),o=i[0],s=i[1].isPending,l=Tt(),d=Object(H.a)(l,2),u=d[0],j=d[1],b=fe().onError,O=Object(J.a)([he.ARTISTS,u,o],fn(u,{name_cont:o}),{onError:b}),m=O.isLoading,h=O.data;return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Yn,{onChange:function(e){return c(e.target.value)},loading:m||s()}),Object(be.jsx)(Le,{artists:null===h||void 0===h?void 0:h.data,loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:j})]})},Hn=n(387),Jn=n.n(Hn),Xn=function(e){var t=e.children,n=e.href,a=e.startIcon;return Object(be.jsx)(Be.a,{startIcon:a,component:ie.a,href:n,target:"_blank",rel:"noopener noreferrer",disabled:!n,children:t})},Zn=n(386),ea=function(){return Object(be.jsx)(ye.a,{children:Object(be.jsx)(Zn.a,{size:23})})},ta=function(e){var t=e.color;return Object(be.jsx)(ye.a,{color:t,children:Object(be.jsx)(Ee.d,{})})},na=function(){return Object(be.jsx)(ye.a,{children:Object(be.jsx)(Ee.b,{size:24})})},aa=function(){var e=Object(a.useState)(!1),t=Object(H.a)(e,2),n=t[0],c=t[1];return[n,Object(a.useCallback)((function(){c(!0)}),[]),Object(a.useCallback)((function(){return c(!1)}),[])]},ca=function(e){var t=e.itunes,n=e.twitter,a=e.spotify,c=e.wikipedia,r=e.musixmatch,i=e.loading,o=aa(),s=Object(H.a)(o,3),l=s[0],d=s[1],u=s[2],j=aa(),b=Object(H.a)(j,3),O=b[0],m=b[1],h=b[2],f=aa(),x=Object(H.a)(f,3),p=x[0],v=x[1],g=x[2],S=aa(),k=Object(H.a)(S,3),C=k[0],I=k[1],y=k[2],E=aa(),P=Object(H.a)(E,3),U=P[0],A=P[1],w=P[2];return Object(be.jsxs)(ue.a,{component:de.a,children:[Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Link"}),Object(be.jsx)(ae.a,{children:"Edit"})]})}),Object(be.jsxs)(ne.a,{children:[n&&Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(Xn,{startIcon:Object(be.jsx)(Pe,{}),href:n.link?"https://twitter.com/".concat(n.link):void 0,children:"twitter"})}),Object(be.jsxs)(ae.a,{children:[Object(be.jsx)(Be.a,{variant:"text",onClick:m,children:"Edit"}),n.renderDialog(O,h)]})]}),t&&Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(Xn,{startIcon:Object(be.jsx)(ea,{}),href:t.link,children:"itunes"})}),Object(be.jsxs)(ae.a,{children:[Object(be.jsx)(Be.a,{variant:"text",onClick:d,children:"Edit"}),t.renderDialog(l,u)]})]}),a&&Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(Xn,{startIcon:Object(be.jsx)(na,{}),href:a.link?"https://open.spotify.com/".concat(a.type,"/").concat(a.link):void 0,children:"spotify"})}),Object(be.jsxs)(ae.a,{children:[Object(be.jsx)(Be.a,{variant:"text",onClick:v,children:"Edit"}),a.renderDialog(p,g)]})]}),r&&Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsxs)(Z.a,{display:"flex",alignItems:"cneter",children:[Object(be.jsx)(Z.a,{mr:1,children:Object(be.jsx)(Jn.a,{color:r.link?void 0:"action"})}),"MUSIXMATCH"]})}),Object(be.jsxs)(ae.a,{children:[Object(be.jsx)(Be.a,{variant:"text",onClick:A,children:"Edit"}),r.renderDialog(U,w)]})]}),c&&Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(Xn,{startIcon:Object(be.jsx)(ta,{}),href:c.link?"https://ja.wikipedia.org/?curid=".concat(c.link):void 0,children:"wikipedia"})}),Object(be.jsxs)(ae.a,{children:[Object(be.jsx)(Be.a,{variant:"text",onClick:I,children:"Edit"}),c.renderDialog(C,y)]})]})]})]}),i&&Object(be.jsx)(le.a,{})]})};ca.defaultProps={itunes:void 0,twitter:void 0,spotify:void 0,wikipedia:void 0,musixmatch:void 0,loading:!1},ca.whyDidYouRender=!0;var ra=ca,ia=n(389),oa=n.n(ia),sa=n(388),la=n.n(sa),da=["count","bookmarked","onCreate","onDestroy"],ua=function(e){var t=e.count,n=e.bookmarked,a=e.onCreate,c=e.onDestroy,r=Object(yn.a)(e,da);return Object(be.jsx)(Ue.a,Object(In.a)(Object(In.a)({},r),{},{onClick:n?c:a,children:n?Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(ee.a,{children:t||0}),Object(be.jsx)(la.a,{color:"error"})]}):Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(ee.a,{children:t||0}),Object(be.jsx)(oa.a,{color:"error"})]})}))},ja=function(e){var t=e.artist,n=t.artistName,a=t.artistLinkUrl;return Object(be.jsx)(Me.a,{children:Object(be.jsx)(Z.a,{display:"flex",children:Object(be.jsx)(Z.a,{flex:"1",overflow:"hidden",children:Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{children:n}),Object(be.jsx)(Be.a,{href:a,target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()},children:"itunes"})]})})})})},ba=n(1277),Oa=n(1251);function ma(e){var t,n,c,r,i=e.defaultValue,o=e.open,s=e.title,l=e.showSearchBar,d=e.useQueryArgs,u=e.children,j=e.onClose,b=e.onSelect,O=Object(a.useState)(""),m=Object(H.a)(O,2),h=m[0],f=m[1],x=Tt(),p=Object(H.a)(x,2),v=p[0],g=p[1],S=Object(Vn.useDebounce)(h,1e3),k=Object(H.a)(S,2),C=k[0],I=k[1].isPending,y=fe().onError,E=Object(J.a)([].concat(Object(ze.a)(d.key),[C,v]),(function(){return d.fn({term:C,page:v})}),Object(In.a)({enabled:!!C&&!I()&&o,onError:y},d.options));return Object(a.useEffect)((function(){i&&f(i)}),[i]),Object(be.jsxs)(ba.a,{open:o,onClose:j,fullWidth:!0,children:[Object(be.jsxs)(Oa.a,{children:["Choose ",s]}),Object(be.jsxs)(Z.a,{p:3,children:[l&&Object(be.jsx)(Pn.a,{id:"",label:"",defaultValue:i,value:h,variant:"outlined",onChange:function(e){return f(e.target.value)},fullWidth:!0}),E.isLoading&&Object(be.jsx)(le.a,{}),null===(t=E.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.map((function(e,t){return u(e,function(e){return function(){var t;j(),(null===(t=E.data)||void 0===t?void 0:t.data)&&b(E.data.data[e])}}(t))})),Object(be.jsx)(Z.a,{display:"flex",justifyContent:"center",children:(null===(c=E.data)||void 0===c?void 0:c.pageCount)&&Object(be.jsx)(je.a,{page:v,count:null===(r=E.data)||void 0===r?void 0:r.pageCount,onChange:g})})]})]})}ma.defaultProps={value:"",showSearchBar:!1,onChange:void 0};var ha=ma;var fa=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,r=e.onSelect;return Object(be.jsx)(ha,{defaultValue:t,title:"Album",open:n,showSearchBar:a,useQueryArgs:{key:[he.ITUNES,he.ALBUMS],fn:function(e){return function(e,t){return ve.jsonp("/search",{params:{entity:"musicArtist",term:e,limit:400,offset:t}})}(e.term,e.page).then((function(e){return{data:e.results}}))}},onSelect:r,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(ja,{artist:e})},e.artistId)}})},xa=n(38),pa=n.n(xa),va=n(65),ga=n(1254),Sa=n(1252),ka=n(1253),Ca=function(){return Object(be.jsx)(Be.a,{startIcon:Object(be.jsx)(na,{}),component:ie.a,onClick:function(){window.open("https://accounts.spotify.com/authorize?response_type=code&client_id=".concat("3f35b18cccb84c7fa03754a435abf551","&redirect_uri=").concat(encodeURIComponent(window.location.origin),"&scope=").concat(encodeURIComponent("user-read-email")),void 0,"top=100,left=100,width=500,height=700")},rel:"noopener noreferrer",children:"Sign in Spotify"})},Ia=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MUSIXMATCH_KEY:"8e8664c1c915c7da0340999018e703d3",REACT_APP_SPOTIFY_KEY:"3f35b18cccb84c7fa03754a435abf551",REACT_APP_SPOTIFY_SECRET_KEY:"3edc70893d3f41a6ba33011e227824d7"}),ya=Ia.REACT_APP_SPOTIFY_KEY,Ea=Ia.REACT_APP_SPOTIFY_SECRET_KEY,Pa=btoa("".concat(ya||"",":").concat(Ea||"")),Ua=gn.a.create({baseURL:"https://api.spotify.com/v1/"}),Aa=gn.a.create({baseURL:"https://accounts.spotify.com/api",headers:{Authorization:"Basic ".concat(Pa),"Content-Type":"application/x-www-form-urlencoded"}});function wa(e,t,n,a){return Ua.get("/search",{params:{q:t,type:e,offset:n-1},headers:Object(In.a)({},{Authorization:"Bearer ".concat(a||"")})}).then((function(e){return e.data}))}var La=function(e){var t=e.open,n=e.onClose,c=e.children,r=Object(j.c)(w),i=Object(j.b)(),o=Object(a.useCallback)(function(){var e=Object(va.a)(pa.a.mark((function e(t){var n,a;return pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("code",t),n.append("grant_type","authorization_code"),n.append("redirect_uri",window.location.origin),e.next=6,Aa.post("/token",n);case 6:a=e.sent,i(N(a.data));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]);return Object(a.useEffect)((function(){window.getSpotifyCode=o}),[o]),r?Object(be.jsx)(be.Fragment,{children:c({handleError:function(){i(M())}})}):Object(be.jsxs)(ba.a,{open:t,onClose:n,fullWidth:!0,children:[Object(be.jsx)(Oa.a,{children:"Spotify need SignIn"}),Object(be.jsx)(Sa.a,{children:Object(be.jsx)(ka.a,{children:Object(be.jsx)(Ca,{})})}),Object(be.jsx)(ga.a,{children:Object(be.jsx)(Be.a,{onClick:n,color:"default",children:"Cancel"})})]})},Na=n(208),Ma=n.n(Na),Ta=Ma()({media:{height:100,width:100}}),Ra=function(e){var t=e.artist,n=Ta();return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{display:"flex",justifyItems:"center",alignItems:"center",m:1,children:Object(be.jsx)(Pt.a,{image:t.images[0].url,className:n.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{noWrap:!0,children:t.name}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0})]})]})})};var Ba=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,r=e.onSelect,i=Object(j.c)(w);return Object(be.jsx)(La,{open:n,onClose:c,children:function(e){var o=e.handleError;return Object(be.jsx)(ha,{defaultValue:t,title:"Spotify",open:n,useQueryArgs:{key:[he.SPOTIFY,he.ALBUMS],fn:function(e){return wa("artist",e.term,e.page,null===i||void 0===i?void 0:i.access_token).then((function(e){return{data:e.artists.items,page:e.artists.offset,pageCount:Math.floor(e.artists.total/e.artists.limit)}}))},options:{onError:o}},showSearchBar:a,onSelect:r,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(Ra,{artist:e})},e.id)}})}})},qa="https://twitter.com/",Da=function(e){var t=e.loading,n=e.open,c=e.defaultValue,r=e.onPatch,i=e.onClose,o=Object(a.useState)(""),s=Object(H.a)(o,2),l=s[0],d=s[1];return Object(be.jsxs)(ba.a,{open:n,onClose:i,fullWidth:!0,children:[Object(be.jsx)(Oa.a,{children:"Twitter"}),Object(be.jsxs)(Z.a,{p:3,children:[Object(be.jsx)(Pn.a,{name:"twitter",label:qa,variant:"outlined",value:l,defaultValue:c,onChange:function(e){return d(e.target.value.replace(qa,""))},fullWidth:!0}),Object(be.jsx)(Mn,{fullWidth:!0,color:"primary",loading:t,onClick:function(){i(),r(l)},children:"UPDATE"})]})]})},_a=function(e){var t=e.wikipedia.title;return Object(be.jsx)("div",{children:Object(be.jsx)("p",{children:t})})},$a=pe.a.create({baseURL:"https://ja.wikipedia.org/w/api.php"}),Va=function(e){return $a.jsonp("",{params:{format:"json",action:"query",prop:"extracts",explaintext:!0,exintro:!0,pageids:e}}).then((function(t){return t.query.pages[e||0]}))};var Wa=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,r=e.onSelect;return Object(be.jsx)(ha,{defaultValue:t,title:"Wikipedia",open:n,showSearchBar:a,useQueryArgs:{key:[he.WIKIPEDIA],fn:function(e){var t,n,a=e.term,c=e.page;return(t=a,n=c,$a.jsonp("",{params:{format:"json",action:"query",list:"search",srsearch:t,sroffset:n}})).then((function(e){return{data:e.query.search,pageCount:Math.floor(e.query.searchinfo.totalhits/e.continue.sroffset)}}))}},onSelect:r,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(_a,{wikipedia:e})},e.pageid)}})};gn.a.defaults.baseURL="http://34.127.71.40";var Fa=function(){var e,t,n,a,c,r,i,o,s,l,u,b,O,m,h,f,x,p=Tt(),v=Object(H.a)(p,2),g=v[0],C=v[1],I=Tt(),E=Object(H.a)(I,2),P=E[0],U=E[1],A=Object(Y.h)(),w=Number(A.id),L=fe().onError,N=Object(j.c)(k),M=Object(j.c)(S),T=Object(j.b)(),R=Object(d.b)(),B=Object(J.a)([he.ARTIST,w],function(e,t){return function(){return On.request($t,{id:e,currentUserId:t}).then((function(e){return e.artist}))}}(w,null===M||void 0===M?void 0:M.id),{onError:L}),q=Object(J.a)([he.ARTIST,w,he.ALBUMS,g],function(e,t){return function(){return On.request(Vt,{id:e,albumPage:t}).then((function(e){return e.artist.albums}))}}(w,g),{onError:L}),D=Object(J.a)([he.ARTIST,w,he.MUSICS,P],function(e,t){return function(){return On.request(Wt,{id:e,musicPage:t}).then((function(e){return e.artist.musics}))}}(w,P),{onError:L}),_=Object(J.a)([he.WIKIPEDIA,null===(e=B.data)||void 0===e?void 0:e.link.wikipedia],(function(){var e;return Va(null===(e=B.data)||void 0===e?void 0:e.link.wikipedia)}),{enabled:!!(null===(t=B.data)||void 0===t?void 0:t.link.wikipedia),onError:L}),$=Object(J.a)([he.ITUNES,he.ARTIST,null===(n=B.data)||void 0===n?void 0:n.link.itunes],(function(){var e;return ge(null===(e=B.data)||void 0===e?void 0:e.link.itunes).then((function(e){return e.results[0]}))}),{enabled:!!(null===(a=B.data)||void 0===a?void 0:a.link.itunes),onError:L}),V=Object(kn.a)((function(){return function(e,t){return gn.a.post("".concat(G.ARTISTS,"/").concat(e).concat(G.BOOKMARKS),void 0,t)}(w,N)}),{onSuccess:function(e){T(y(e.headers)),R.setQueryData([he.ARTIST,w],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:L}),W=Object(kn.a)((function(){var e,t;return function(e,t,n){return gn.a.delete("".concat(G.ARTISTS,"/").concat(e).concat(G.BOOKMARKS,"/").concat(t||"undefined"),n)}(w,null===(e=B.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,N)}),{onSuccess:function(e){T(y(e.headers)),R.setQueryData([he.ARTIST,w],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:L}),F=Object(kn.a)((function(e){var t;return function(e,t,n,a){return gn.a.patch("".concat(G.ARTISTS,"/").concat(e).concat(G.LINKS,"/").concat(t||"undefined"),n,Object(In.a)({},a))}(w,null===(t=B.data)||void 0===t?void 0:t.link.id,e,N)}),{onSuccess:function(e){T(y(e.headers)),R.setQueryData([he.ARTIST,w],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{link:e.data})}))},onError:L}),K=function(e){return F.mutate({itunes:e.artistId})},Q=function(e){return F.mutate({wikipedia:e.pageid})},z=function(e){return F.mutate({spotify:e.id})},te=function(e){return F.mutate({twitter:e})};return Object(be.jsxs)(Mt,{children:[Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:11,children:Object(be.jsxs)(ee.a,{variant:"h5",children:[Object(be.jsx)($e.a,{}),null===(c=B.data)||void 0===c?void 0:c.name]})}),Object(be.jsx)(X.a,{item:!0,xs:1,children:Object(be.jsx)(ua,{count:null===(r=B.data)||void 0===r?void 0:r.bookmarksCount,bookmarked:!!(null===(i=B.data)||void 0===i?void 0:i.bookmark)||!1,onCreate:function(){return V.mutate()},onDestroy:function(){return W.mutate()}})})]}),Object(be.jsx)(Z.a,{children:Object(be.jsx)(ee.a,{variant:"body1",color:"initial",children:null===(o=_.data)||void 0===o?void 0:o.extract})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(ra,{twitter:{link:null===(s=B.data)||void 0===s?void 0:s.link.twitter,renderDialog:function(e,t){var n;return Object(be.jsx)(Da,{defaultValue:(null===(n=B.data)||void 0===n?void 0:n.link.twitter)||void 0,open:e,loading:F.isLoading,onClose:t,onPatch:te})}},itunes:{link:(null===(l=$.data)||void 0===l?void 0:l.artistLinkUrl)||"",renderDialog:function(e,t){var n;return Object(be.jsx)(fa,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:K,showSearchBar:!0})}},wikipedia:{link:null===(u=B.data)||void 0===u?void 0:u.link.wikipedia,renderDialog:function(e,t){var n;return Object(be.jsx)(Wa,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:Q,showSearchBar:!0})}},spotify:{type:"artist",link:null===(b=B.data)||void 0===b?void 0:b.link.spotify,renderDialog:function(e,t){var n;return Object(be.jsx)(Ba,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:z,showSearchBar:!0})}}})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Ne,{bands:(null===(O=B.data)||void 0===O?void 0:O.bands)||[],loading:B.isLoading})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Ie,{albums:(null===(m=q.data)||void 0===m?void 0:m.data)||[],loading:q.isLoading,page:g,pageCount:null===(h=q.data)||void 0===h?void 0:h.pagination.totalPages,onPage:C})}),Object(be.jsx)(Ce,{musics:(null===(f=D.data)||void 0===f?void 0:f.data)||[],loading:D.isLoading,page:P,pageCount:null===(x=D.data)||void 0===x?void 0:x.pagination.totalPages,onPage:U})]})},Ka=n(1285),Qa=function(e){return Object(be.jsx)(Be.a,Object(In.a)(Object(In.a)({variant:"contained",color:"secondary"},e),{},{children:"Search by Itunes"}))},za=n(1273),Ya=n(1256);var Ga=function(e){var t=e.data,n=e.children;return(null===t||void 0===t?void 0:t.length)?Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Z.a,{my:3,children:Object(be.jsxs)(za.a,{severity:"warning",children:[Object(be.jsx)(Ya.a,{children:"Warning"}),"Already Existed \u2014 ",Object(be.jsx)("strong",{children:"check it out!"})]})}),Object(be.jsx)(Z.a,{mb:3,children:n})]}):Object(be.jsx)(be.Fragment,{})},Ha=function(){var e,t,n,c=Tt(),r=Object(H.a)(c,2),i=r[0],o=r[1],s=aa(),l=Object(H.a)(s,3),u=l[0],b=l[1],O=l[2],m=Object(a.useState)(),h=Object(H.a)(m,2),f=h[0],x=h[1],p=Object(Sn.d)(),v=p.errors,g=p.control,S=p.setValue,C=p.register,I=p.watch,E=p.handleSubmit,P=I().name,U=Object(Ka.a)(P,1e3),A=Object(H.a)(U,1)[0],w=Object(Y.f)(),L=Object(Y.i)().url.replace("/new",""),N=Object(j.b)(),M=Object(j.c)(k),T=fe().onError,R=Object(d.b)(),B=Object(kn.a)((function(e){return function(e,t){return gn.a.post(G.ARTISTS,e,t)}(e,M)}),{onSuccess:function(e){N(y(e.headers)),w.push("".concat(L,"/").concat(e.data.id)),R.setQueryData([he.ARTIST,e.data.id,{musicPage:1,albumPage:1}],e.data),f&&R.setQueryData([he.ITUNES,he.ARTIST,f.artistId],f)},onError:T}),q=Object(J.a)([he.ARTISTS,{page:i,query:A}],fn(1,{name_cont:A}),{enabled:!!A,onError:T});return Object(a.useEffect)((function(){if(C("link_attributes.itunes"),f){var e=f.artistName,t=f.artistId;S("link_attributes.itunes",t),S("name",e)}}),[C,f,S]),Object(be.jsx)(Mt,{children:Object(be.jsx)(de.a,{children:Object(be.jsxs)(Z.a,{p:3,children:[Object(be.jsx)(wn,{name:"name",defaultValue:"",autoComplete:"on",label:"Name",variant:"outlined",control:g,errors:v,disabled:B.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(be.jsx)(Qn,{color:"inherit",size:20,loading:q.isLoading})}}),Object(be.jsx)(Qa,{onClick:b,disabled:!P,fullWidth:!0,disableElevation:!0}),Object(be.jsx)(fa,{defaultValue:P,open:u,onClose:O,onSelect:function(e){return x(e)}}),Object(be.jsx)(Ga,{data:null===(e=q.data)||void 0===e?void 0:e.data,children:Object(be.jsx)(Le,{artists:null===(t=q.data)||void 0===t?void 0:t.data,page:i,pageCount:null===(n=q.data)||void 0===n?void 0:n.pagination.totalPages,onPage:o,loading:q.isLoading})}),Object(be.jsx)(Mn,{color:"primary",disabled:!P,loading:B.isLoading,onClick:E((function(e){return B.mutate(e)})),fullWidth:!0,children:"Create Artist"})]})})})},Ja=function(){var e=Object(a.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],r=Object(Vn.useDebounce)(n,1e3),i=Object(H.a)(r,2),o=i[0],s=i[1].isPending,l=Tt(),d=Object(H.a)(l,2),u=d[0],j=d[1],b=fe().onError,O=Object(J.a)([he.MUSICS,u,o],mn(u,{title_cont:o}),{onError:b}),m=O.isLoading,h=O.data;return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Yn,{onChange:function(e){return c(e.target.value)},loading:m||s()}),Object(be.jsx)(Ce,{musics:(null===h||void 0===h?void 0:h.data)||[],loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:j})]})},Xa=n(1262),Za=n(1193),ec=n(1268),tc=Object(Et.a)({media:{height:100,width:100}}),nc=function(e){var t=e.music,n=t.artworkUrl100,a=t.artistName,c=t.collectionCensoredName,r=t.trackCensoredName,i=t.trackViewUrl,o=tc();return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{display:"flex",justifyItems:"center",alignItems:"center",mx:1,children:Object(be.jsx)(Pt.a,{image:n,className:o.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{noWrap:!0,children:r}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0,children:a}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0,children:c}),Object(be.jsx)(Be.a,{href:i,target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()},children:"itunes"})]})]})})};var ac=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,r=e.onSelect;return Object(be.jsx)(ha,{defaultValue:t,title:"Album",open:n,showSearchBar:a,useQueryArgs:{key:[he.ITUNES,he.ALBUMS],fn:function(e){return function(e,t){return ve.jsonp("/search",{params:{entity:"song",term:e,limit:400,offset:t}})}(e.term,e.page).then((function(e){return{data:e.results}}))}},onSelect:r,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(nc,{music:e})},e.trackId)}})},cc=function(e){var t=e.music.track;return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{children:t.track_name}),Object(be.jsx)(ee.a,{children:t.album_name}),Object(be.jsx)(ee.a,{children:t.artist_name})]})})},rc=pe.a.create({baseURL:"https://api.musixmatch.com/ws/1.1",params:{apikey:"8e8664c1c915c7da0340999018e703d3"}});var ic=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,r=e.onSelect;return Object(be.jsx)(ha,{defaultValue:t,title:"Musixmatch",open:n,useQueryArgs:{key:[he.MUSIXMATCH],fn:function(e){var t,n=e.term;return(t=n,rc.jsonp("track.search",{params:{q_track:t}})).then((function(e){return{data:e.message.body.track_list}}))}},showSearchBar:a,onSelect:r,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(cc,{music:e})},e.track.track_id)}})},oc=Object(Et.a)({media:{height:100,width:100}}),sc=function(e){var t=e.track,n=oc();return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{display:"flex",justifyItems:"center",alignItems:"center",m:1,children:Object(be.jsx)(Pt.a,{image:t.album.images[0].url,className:n.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{noWrap:!0,children:t.name}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0,children:t.artists.map((function(e){return e.name}))})]})]})})};var lc=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,r=e.onSelect,i=Object(j.c)(w);return Object(be.jsx)(La,{open:n,onClose:c,children:function(e){var o=e.handleError;return Object(be.jsx)(ha,{defaultValue:t,title:"Spotify",open:n,useQueryArgs:{key:[he.SPOTIFY,he.ALBUMS],fn:function(e){return wa("track",e.term,e.page,null===i||void 0===i?void 0:i.access_token).then((function(e){return{data:e.tracks.items,page:e.tracks.offset,pageCount:Math.floor(e.tracks.total/e.tracks.limit)}}))},options:{onError:o}},showSearchBar:a,onSelect:r,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(sc,{track:e})},e.id)}})}})},dc=n(56),uc=n.n(dc),jc=n(1270);function bc(e){var t=e.maxLength,n=e.onSelectOption,c=e.onRemoveOption,r=e.textFieldProps,i=e.autocompleteProps,o=Object(a.useState)(!1),s=Object(H.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)([]),j=Object(H.a)(u,2),b=j[0],O=j[1],m=aa(),h=Object(H.a)(m,3),f=h[0],x=h[1],p=h[2];return Object(a.useEffect)((function(){O((null===i||void 0===i?void 0:i.value)||[])}),[i.inputValue,null===i||void 0===i?void 0:i.value]),Object(be.jsx)(jc.a,Object(In.a)(Object(In.a)({},i),{},{open:f,disabled:l,getOptionDisabled:function(){return!!t&&b.length>=t},noOptionsText:"No Results",onChange:function(e,t,a){if(t&&Array.isArray(t)){switch(d(!0),a){case"select-option":n&&n(t[t.length-1],t);break;case"remove-option":var r=b.filter((function(e){return!t.includes(e)}))[0];c&&c(r,t)}d(!1),O(t)}},onOpen:x,onClose:p,renderInput:function(e){return Object(be.jsx)(Pn.a,Object(In.a)(Object(In.a)(Object(In.a)({},e),r),{},{InputProps:Object(In.a)(Object(In.a)(Object(In.a)({},r.InputProps),e.InputProps),{},{endAdornment:Object(be.jsxs)(be.Fragment,{children:[i.loading?Object(be.jsx)(Ln.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))}bc.defaultProps={onSelectOption:void 0,onRemoveOption:void 0,maxLength:void 0};var Oc=bc,mc=function(){var e,t=Object(a.useState)(""),n=Object(H.a)(t,2),c=n[0],r=n[1],i=fe().onError,o=uc()(c,1e3),s=Object(H.a)(o,2),l=s[0],u=s[1].isPending,b=Object(j.c)(k),O=Object(j.b)(),m=Object(Y.h)(),h=Number(m.id),f=Number(m.userId),x=Object(d.b)(),p=x.getQueryData([he.MUSIC,h]),v=Object(kn.a)((function(e){var t=e.option;return function(e,t,n,a){return gn.a.post("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.COMPOSERS),n,a)}(f,h,t,b)}),{onSuccess:function(e,t){var n=t.options;O(y(e.headers)),x.setQueryData([he.MUSIC,h],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{composers:n})}))},onError:i}),g=Object(kn.a)((function(e){var t=e.option;return function(e,t,n,a){return gn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.COMPOSERS,"/").concat(n),a)}(f,h,t.id,b)}),{onSuccess:function(e,t){var n=t.options;O(y(e.headers)),x.setQueryData([he.MUSIC,h],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{composers:n})}))},onError:i}),S=Object(J.a)([he.ARTISTS,{query:l}],fn(1,{name_eq:l}),{enabled:!!l,onError:i});return Object(be.jsx)(Oc,{onSelectOption:function(e,t){return v.mutate({option:e,options:t})},onRemoveOption:function(e,t){return g.mutate({option:e,options:t})},textFieldProps:{label:"Composers",variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,value:(null===p||void 0===p?void 0:p.composers)||[],options:(null===(e=S.data)||void 0===e?void 0:e.data)||[],loading:v.isLoading||g.isLoading||u(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t){return r(t)}}})},hc=function(){var e,t=Object(a.useState)(""),n=Object(H.a)(t,2),c=n[0],r=n[1],i=fe().onError,o=uc()(c,1e3),s=Object(H.a)(o,2),l=s[0],u=s[1].isPending,b=Object(j.c)(k),O=Object(j.b)(),m=Object(Y.h)(),h=Number(m.id),f=Number(m.userId),x=Object(d.b)(),p=x.getQueryData([he.MUSIC,h]),v=Object(kn.a)((function(e){var t=e.option;return function(e,t,n,a){return gn.a.post("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.LYRISTS),n,a)}(f,h,t,b)}),{onSuccess:function(e,t){var n=t.options;O(y(e.headers)),x.setQueryData([he.MUSIC,h],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{lyrists:n})}))},onError:i}),g=Object(kn.a)((function(e){var t=e.option;return function(e,t,n,a){return gn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.LYRISTS,"/").concat(n),a)}(f,h,t.id,b)}),{onSuccess:function(e,t){var n=t.options;O(y(e.headers)),x.setQueryData([he.MUSIC,h],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{lyrists:n})}))},onError:i}),S=Object(J.a)([he.ARTISTS,{query:l}],fn(1,{name_eq:l}),{enabled:!!l,onError:i});return Object(be.jsx)(Oc,{onSelectOption:function(e,t){return v.mutate({option:e,options:t})},onRemoveOption:function(e,t){return g.mutate({option:e,options:t})},textFieldProps:{label:"Lyrists",variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,value:(null===p||void 0===p?void 0:p.lyrists)||[],options:(null===(e=S.data)||void 0===e?void 0:e.data)||[],loading:v.isLoading||g.isLoading||u(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t){return r(t)}}})},fc=function(){var e,t=Object(a.useState)(""),n=Object(H.a)(t,2),c=n[0],r=n[1],i=fe().onError,o=uc()(c,1e3),s=Object(H.a)(o,2),l=s[0],u=s[1].isPending,b=Object(j.c)(k),O=Object(j.b)(),m=Object(Y.i)(),h=Number(m.params.id),f=Object(d.b)(),x=f.getQueryData([he.MUSIC,h]),p=Object(kn.a)((function(e){var t=e.option;return gn.a.post(m.url+G.BANDS,t,b)}),{onSuccess:function(e,t){var n=t.option;O(y(e.headers)),f.setQueryData([he.MUSIC,h],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{band:n})}))},onError:i}),v=Object(kn.a)((function(e){var t=e.option;return gn.a.delete("".concat(m.url+G.BANDS,"/").concat(t.id),b)}),{onSuccess:function(e){O(y(e.headers)),f.setQueryData([he.MUSIC,h],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{band:null})}))},onError:i}),g=Object(J.a)([he.BANDS,{query:l}],hn(1,{name_cont:l}),{enabled:!!l,onError:i});return Object(be.jsx)(Oc,{maxLength:1,onSelectOption:function(e,t){return p.mutate({option:e,options:t})},onRemoveOption:function(e,t){return v.mutate({option:e,options:t})},textFieldProps:{label:"Band",variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,options:(null===(e=g.data)||void 0===e?void 0:e.data)||[],value:(null===x||void 0===x?void 0:x.band)?[x.band]:[],inputValue:c,loading:p.isLoading||v.isLoading||u(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t,n){return"input"===n&&r(t)}}})},xc=function(){var e=aa(),t=Object(H.a)(e,3),n=t[0],a=t[1],c=t[2];return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{onClick:a,children:"Edit"}),Object(be.jsx)(ba.a,{onClose:c,open:n,fullWidth:!0,children:Object(be.jsx)(Nt.a,{children:Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(Oa.a,{children:"Edit Info"}),Object(be.jsx)(mc,{}),Object(be.jsx)(hc,{}),Object(be.jsx)(fc,{})]})})})]})},pc=n(1257),vc=n(114),gc=n.n(vc),Sc=n(1272),kc=["name","defaultValue","onChange","onKeyPress","control","rules","children"],Cc=function(e){var t=e.name,n=e.defaultValue,a=e.onChange,c=e.onKeyPress,r=e.control,i=e.rules,o=e.children,s=Object(yn.a)(e,kc),l=Object(Sn.c)({name:t,control:r,rules:i,defaultValue:n}),d=l.field,u=d.ref,j=d.value,b=d.onChange,O=l.meta.invalid;return Object(be.jsx)(Sc.a,Object(In.a)(Object(In.a)({},s),{},{value:j,inputRef:u,error:O,onChange:function(e,t){a&&a(e,t),b(e.target.value)},onKeyPress:function(e){c&&c(e)},children:o}))};Cc.defaultProps={rules:{}};var Ic=Cc,yc=Tn.b().shape({artist_id:Tn.a().required(),role:Tn.a().required()}),Ec=Tn.b().shape({email:Tn.d().email().required(),nickname:Tn.d().required().min(4).max(30),familyname:Tn.d().required().max(35),givenname:Tn.d().required().max(35),introduction:Tn.d()}),Pc=Tn.b().shape({title:Tn.d().required(),description:Tn.d().required()}),Uc=Tn.b().shape({email:Tn.d().email().required(),description:Tn.d().required()}),Ac=function(){var e,t,n=Object(a.useState)(""),c=Object(H.a)(n,2),r=c[0],i=c[1],o=aa(),l=Object(H.a)(o,3),u=l[0],b=l[1],O=l[2],m=uc()(r,1e3),h=Object(H.a)(m,1)[0],f=Object(Sn.d)({defaultValues:{artist_id:void 0},resolver:Object(Cn.a)(yc)}),x=f.control,p=f.handleSubmit,v=f.setValue,g=f.register,S=fe().onError,C=Object(Y.i)(),I=Number(C.params.id),E=C.url+G.ARTISTS,P=Object(j.b)(),U=Object(j.c)(k),A=Object(d.b)(),w=A.getQueryData([he.MUSIC,I]),L=Object(kn.a)((function(e){return gn.a.post(E,e,U)}),{onSuccess:function(e){P(y(e.headers)),A.setQueryData([he.MUSIC,I],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{artistMusics:[].concat(Object(ze.a)(t.artistMusics||[]),[e.data])})}))},onError:S}),N=Object(kn.a)((function(e){return gn.a.delete("".concat(E,"/").concat(e.id),U)}),{onSuccess:function(e,t){P(y(e.headers)),A.setQueryData([he.MUSIC,I],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{artistMusics:e.artistMusics&&e.artistMusics.filter((function(e){return e!==t}))})}))},onError:S}),M=Object(J.a)([he.ARTISTS,{query:h}],fn(1,{name_cont:h}),{enabled:!!h,onError:S});return Object(a.useEffect)((function(){g("artist_id")}),[g]),Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{onClick:b,children:"Edit"}),Object(be.jsxs)(ba.a,{onClose:O,open:u,fullWidth:!0,children:[Object(be.jsx)(Oa.a,{children:"Role"}),Object(be.jsxs)(Nt.a,{children:[Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Role"}),Object(be.jsx)(ae.a,{children:"Artist"}),Object(be.jsx)(ae.a,{align:"right",children:"Delete"})]})}),Object(be.jsx)(ne.a,{children:null===w||void 0===w||null===(e=w.artistMusics)||void 0===e?void 0:e.map((function(e){return Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"/",children:e.role})}),Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.artist.id),children:e.artist.name})}),Object(be.jsx)(ae.a,{align:"right",children:Object(be.jsx)(Ue.a,{onClick:function(){return N.mutate(e)},children:Object(be.jsx)(gc.a,{})})})]},e.id)}))})]})})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsxs)(X.a,{container:!0,spacing:1,children:[Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsxs)(Ic,{defaultValue:0,control:x,name:"role",variant:"outlined",fullWidth:!0,children:[Object(be.jsx)(pc.a,{value:0,children:"Vocal"}),Object(be.jsx)(pc.a,{value:1,children:"Guitar"}),Object(be.jsx)(pc.a,{value:2,children:"Base"}),Object(be.jsx)(pc.a,{value:3,children:"Drum"}),Object(be.jsx)(pc.a,{value:4,children:"Vocal&Guitar"}),Object(be.jsx)(pc.a,{value:5,children:"Vocal&Base"})]})}),Object(be.jsx)(X.a,{item:!0,xs:9,children:Object(be.jsx)(Oc,{maxLength:1,onSelectOption:function(e){return v("artist_id",e.id)},onRemoveOption:function(){return v("artist_id","")},textFieldProps:{label:"Artist",variant:"outlined"},autocompleteProps:{multiple:!0,options:(null===(t=M.data)||void 0===t?void 0:t.data)||[],inputValue:r,getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t,n){return"input"===n&&i(t)}}})})]})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Mn,{color:"primary",loading:L.isLoading,onClick:p((function(e){return L.mutate(e)})),fullWidth:!0,children:"Add Artist"})})]})]})]})},wc=function(){var e,t,n=Object(a.useState)(""),c=Object(H.a)(n,2),r=c[0],i=c[1],o=aa(),l=Object(H.a)(o,3),u=l[0],b=l[1],O=l[2],m=uc()(r,1e3),h=Object(H.a)(m,2),f=h[0],x=h[1].isPending,p=Object(Sn.d)(),v=p.register,g=p.handleSubmit,S=p.setValue,C=Object(Y.h)(),I=Number(C.userId),E=Number(C.id),P=Object(j.b)(),U=Object(j.c)(k),A=fe().onError,w=Object(d.b)(),L=w.getQueryData([he.MUSIC,E]),N=Object(kn.a)((function(e){return function(e,t,n,a){return gn.a.post("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.ALBUMS),n,Object(In.a)(Object(In.a)({},a),{},{"Key-inflection":"camel"}))}(I,E,e,U)}),{onSuccess:function(e){P(y(e.headers)),w.setQueryData([he.MUSIC,E],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{albums:[].concat(Object(ze.a)(t.albums||[]),[e.data.album])})}))},onError:A}),M=Object(kn.a)((function(e){return function(e,t,n,a){return gn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.ALBUMS,"/").concat(n),a)}(I,E,e.id,U)}),{onSuccess:function(e,t){P(y(e.headers)),w.setQueryData([he.MUSIC,E],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{albums:e.albums&&e.albums.filter((function(e){return e!==t}))})}))},onError:A}),T=Object(J.a)([he.ALBUMS,{query:f}],xn(1,{title_cont:f}),{enabled:!!f,onError:A});return Object(a.useEffect)((function(){v("album_id")}),[v]),Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{onClick:b,children:"Edit"}),Object(be.jsxs)(ba.a,{onClose:O,open:u,fullWidth:!0,children:[Object(be.jsx)(Oa.a,{children:"Edit Albums"}),Object(be.jsxs)(Nt.a,{children:[Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Album"}),Object(be.jsx)(ae.a,{align:"right",children:"Delete"})]})}),Object(be.jsx)(ne.a,{children:null===L||void 0===L||null===(e=L.albums)||void 0===e?void 0:e.map((function(e){return Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"/",children:e.title})}),Object(be.jsx)(ae.a,{align:"right",children:Object(be.jsx)(Ue.a,{onClick:function(){return M.mutate(e)},children:Object(be.jsx)(gc.a,{})})})]},e.id)}))})]})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Oc,{maxLength:1,onSelectOption:function(e){return S("album_id",e.id)},onRemoveOption:function(){return S("album_id","")},textFieldProps:{label:"Albums",variant:"outlined",margin:"normal"},autocompleteProps:{options:(null===(t=T.data)||void 0===t?void 0:t.data)||[],multiple:!0,loading:N.isLoading||M.isLoading||x(),getOptionSelected:function(e,t){return e.title===t.title},getOptionLabel:function(e){return e.title},onInputChange:function(e,t){return i(t)}}})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Mn,{color:"primary",loading:N.isLoading,onClick:g((function(e){return N.mutate(e)})),fullWidth:!0,children:"Add Artist"})})]})]})]})},Lc=function(){var e,t,n,a,c,r=fe().onError,i=Object(Y.h)(),o=Number(i.id),l=Number(i.userId),u=Object(j.b)(),b=Object(j.c)(k),O=Object(d.b)(),m=O.getQueryData([he.MUSIC,o]),h=O.getQueryData([he.ITUNES,he.MUSIC,null===m||void 0===m||null===(e=m.link)||void 0===e?void 0:e.itunes]),f=Object(kn.a)((function(e){return function(e,t,n,a,c){return gn.a.patch("".concat(G.USERS,"/").concat(e,"/").concat(G.MUSICS,"/").concat(t,"/").concat(G.LINKS,"/").concat(n||"undefined"),a,Object(In.a)({},c))}(l,o,null===m||void 0===m?void 0:m.link.id,e,b)}),{onSuccess:function(e){u(y(e.headers)),O.setQueryData([he.MUSIC,o],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{link:e.data})}))},onError:r}),x=function(e){return f.mutate({spotify:e.id})},p=function(e){return f.mutate({itunes:e.trackId})},v=function(e){return f.mutate({musixmatch:e.track.track_id})};return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(ra,{itunes:{link:null===h||void 0===h?void 0:h.trackViewUrl,renderDialog:function(e,t){return Object(be.jsx)(ac,{defaultValue:null===m||void 0===m?void 0:m.title,open:e,onClose:t,onSelect:p,showSearchBar:!0})}},spotify:{type:"track",link:null===m||void 0===m||null===(t=m.link)||void 0===t?void 0:t.spotify,renderDialog:function(e,t){return Object(be.jsx)(lc,{defaultValue:null===m||void 0===m?void 0:m.title,open:e,onClose:t,onSelect:x,showSearchBar:!0})}},musixmatch:{renderDialog:function(e,t){return Object(be.jsx)(ic,{defaultValue:null===m||void 0===m?void 0:m.title,open:e,onClose:t,onSelect:v,showSearchBar:!0})}}})}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(xc,{}),Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Main"}),Object(be.jsx)(ae.a,{})]})}),Object(be.jsxs)(ne.a,{children:[Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"ReleaseDate"}),Object(be.jsx)(ae.a,{children:(null===h||void 0===h?void 0:h.releaseDate)&&Object(ec.a)(new Date(h.releaseDate),"yyyy/MM/dd")})]}),Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Composer"}),Object(be.jsx)(ae.a,{children:null===m||void 0===m||null===(n=m.composers)||void 0===n?void 0:n.map((function(e){return Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))})]}),Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Lyrists"}),Object(be.jsx)(ae.a,{children:null===m||void 0===m||null===(a=m.lyrists)||void 0===a?void 0:a.map((function(e){return Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))})]}),Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Band"}),Object(be.jsx)(ae.a,{children:(null===m||void 0===m?void 0:m.band)&&Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.BANDS,"/").concat(m.band.id),children:m.band.name})})]}),Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Created by"}),Object(be.jsx)(ae.a,{children:(null===m||void 0===m?void 0:m.user)&&Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.USERS,"/").concat(m.user.id),children:m.user.nickname})})]})]})]})})]}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(Ac,{}),Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Role"}),Object(be.jsx)(ae.a,{children:"Artist"})]})}),Object(be.jsx)(ne.a,{children:null===m||void 0===m||null===(c=m.artistMusics)||void 0===c?void 0:c.map((function(e){return Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:e.role}),Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.artist.id),children:e.artist.name})})]},e.id)}))})]})})]}),Object(be.jsx)(wc,{}),Object(be.jsx)(Ie,{albums:(null===m||void 0===m?void 0:m.albums)||[]})]})},Nc=function(){var e=aa(),t=Object(H.a)(e,3),n=t[0],a=t[1],c=t[2],r=Object(Sn.d)(),i=r.errors,o=r.control,s=r.handleSubmit,l=Object(Y.f)(),u=Object(Y.i)(),b=Number(u.params.id),O=Number(u.params.userId),m=Object(j.c)(k),h=Object(d.b)(),f=h.getQueryData([he.MUSIC,b]),x=fe().onError,p=Object(j.b)(),v=Object(kn.a)((function(){return function(e,t,n){return gn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t),n)}(O,b,m)}),{onSuccess:function(e){p(y(e.headers)),h.removeQueries([he.MUSIC,b]),l.push(G.ROOT)},onError:x});return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(ba.a,{onClose:c,open:n,children:Object(be.jsxs)(Z.a,{m:3,children:[Object(be.jsx)(Oa.a,{children:"Are you absolutely sure?"}),Object(be.jsxs)(ee.a,{children:["Please type"," ",Object(be.jsx)(Z.a,{display:"inline",fontWeight:"Bold",children:null===f||void 0===f?void 0:f.title})," ","to confirm."]}),Object(be.jsx)(wn,{name:"title",defaultValue:"",autoComplete:"on",label:"Title",variant:"outlined",control:o,errors:i,disabled:v.isLoading,fullWidth:!0,rules:{validate:function(e){return e===(null===f||void 0===f?void 0:f.title)}}}),Object(be.jsx)(Mn,{type:"button",color:"secondary",loading:v.isLoading,onClick:s((function(){return v.mutate()})),fullWidth:!0,children:"Delete Music"})]})}),Object(be.jsx)(Be.a,{variant:"contained",color:"secondary",onClick:a,children:"Delete this music"})]})};Nc.defaultProps={music:void 0};var Mc=Nc,Tc=function(e){var t=e.issues,n=e.page,a=e.pageCount,c=e.onPage,r=e.loading,i=Object(Y.i)();return Object(be.jsx)(me,{page:n,pageCount:a,onPage:c,loading:r,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsx)(re.a,{children:Object(be.jsx)(ae.a,{children:"title"})})}),Object(be.jsx)(ne.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(be.jsx)(re.a,{children:Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"".concat(i.url,"/").concat(e.id),children:e.title})})},e.id)}))})]})})},Rc=function(){var e=Tt(),t=Object(H.a)(e,2),n=t[0],a=t[1],c=Object(Y.i)(),r=fe().onError,i=Object(J.a)([he.ISSUES,n],function(e,t,n){return function(){return On.request(Ht,{musicId:e,page:t,q:n}).then((function(e){return e.issues}))}}(Number(c.params.id),n),{onError:r}),o=i.data,l=i.isLoading;return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:10,children:Object(be.jsx)(Pn.a,{variant:"outlined",label:"Search Issues",onKeyPress:function(){},fullWidth:!0})}),Object(be.jsx)(X.a,{item:!0,xs:2,children:Object(be.jsx)(Be.a,{variant:"contained",component:s.b,to:c.url+G.NEW,children:"New"})})]})}),Object(be.jsx)(Tc,{issues:(null===o||void 0===o?void 0:o.data)||[],loading:l,page:n,pageCount:null===o||void 0===o?void 0:o.pagination.totalPages,onPage:a})]})},Bc=n(391),qc=n.n(Bc),Dc=n(392),_c=n.n(Dc),$c=function(e){var t=e.files,n=e.blobPath,a=e.treePath;return Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{}),Object(be.jsx)(ae.a,{children:"files"})]})}),Object(be.jsx)(ne.a,{children:t.map((function(e){return Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"blob"===e.type?Object(be.jsx)(qc.a,{color:"action"}):Object(be.jsx)(_c.a,{color:"action"})}),Object(be.jsx)(ae.a,{children:"blob"===e.type?Object(be.jsx)(ie.a,{to:{pathname:"".concat(n,"/").concat(e.name),state:{oid:e.oid,path:e.name}},component:s.b,children:e.name}):Object(be.jsx)(ie.a,{to:{pathname:"".concat(a,"/").concat(e.name),state:{oid:e.oid,path:e.name}},component:s.b,children:e.name})})]},e.oid)}))})]})})},Vc=function(){var e,t=fe().onError,n=Object(Y.i)(),a=Number(n.params.id),c=Number(n.params.userId),r=Object(d.b)().getQueryData([he.MUSIC,a]),i=Object(J.a)([he.MUSIC,a,he.REPOSITORY],function(e){return function(){return On.request(Xt,{id:e}).then((function(e){return e.music}))}}(a),{onError:t});return Object(be.jsxs)("div",{children:[Object(be.jsxs)("p",{children:["http://localhost/git/",c,"/",null===r||void 0===r?void 0:r.title,".git"]}),Object(be.jsx)("p",{children:"Files"}),Object(be.jsx)($c,{files:(null===(e=i.data)||void 0===e?void 0:e.rootTree)||[],treePath:"".concat(n.url,"/tree"),blobPath:"".concat(n.url,"/blob")})]})},Wc=function(){var e,t,n=fe().onError,a=Object(Y.h)(),c=Object(Y.i)(),r=Object(Y.g)().state.oid,i=Number(a.id),o=Object(J.a)([he.MUSIC,i,he.BLOB],function(e,t){return function(){return On.request(bn,{id:e,oid:t}).then((function(e){return e.music}))}}(i,r),{onError:n});return Object(be.jsxs)("div",{children:[Object(be.jsx)("pre",{children:null===(e=o.data)||void 0===e?void 0:e.blob}),Object(be.jsx)($c,{files:(null===(t=o.data)||void 0===t?void 0:t.tree)||[],treePath:c.url.replace("tree","blob"),blobPath:c.url.replace("tree","blob")})]})},Fc=n(1278),Kc=n(1258),Qc=function(){var e,t=fe().onError,n=Object(Y.h)(),a=Object(Y.g)().state.oid,c=Number(n.id),r=Object(J.a)([he.MUSIC,c,he.BLOB],function(e,t){return function(){return On.request(jn,{id:e,oid:t}).then((function(e){return e.music}))}}(c,a),{onError:t});return Object(be.jsx)(de.a,{children:Object(be.jsx)(Fc.a,{style:Kc.a,children:(null===(e=r.data)||void 0===e?void 0:e.blob)||""})})},zc=function(){var e=Object(Sn.d)({resolver:Object(Cn.a)(Pc)}),t=e.errors,n=e.control,a=e.handleSubmit,c=Object(Y.i)().url.replace("/new",""),r=Object(Y.h)(),i=Number(r.userId),o=Number(r.id),s=Object(j.c)(k),l=Object(Y.f)(),d=Object(j.b)(),u=fe().onError,b=Object(kn.a)((function(e){return function(e,t,n,a){return gn.a.post("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.ISSUES),n,a)}(i,o,e,s)}),{onSuccess:function(e){d(y(e.headers)),l.push("".concat(c,"/").concat(e.data.id))},onError:u}),O=b.isLoading,m=b.mutate;return Object(be.jsxs)("form",{onSubmit:a((function(e){return m(e)})),children:[Object(be.jsx)(wn,{name:"title",defaultValue:"",autoComplete:"on",label:"Title",variant:"outlined",margin:"normal",control:n,errors:t,disabled:O,fullWidth:!0}),Object(be.jsx)(wn,{name:"description",defaultValue:"",autoComplete:"on",label:"Description",variant:"outlined",margin:"normal",control:n,errors:t,disabled:O,rows:10,fullWidth:!0,multiline:!0}),Object(be.jsx)(Mn,{type:"submit",loading:O,children:"create issue"})]})},Yc=n(395),Gc=n.n(Yc),Hc=n(1279),Jc=n(255),Xc=["inline","className","children"],Zc=function(){var e=Object(Y.h)(),t=Number(e.id),n=fe().onError,a=Object(J.a)([he.ISSUE,t],function(e){return function(){return On.request(Yt,{id:e}).then((function(e){return e.issue}))}}(t),{onError:n}),c=a.data,r=a.isLoading,i={code:function(e){var t=e.inline,n=e.className,a=e.children,c=Object(yn.a)(e,Xc),r=/language-(\w+)/.exec(n||"");return!t&&r?Object(be.jsx)(Hc.a,Object(In.a)(Object(In.a)({style:Jc.dark,language:r[1],PreTag:"div"},c),{},{children:String(a).replace(/\n$/,"")})):Object(be.jsx)("code",Object(In.a)(Object(In.a)({className:n},c),{},{children:a}))}};return Object(be.jsxs)(be.Fragment,{children:[r&&Object(be.jsx)(le.a,{}),Object(be.jsx)(ee.a,{variant:"h3",children:null===c||void 0===c?void 0:c.title}),Object(be.jsx)(Gc.a,{components:i,children:(null===c||void 0===c?void 0:c.description)||""})]})},er=n(397),tr=n.n(er),nr=function(){var e,t,n,a=fe().onError,c=Object(Y.h)(),r=Number(c.id),i=Object(d.b)().getQueryData([he.MUSIC,r]),o=Object(J.a)([he.MUSIXMATCH,null===i||void 0===i?void 0:i.link.id],(function(){return e=null===i||void 0===i?void 0:i.link.musixmatch,rc.jsonp("track.lyrics.get",{params:{track_id:e}});var e}),{onError:a}),s=o.data;return o.isLoading?Object(be.jsx)(Ln.a,{}):Object(be.jsx)("div",{className:tr.a.lyric,children:(null===s||void 0===s||null===(e=s.message)||void 0===e||null===(t=e.body)||void 0===t||null===(n=t.lyrics)||void 0===n?void 0:n.lyrics_body)||""})},ar=n(1261),cr=n(1276),rr=n(1226),ir=n(1260),or=n(1288),sr=n(1259),lr=n(1286),dr=n(399),ur=n.n(dr),jr=n(400),br=n.n(jr),Or=n(401),mr=n.n(Or),hr=n(398),fr=n.n(hr),xr=function(e){var t=e.value;return e.muted||!t?Object(be.jsx)(fr.a,{}):t>=.6?Object(be.jsx)(ur.a,{}):t>=.3?Object(be.jsx)(br.a,{}):Object(be.jsx)(mr.a,{})};xr.defaultProps={value:void 0,muted:!1};var pr=function(e){var t=e.className,n=e.volume,a=e.muted,c=e.onMute,r=e.onVolume;return Object(be.jsx)(sr.a,{className:t,value:"",selected:a,onChange:function(){c&&c()},children:Object(be.jsxs)(Z.a,{width:200,display:"flex",alignItems:"center",children:[Object(be.jsx)(xr,{value:n,muted:a}),Object(be.jsx)(lr.a,{className:t,disabled:a,value:n,onClick:function(e){return e.stopPropagation()},onChange:r})]})})};pr.defaultProps={className:"",muted:!1,onVolume:void 0,onMute:void 0};var vr=pr,gr=n(403),Sr=n.n(gr),kr=n(402),Cr=n.n(kr),Ir=function(e){var t=e.className,n=e.paused,a=e.disabled,c=e.onPause;return Object(be.jsx)(sr.a,{className:t,value:"check",disabled:a,onClick:function(){a||c&&c()},children:n?Object(be.jsx)(Cr.a,{}):Object(be.jsx)(Sr.a,{})})};Ir.defaultProps={className:"",paused:!0,disabled:!1,onPause:void 0};var yr=Ir,Er=Object(Et.a)((function(e){return Object(rr.a)({appBar:{top:"auto",bottom:0},itunes:{color:e.palette.itunes.main},colorPrimary:{background:e.palette.itunes.light},barColorPrimary:{backgroundColor:e.palette.itunes.main}})})),Pr=function(e){var t=e.src,n=e.selectInput,a=e.onVolume,c=e.onPlay,r=e.onMute,i=Object(cr.a)({src:t||""}),o=Object(H.a)(i,3),s=o[0],l=o[1],d=o[2],u=Er();return Object(be.jsxs)(ir.a,{position:"fixed",color:"inherit",className:u.appBar,children:[s,Object(be.jsx)(le.a,{classes:{colorPrimary:u.colorPrimary,barColorPrimary:u.barColorPrimary},variant:"determinate",value:l.time/l.duration*100}),Object(be.jsx)(ar.a,{children:Object(be.jsx)(Z.a,{width:"100%",children:Object(be.jsxs)(Z.a,{display:"flex",justifyContent:"space-between",children:[Object(be.jsxs)(or.a,{children:[Object(be.jsx)(vr,{className:u.itunes,muted:l.muted,volume:100*l.volume,onVolume:function(e,t){Array.isArray(t)||a(t,d)},onMute:function(){return r(l,d)}}),Object(be.jsx)(yr,{className:u.itunes,paused:l.paused,onPause:function(){return c(l,d)}})]}),Object(be.jsx)(Z.a,{display:"flex",alignItems:"center",children:n})]})})})]})},Ur=Object(Et.a)((function(e){return Object(rr.a)({appBar:{top:"auto",bottom:0,color:"#191414"},spotify:{color:e.palette.spotify.main},colorPrimary:{background:e.palette.spotify.light},barColorPrimary:{backgroundColor:e.palette.spotify.main}})})),Ar=function(e){var t=e.src,n=e.selectInput,a=e.onVolume,c=e.onPlay,r=e.onMute,i=Object(cr.a)({src:t}),o=Object(H.a)(i,3),s=o[0],l=o[1],d=o[2],u=Object(j.c)(w),b=Ur();return Object(be.jsxs)(ir.a,{position:"fixed",color:"inherit",className:b.appBar,children:[s,Object(be.jsx)(le.a,{classes:{colorPrimary:b.colorPrimary,barColorPrimary:b.barColorPrimary},variant:"determinate",value:l.time/l.duration*100}),Object(be.jsx)(ar.a,{children:Object(be.jsx)(Z.a,{width:"100%",children:Object(be.jsxs)(Z.a,{display:"flex",justifyContent:"space-between",children:[Object(be.jsxs)(or.a,{children:[Object(be.jsx)(vr,{className:b.spotify,muted:l.muted,volume:100*l.volume,onVolume:function(e,t){Array.isArray(t)||a(t,d)},onMute:function(){return r(l,d)}}),Object(be.jsx)(yr,{className:b.spotify,paused:l.paused,onPause:function(){return c(l,d)},disabled:!u})]}),!u&&Object(be.jsx)(Ca,{}),Object(be.jsx)(Z.a,{display:"flex",alignItems:"center",children:n})]})})})]})},wr=function(e){var t=e.src,n=Object.entries(t).filter((function(e){return!!Object(H.a)(e,2)[1]})).map((function(e){return Object(H.a)(e,1)[0]})),c=Object(a.useState)(""),r=Object(H.a)(c,2),i=r[0],o=r[1],s=function(e){return o(e.target.value)},l=function(e,t){return e.muted?t.unmute():t.mute()},d=function(e,t){return e.paused?t.play():t.pause()},u=function(e,t){Array.isArray(e)||t.volume(e/100)};Object(a.useEffect)((function(){t&&o(n[0])}),[t]);var j=function(){return Object(be.jsx)(Z.a,{display:"flex",alignItems:"center",children:Object(be.jsx)(Sc.a,{value:i,onChange:s,children:n.map((function(e){return Object(be.jsx)(pc.a,{value:e,children:e},e)}))})})};return"itunes"===i?Object(be.jsxs)(be.Fragment,{children:[t.itunes&&Object(be.jsx)(Pr,{src:t.itunes,selectInput:Object(be.jsx)(j,{}),onMute:l,onVolume:u,onPlay:d}),Object(be.jsx)(ar.a,{})]}):"spotify"===i?Object(be.jsxs)(be.Fragment,{children:[t.spotify&&Object(be.jsx)(Ar,{src:t.spotify,selectInput:Object(be.jsx)(j,{}),onMute:l,onVolume:u,onPlay:d}),Object(be.jsx)(ar.a,{})]}):Object(be.jsx)(be.Fragment,{})},Lr=function(){var e,t,n,a,c,r,i,o,l,u,b,O,m,h=Object(Y.i)(),f=Number(h.params.id),x=Number(h.params.userId),p=Object(Y.g)(),v=fe().onError,g=Object(j.c)(S),C=Object(j.c)(k),I=Object(j.c)(w),E=Object(j.b)(),P=Object(d.b)(),U=Object(J.a)([he.MUSIC,f],function(e,t){return function(){return On.request(Jt,{id:e,currentUserId:t}).then((function(e){return e.music}))}}(f,null===g||void 0===g?void 0:g.id),{onError:v}),A=Object(J.a)([he.ITUNES,he.MUSIC,null===(e=U.data)||void 0===e||null===(t=e.link)||void 0===t?void 0:t.itunes],(function(){var e;return ke(null===(e=U.data)||void 0===e?void 0:e.link.itunes).then((function(e){return e.results[0]}))}),{enabled:!!(null===(n=U.data)||void 0===n||null===(a=n.link)||void 0===a?void 0:a.itunes),onError:v,retry:2}),L=Object(J.a)([he.SPOTIFY,he.MUSIC,null===(c=U.data)||void 0===c||null===(r=c.link)||void 0===r?void 0:r.spotify],(function(){var e;return function(e,t){return Ua.get("/tracks/".concat(e||""),{headers:Object(In.a)({},{Authorization:"Bearer ".concat(t||"")})}).then((function(e){return e.data}))}(null===(e=U.data)||void 0===e?void 0:e.link.spotify,null===I||void 0===I?void 0:I.access_token)}),{enabled:!!(null===(i=U.data)||void 0===i||null===(o=i.link)||void 0===o?void 0:o.spotify)&&!!I,onError:function(e){E(M()),v(e)},retry:2}),N=Object(kn.a)((function(){return function(e,t,n){return gn.a.post("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.BOOKMARKS),void 0,n)}(x,f,C)}),{onSuccess:function(e){E(y(e.headers)),P.setQueryData([he.MUSIC,f],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:v}),T=Object(kn.a)((function(){var e,t;return function(e,t,n,a){return gn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.BOOKMARKS,"/").concat(n||"undefined"),a)}(x,f,null===(e=U.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,C)}),{onSuccess:function(e){E(y(e.headers)),P.setQueryData([he.MUSIC,f],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:v});return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)(Mt,{children:[Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:11,children:Object(be.jsxs)(ee.a,{variant:"h5",children:[Object(be.jsx)(We.a,{}),null===(l=U.data)||void 0===l?void 0:l.title]})}),Object(be.jsx)(X.a,{item:!0,xs:1,children:Object(be.jsx)(ua,{count:null===(u=U.data)||void 0===u?void 0:u.bookmarksCount,bookmarked:!!(null===(b=U.data)||void 0===b?void 0:b.bookmark)||!1,onCreate:function(){return N.mutate()},onDestroy:function(){return T.mutate()}})})]}),Object(be.jsx)(Z.a,{height:"100px",width:"100px",m:"auto",children:A.data&&Object(be.jsx)(se.a,{src:A.data.artworkUrl100})}),Object(be.jsx)(Z.a,{my:3,children:Object(be.jsx)(Be.a,{variant:"contained",color:"primary",disabled:!!U.data&&!U.data.scoreExist,component:s.b,to:h.url+G.TAB,fullWidth:!0,disableElevation:!0,children:"Watch Tab"})}),Object(be.jsxs)(Za.a,{value:p.pathname.includes("issues")?h.url+G.ISSUES:p.pathname.includes("files")?h.url+G.FILES:p.pathname,children:[Object(be.jsx)(Xa.a,{label:"Info",value:h.url,component:s.b,to:h.url}),Object(be.jsx)(Xa.a,{label:"Files",value:h.url+G.FILES,component:s.b,to:h.url+G.FILES}),Object(be.jsx)(Xa.a,{label:"Lyric",value:h.url+G.LYRIC,component:s.b,to:h.url+G.LYRIC}),Object(be.jsx)(Xa.a,{label:"Issues",value:h.url+G.ISSUES,component:s.b,to:h.url+G.ISSUES}),Object(be.jsx)(Xa.a,{label:"Setting",value:h.url+G.SETTING,component:s.b,to:h.url+G.SETTING,disabled:(null===g||void 0===g?void 0:g.id)!==Number(h.params.userId)})]}),Object(be.jsxs)(Y.c,{children:[Object(be.jsx)(Y.a,{exact:!0,path:h.path,component:Lc}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.FILES,component:Vc}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.SETTING,component:Mc}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.LYRIC,component:nr}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.FILES,component:Vc}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(h.path+G.FILES+G.TREE,"/:filename"),component:Wc}),Object(be.jsx)(Y.a,{strict:!0,path:"".concat(h.path+G.FILES+G.BLOB,"/:filename"),component:Qc}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.ISSUES,component:Rc}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.ISSUES+G.NEW,component:zc}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(h.path).concat(G.ISSUES,"/:id"),component:Zc})]})]}),Object(be.jsx)(wr,{src:{itunes:null===(O=A.data)||void 0===O?void 0:O.previewUrl,spotify:null===(m=L.data)||void 0===m?void 0:m.preview_url}})]})},Nr=function(){var e,t,n,c=Tt(),r=Object(H.a)(c,2),i=r[0],o=r[1],s=aa(),l=Object(H.a)(s,3),u=l[0],b=l[1],O=l[2],m=Object(a.useState)(),h=Object(H.a)(m,2),f=h[0],x=h[1],p=Object(Sn.d)(),v=p.errors,g=p.control,C=p.watch,I=p.register,E=p.setValue,P=p.handleSubmit,U=C().title,A=Object(Ka.a)(U,1e3),w=Object(H.a)(A,2),L=w[0],N=w[1].isPending,M=Object(j.b)(),T=Object(j.c)(S),R=Object(j.c)(k),B=Object(Y.f)(),q=Object(Y.i)(),D=Number(q.params.id),_="".concat(G.USERS,"/").concat((null===T||void 0===T?void 0:T.id)||"undefinde").concat(G.MUSICS),$=fe().onError,V=Object(d.b)(),W=Object(kn.a)((function(e){return function(e,t,n){return gn.a.post("".concat(G.USERS,"/").concat(e||"undefined").concat(G.MUSICS),t,n)}(null===T||void 0===T?void 0:T.id,e,R)}),{onSuccess:function(e){M(y(e.headers)),B.push("".concat(_,"/").concat(e.data.id)),V.setQueryData([he.MUSIC,D],e.data),f&&V.setQueryData([he.ITUNES,he.MUSIC,f.trackId],f)},onError:$}),F=Object(J.a)([he.MUSICS,{page:i,query:L}],mn(i,{title_eq:L}),{enabled:!N()&&!!L,onError:$});return Object(a.useEffect)((function(){if(I("link_attributes.itunes"),f){var e=f.trackCensoredName,t=f.trackId;E("title",e),E("link_attributes.itunes",t)}}),[I,f,E]),Object(be.jsx)(Mt,{children:Object(be.jsx)(de.a,{children:Object(be.jsxs)(Z.a,{p:3,children:[Object(be.jsx)(Z.a,{height:"100px",width:"100px",m:"auto",children:Object(be.jsx)(se.a,{src:(null===f||void 0===f?void 0:f.artworkUrl100)||"undefiend"})}),Object(be.jsx)(wn,{name:"title",defaultValue:"",autoComplete:"on",label:"Title",variant:"outlined",control:g,errors:v,disabled:W.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(be.jsx)(Qn,{color:"inherit",size:20,loading:F.isLoading})}}),Object(be.jsx)(Qa,{disabled:!L,onClick:b,fullWidth:!0,disableElevation:!0}),Object(be.jsx)(ac,{defaultValue:L,open:u,onClose:O,onSelect:function(e){return x(e)}}),Object(be.jsx)(Ga,{data:null===(e=F.data)||void 0===e?void 0:e.data,children:Object(be.jsx)(Ce,{musics:(null===(t=F.data)||void 0===t?void 0:t.data)||[],page:i,pageCount:null===(n=F.data)||void 0===n?void 0:n.pagination.totalPages,onPage:o,loading:F.isLoading})}),Object(be.jsx)(Mn,{color:"primary",loading:W.isLoading,disabled:!L,onClick:P((function(e){return W.mutate(e)})),fullWidth:!0,children:"Create Music"})]})})})},Mr=n(404),Tr=n.n(Mr),Rr=n(131),Br=n(1263),qr=n(409),Dr=n.n(qr),_r=function(e){var t=e.title,n=e.artist;return Object(be.jsxs)(Z.a,{className:"SongInfo",display:"flex",alignItems:"center",height:"100%",children:[Object(be.jsx)(Z.a,{className:"at-song-title",mx:3,children:Object(be.jsx)(ee.a,{variant:"body1",children:t})}),"-",Object(be.jsx)(Z.a,{className:"at-song-artist",mx:3,children:Object(be.jsx)(ee.a,{variant:"body2",children:n})})]})},$r=n(405),Vr=n.n($r),Wr=function(e){var t=e.className,n=e.disabled,a=e.onStop;return Object(be.jsx)(sr.a,{className:t,value:"check",disabled:n,onClick:function(){n||a&&a()},children:Object(be.jsx)(Vr.a,{})})};Wr.defaultProps={className:"",disabled:!1,onStop:void 0};var Fr=Wr,Kr=n(406),Qr=n.n(Kr),zr=function(e){var t=e.className,n=e.selected,a=e.onClick;return Object(be.jsx)(sr.a,{className:t,value:"check",selected:n,onClick:a,children:Object(be.jsx)(Qr.a,{})})};zr.defaultProps={className:"",selected:!1,onClick:void 0};var Yr=zr,Gr=n(407),Hr=n.n(Gr),Jr=function(e){var t=e.className,n=e.selected,a=e.onClick;return Object(be.jsx)(sr.a,{className:t,value:"check",selected:n,onClick:a,children:Object(be.jsx)(Hr.a,{})})};Jr.defaultProps={className:"",selected:!1,onClick:void 0};var Xr=Jr,Zr=n(408),ei=function(e){var t=e.className,n=e.selected,a=e.onClick;return Object(be.jsx)(sr.a,{value:"check",className:t,selected:n,onClick:a,children:Object(be.jsx)(Zr.a,{size:24})})};ei.defaultProps={className:"",selected:!1,onClick:void 0};var ti=ei,ni=n(1284),ai=n(1248),ci=function(e){var t=e.onLayout,n=e.layout;return Object(be.jsxs)(ai.a,{className:"Layout",children:[Object(be.jsx)(ni.a,{id:"layout-select-label",children:"Layout"}),Object(be.jsxs)(Sc.a,{id:"layout-select",labelId:"layout-select-label",value:n,onChange:t,autoWidth:!0,children:[Object(be.jsx)(pc.a,{value:0,children:"Horizontal"}),Object(be.jsx)(pc.a,{value:1,children:"Page"})]})]})};ci.defaultProps={layout:0,onLayout:void 0};var ri=ci,ii=function(e){var t=e.zoom,n=e.onZoom,a=[25,50,75,90,100,110,125,150,200].map((function(e){return Object(be.jsxs)(pc.a,{value:e,children:[e,"%"]},e)}));return Object(be.jsxs)(ai.a,{className:"Zoom",children:[Object(be.jsx)(ni.a,{id:"zoom-select-label",children:"Zoom"}),Object(be.jsx)(Sc.a,{id:"zoom-select",labelId:"zoom-select-label",value:t,onChange:n,children:a})]})};ii.defaultProps={zoom:100,onZoom:void 0};var oi=ii,si=function(e){var t=e.alphaTabApi,n=Rr.LayoutMode.Horizontal,c=Rr.LayoutMode.Page,r=Object(a.useState)(""),i=Object(H.a)(r,2),o=i[0],s=i[1],l=Object(a.useState)(""),d=Object(H.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(100),O=Object(H.a)(b,2),m=O[0],h=O[1],f=Object(a.useState)(!0),x=Object(H.a)(f,2),p=x[0],v=x[1],g=Object(a.useState)(!0),S=Object(H.a)(g,2),k=S[0],C=S[1],I=Object(Br.a)(!1),y=Object(H.a)(I,2),E=y[0],P=y[1],U=Object(Br.a)(!1),A=Object(H.a)(U,2),w=A[0],L=A[1],N=Object(Br.a)(!1),M=Object(H.a)(N,2),T=M[0],R=M[1],B=Object(Br.a)(!1),q=Object(H.a)(B,2),D=q[0],_=q[1],$=Object(a.useState)(c),V=Object(H.a)($,2),W=V[0],F=V[1],K=Object(a.useState)(100),Q=Object(H.a)(K,2),z=Q[0],G=Q[1],J=Object(Y.f)(),ee=function(){return C(!1)},te=function(e){var t=e.state;return v(0===t)},ne=function(e){s(e.title),j(e.artist)};return Object(a.useEffect)((function(){return null===t||void 0===t||t.scoreLoaded.on(ne),null===t||void 0===t||t.playerReady.on(ee),null===t||void 0===t||t.playerStateChanged.on(te),function(){null===t||void 0===t||t.scoreLoaded.off(ne),null===t||void 0===t||t.playerReady.off(ee),null===t||void 0===t||t.playerStateChanged.off(te)}}),[t]),Object(be.jsx)(be.Fragment,{children:Object(be.jsxs)(ir.a,{className:"Header",position:"fixed",color:"default",children:[Object(be.jsx)(ar.a,{children:Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:1,children:Object(be.jsx)(Ue.a,{onClick:function(){return J.goBack()},children:Object(be.jsx)(Dr.a,{})})}),Object(be.jsx)(X.a,{className:"at-controls-left",item:!0,xs:3,children:Object(be.jsx)(_r,{title:o,artist:u})}),Object(be.jsx)(X.a,{item:!0,xs:5,children:Object(be.jsx)(Z.a,{display:"flex",justifyContent:"center",children:Object(be.jsxs)(or.a,{children:[Object(be.jsx)(Fr,{onStop:function(){return null===t||void 0===t?void 0:t.stop()}}),Object(be.jsx)(yr,{paused:p,disabled:k,onPause:function(){return null===t||void 0===t?void 0:t.playPause()}}),Object(be.jsx)(vr,{volume:m,muted:E,onMute:function(){t&&(P(),0===t.masterVolume?t.masterVolume=m/100:t.masterVolume=0)},onVolume:function(e,n){t&&(Array.isArray(n)||(t.masterVolume=n/100,h(n)))}}),Object(be.jsx)(Yr,{selected:w,onClick:function(){t&&(L(),t.countInVolume=w?0:1)}}),Object(be.jsx)(Xr,{selected:T,onClick:function(){t&&(R(),t.isLooping=!T)}}),Object(be.jsx)(ti,{selected:D,onClick:function(){t&&(_(),t.metronomeVolume=D?0:1)}})]})})}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsxs)(X.a,{className:"at-controls-right",container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:6}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(oi,{zoom:z,onZoom:function(e){if(t){G(e.target.value);var n=parseInt(e.target.value,10)/100;t.settings.display.scale=n,t.updateSettings(),t.render()}}})}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(ri,{layout:W,onLayout:function(e){if(t){switch(e.target.value){case n:F(n),t.settings.display.layoutMode=n;break;case c:F(c),t.settings.display.layoutMode=c}t.updateSettings(),t.render()}}})})]})})]})}),k&&Object(be.jsx)(le.a,{})]})})};si.defaultProps={alphaTabApi:void 0};var li=si,di=n(1250),ui=n(1192),ji=n(1264),bi=n(1265),Oi=function(e){var t=e.color;return Object(be.jsx)(ye.a,{color:t,children:Object(be.jsx)(Ee.a,{})})},mi=(new Rr.model.Track,function(e){var t=e.track,n=e.selectedIndex,c=e.i,r=e.onListItemClick,i=e.onMute,o=e.onSolo,s=Object(a.useState)(!1),l=Object(H.a)(s,2),d=l[0],u=l[1],j=Object(a.useState)(!1),b=Object(H.a)(j,2),O=b[0],m=b[1],h=n===c;return Object(be.jsxs)(ui.a,{id:"at-track-template",button:!0,selected:h,onClick:function(){r&&r(t,c)},children:[Object(be.jsx)(ji.a,{children:Object(be.jsx)(Oi,{color:h?"primary":"inherit"})}),Object(be.jsx)(bi.a,{primary:t.name,secondary:Object(be.jsxs)(or.a,{children:[Object(be.jsx)(sr.a,{size:"small",selected:d,onClick:function(e){e.stopPropagation(),i&&i(d,t),u(!d)},children:"M"}),Object(be.jsx)(sr.a,{size:"small",selected:O,onClick:function(e){e.stopPropagation(),o&&o(O,t),m(!O)},children:"S"})]})})]},t.name)}),hi=function(e){var t=e.tracks,n=e.selectedIndex,a=e.onListItemClick,c=e.onSolo,r=e.onMute;return Object(be.jsx)(di.a,{className:"at-track-list",component:de.a,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(be.jsx)(mi,{track:e,selectedIndex:n,i:t,onListItemClick:a,onSolo:c,onMute:r},e.index)}))})};hi.defaultProps={tracks:[],selectedIndex:0,onMute:void 0,onSolo:void 0,onListItemClick:void 0};var fi=hi,xi=n(410),pi=n.n(xi),vi={tex:!0,player:{enablePlayer:!0,soundFont:"https://cdn.jsdelivr.net/npm/@coderline/alphatab@latest/dist/soundfont/sonivox.sf2"}},gi=(new Rr.model.Score,function(){var e=Object(a.useState)([]),t=Object(H.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(0),i=Object(H.a)(r,2),s=i[0],l=i[1],d=Object(a.useState)(),u=Object(H.a)(d,2),j=u[0],b=u[1],O=Object(a.useRef)(null),m=Object(o.b)().enqueueSnackbar,h=fe().onError,f=Tr()({src:"https://cdn.jsdelivr.net/npm/@coderline/alphatab@latest/dist/alphaTab.js"}),x=Object(H.a)(f,2),p=x[0],v=x[1],g=Object(Y.i)(),S=Number(g.params.id);Object(J.a)([he.MUSIC,S,he.SCORE],function(e){return function(){return On.request(Zt,{id:e}).then((function(e){return e.music}))}}(S),{onSuccess:function(e){return null===j||void 0===j?void 0:j.tex(e.score)},onError:h,enabled:p});var k=function(e){return c(e.tracks)},C=Object(a.useCallback)((function(){j&&l(j.tracks[0].index)}),[j]);return Object(a.useEffect)((function(){!p&&O.current&&b(new window.alphaTab.AlphaTabApi(O.current,vi))}),[p]),Object(a.useEffect)((function(){return null===j||void 0===j||j.renderStarted.on(C),null===j||void 0===j||j.scoreLoaded.on(k),function(){null===j||void 0===j||j.renderStarted.off(C),null===j||void 0===j||j.scoreLoaded.off(k),null===j||void 0===j||j.destroy()}}),[j,null===j||void 0===j?void 0:j.renderStarted,null===j||void 0===j?void 0:j.scoreLoaded,C]),Object(a.useEffect)((function(){v&&m(v.type,{variant:"error"})}),[m,v]),Object(be.jsxs)(Z.a,{className:"at-wrap",position:"relative",display:"flex",flexDirection:"column",height:"93vh",overflow:"hidden",children:[Object(be.jsx)(li,{alphaTabApi:j}),Object(be.jsxs)(Z.a,{className:"at-content",position:"relative",overflow:"hidden",flexGrow:1,children:[Object(be.jsx)(Z.a,{className:pi.a.atSidebar,position:"absolute",top:"0",left:"0",bottom:"0",zIndex:1001,display:"flex",alignContent:"stretch",width:"auto",maxWidth:"60px",overflow:"hidden",border:1,borderLeft:0,borderTop:0,borderBottom:0,borderColor:"divider",children:Object(be.jsx)(fi,{tracks:n,selectedIndex:s,onMute:function(e,t){return null===j||void 0===j?void 0:j.changeTrackMute([t],!e)},onSolo:function(e,t){return null===j||void 0===j?void 0:j.changeTrackSolo([t],!e)},onListItemClick:function(e,t){l(t),null===j||void 0===j||j.renderTracks([e])}})}),Object(be.jsx)(Z.a,{className:"at-viewport",overflow:"auto",position:"absolute",top:0,left:70,right:0,bottom:0,pr:3,children:Object(be.jsx)("div",{ref:O,className:"at-main"})})]})]})}),Si=function(){var e=Object(a.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],r=Object(Vn.useDebounce)(n,1e3),i=Object(H.a)(r,2),o=i[0],s=i[1].isPending,l=Tt(),d=Object(H.a)(l,2),u=d[0],j=d[1],b=fe().onError,O=Object(J.a)([he.BANDS,u,o],hn(u,{name_cont:o}),{onError:b}),m=O.isLoading,h=O.data;return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Yn,{onChange:function(e){return c(e.target.value)},loading:m||s()}),Object(be.jsx)(Ne,{bands:(null===h||void 0===h?void 0:h.data)||[],loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:j})]})},ki=function(){var e,t,n=Object(a.useState)(""),c=Object(H.a)(n,2),r=c[0],i=c[1],o=aa(),l=Object(H.a)(o,3),u=l[0],b=l[1],O=l[2],m=uc()(r,1e3),h=Object(H.a)(m,2),f=h[0],x=h[1].isPending,p=Object(Sn.d)(),v=p.register,g=p.handleSubmit,S=p.setValue,C=Object(Y.i)(),I=Number(C.params.id),E=C.url+G.ARTISTS,P=Object(j.b)(),U=Object(j.c)(k),A=fe().onError,w=Object(d.b)(),L=w.getQueryData([he.BAND,I]),N=Object(kn.a)((function(e){return gn.a.post(E,e,U)}),{onSuccess:function(e){P(y(e.headers)),w.setQueryData([he.BAND,I],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{artists:[].concat(Object(ze.a)(t.artists||[]),[e.data.artist])})}))},onError:A}),M=Object(kn.a)((function(e){return gn.a.delete("".concat(E,"/").concat(e.id),U)}),{onSuccess:function(e,t){P(y(e.headers)),w.setQueryData([he.BAND,I],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{artists:e.artists&&e.artists.filter((function(e){return e!==t}))})}))},onError:A}),T=Object(J.a)([he.ARTISTS,{query:f}],fn(1,{name_cont:f}),{enabled:!!f,onError:A});return Object(a.useEffect)((function(){v("artist_id")}),[v]),Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{onClick:b,children:"Edit"}),Object(be.jsxs)(ba.a,{onClose:O,open:u,fullWidth:!0,children:[Object(be.jsx)(Oa.a,{children:"Edit Albums"}),Object(be.jsxs)(Nt.a,{children:[Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Artist"}),Object(be.jsx)(ae.a,{align:"right",children:"Delete"})]})}),Object(be.jsx)(ne.a,{children:null===L||void 0===L||null===(e=L.artists)||void 0===e?void 0:e.map((function(e){return Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"/",children:e.name})}),Object(be.jsx)(ae.a,{align:"right",children:Object(be.jsx)(Ue.a,{onClick:function(){return M.mutate(e)},children:Object(be.jsx)(gc.a,{})})})]},e.id)}))})]})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Oc,{maxLength:1,onSelectOption:function(e){return S("artist_id",e.id)},onRemoveOption:function(){return S("artist_id","")},textFieldProps:{label:"Artist",variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,options:(null===(t=T.data)||void 0===t?void 0:t.data)||[],inputValue:r,loading:N.isLoading||M.isLoading||x(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t,n){return"input"===n&&i(t)}}})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Mn,{color:"primary",loading:N.isLoading,onClick:g((function(e){return N.mutate(e)})),fullWidth:!0,children:"Add Artist"})})]})]})]})},Ci=function(){var e,t,n,a,c,r,i,o,s,l,u,b,O,m,h,f,x,p=Tt(),v=Object(H.a)(p,2),g=v[0],C=v[1],I=Tt(),E=Object(H.a)(I,2),P=E[0],U=E[1],A=Object(Y.h)(),w=Number(A.id),L=fe().onError,N=Object(j.c)(k),M=Object(j.c)(S),T=Object(j.b)(),R=Object(d.b)(),B=Object(J.a)([he.BAND,w],function(e,t){return function(){return On.request(Kt,{id:e,currentUserId:t}).then((function(e){return e.band}))}}(w,null===M||void 0===M?void 0:M.id),{onError:L}),q=Object(J.a)([he.BAND,w,he.ALBUMS,g],function(e,t){return function(){return On.request(Qt,{id:e,albumPage:t}).then((function(e){return e.band.albums}))}}(w,g),{onError:L}),D=Object(J.a)([he.BAND,w,he.MUSICS,P],function(e,t){return function(){return On.request(zt,{id:e,musicPage:t}).then((function(e){return e.band.musics}))}}(w,P),{onError:L}),_=Object(J.a)([he.ITUNES,he.BAND,null===(e=B.data)||void 0===e?void 0:e.link.itunes],(function(){var e;return ge(null===(e=B.data)||void 0===e?void 0:e.link.itunes).then((function(e){return e.results[0]}))}),{enabled:!!(null===(t=B.data)||void 0===t?void 0:t.link.itunes),onError:L}),$=Object(J.a)([he.WIKIPEDIA,null===(n=B.data)||void 0===n?void 0:n.link.wikipedia],(function(){var e;return Va(null===(e=B.data)||void 0===e?void 0:e.link.wikipedia)}),{enabled:!!(null===(a=B.data)||void 0===a?void 0:a.link.wikipedia),onError:L}),V=Object(kn.a)((function(){return function(e,t){return gn.a.post("".concat(G.BANDS,"/").concat(e).concat(G.BOOKMARKS),void 0,t)}(w,N)}),{onSuccess:function(e){T(y(e.headers)),R.setQueryData([he.BAND,w],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:L}),W=Object(kn.a)((function(){var e,t;return function(e,t,n){return gn.a.delete("".concat(G.BANDS,"/").concat(e).concat(G.BOOKMARKS,"/").concat(t||"undefined"),n)}(w,null===(e=B.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,N)}),{onSuccess:function(e){T(y(e.headers)),R.setQueryData([he.BAND,w],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:L}),F=Object(kn.a)((function(e){var t;return function(e,t,n,a){return gn.a.patch("".concat(G.BANDS,"/").concat(e).concat(G.LINKS,"/").concat(t||"undefined"),n,Object(In.a)({},a))}(w,null===(t=B.data)||void 0===t?void 0:t.link.id,e,N)}),{onSuccess:function(e){T(y(e.headers)),R.setQueryData([he.BAND,w],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{link:e.data})}))},onError:L}),K=function(e){return F.mutate({itunes:e.artistId})},Q=function(e){return F.mutate({wikipedia:e.pageid})},z=function(e){return F.mutate({spotify:e.id})},te=function(e){return F.mutate({twitter:e})};return Object(be.jsxs)(Mt,{children:[Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:11,children:Object(be.jsxs)(ee.a,{variant:"h5",children:[Object(be.jsx)(Ke.a,{}),null===(c=B.data)||void 0===c?void 0:c.name]})}),Object(be.jsx)(X.a,{item:!0,xs:1,children:Object(be.jsx)(ua,{count:null===(r=B.data)||void 0===r?void 0:r.bookmarksCount,bookmarked:!!(null===(i=B.data)||void 0===i?void 0:i.bookmark)||!1,onCreate:function(){return V.mutate()},onDestroy:function(){return W.mutate()}})})]}),Object(be.jsx)(Z.a,{children:null===(o=$.data)||void 0===o?void 0:o.extract}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(ra,{twitter:{link:null===(s=B.data)||void 0===s?void 0:s.link.twitter,renderDialog:function(e,t){var n;return Object(be.jsx)(Da,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.link.twitter,open:e,loading:F.isLoading,onClose:t,onPatch:te})}},itunes:{link:(null===(l=_.data)||void 0===l?void 0:l.artistLinkUrl)||"",renderDialog:function(e,t){var n;return Object(be.jsx)(fa,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:K,showSearchBar:!0})}},wikipedia:{link:null===(u=B.data)||void 0===u?void 0:u.link.wikipedia,renderDialog:function(e,t){var n;return Object(be.jsx)(Wa,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:Q,showSearchBar:!0})}},spotify:{type:"artist",link:null===(b=B.data)||void 0===b?void 0:b.link.spotify,renderDialog:function(e,t){var n;return Object(be.jsx)(Ba,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:z,showSearchBar:!0})}}})}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(ki,{}),Object(be.jsx)(Le,{artists:null===(O=B.data)||void 0===O?void 0:O.artists,loading:B.isLoading})]}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Ce,{musics:(null===(m=D.data)||void 0===m?void 0:m.data)||[],loading:D.isLoading,page:P,pageCount:null===(h=D.data)||void 0===h?void 0:h.pagination.totalPages,onPage:U})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Ie,{albums:(null===(f=q.data)||void 0===f?void 0:f.data)||[],loading:B.isLoading,page:g,pageCount:null===(x=q.data)||void 0===x?void 0:x.pagination.totalPages,onPage:C})})]})},Ii=function(){var e,t,n,c=Tt(),r=Object(H.a)(c,2),i=r[0],o=r[1],s=aa(),l=Object(H.a)(s,3),u=l[0],b=l[1],O=l[2],m=Object(a.useState)(),h=Object(H.a)(m,2),f=h[0],x=h[1],p=Object(Sn.d)(),v=p.errors,g=p.control,S=p.setValue,C=p.watch,I=p.register,E=p.handleSubmit,P=C().name,U=Object(Ka.a)(P,1e3),A=Object(H.a)(U,1)[0],w=Object(Y.f)(),L=Object(Y.i)(),N=Object(j.b)(),M=Object(j.c)(k),T=fe().onError,R=Object(d.b)(),B=Object(kn.a)((function(e){return function(e,t){return gn.a.post(G.BANDS,e,t)}(e,M)}),{onSuccess:function(e){N(y(e.headers)),w.push("".concat(G.BANDS,"/").concat(e.data.id)),R.setQueryData([he.BAND,Number(L.params.id),{musicPage:1,albumPage:1}],e.data),f&&R.setQueryData([he.ITUNES,he.ARTIST,f.artistId],f)},onError:T}),q=Object(J.a)([he.BANDS,{page:i,query:A}],hn(i,{name_eq:A}),{enabled:!!A,onError:T});return Object(a.useEffect)((function(){if(I("link_attributes.itunes"),f){var e=f.artistName,t=f.artistId;S("link_attributes.itunes",t),S("name",e)}}),[I,f,S]),Object(be.jsx)(Mt,{children:Object(be.jsx)(de.a,{children:Object(be.jsxs)(Z.a,{p:3,children:[Object(be.jsx)(wn,{name:"name",defaultValue:"",autoComplete:"on",label:"Name",variant:"outlined",control:g,errors:v,disabled:B.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(be.jsx)(Qn,{color:"inherit",size:20,loading:B.isLoading})}}),Object(be.jsx)(Qa,{onClick:b,disabled:!P,fullWidth:!0,disableElevation:!0}),Object(be.jsx)(fa,{defaultValue:P,open:u,onClose:O,onSelect:function(e){return x(e)}}),Object(be.jsx)(Ga,{data:null===(e=q.data)||void 0===e?void 0:e.data,children:Object(be.jsx)(Ne,{bands:(null===(t=q.data)||void 0===t?void 0:t.data)||[],page:i,pageCount:null===(n=q.data)||void 0===n?void 0:n.pagination.totalPages,onPage:o,loading:q.isLoading})}),Object(be.jsx)(Mn,{color:"primary",loading:B.isLoading,disabled:!P,onClick:E((function(e){return B.mutate(e)})),fullWidth:!0,children:"Create Band"})]})})})},yi=function(e){var t=e.users,n=e.page,a=e.pageCount,c=e.onPage,r=e.loading;return Object(be.jsx)(me,{page:n,pageCount:a,onPage:c,loading:r,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Name"}),Object(be.jsx)(ae.a,{})]})}),Object(be.jsx)(ne.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"".concat(G.USERS,"/").concat(e.id),children:e.nickname})}),Object(be.jsx)(ae.a,{children:Object(be.jsx)(we,{href:"https://twitter.com/".concat(e.link.twitter),children:Object(be.jsx)(Pe,{})})})]},e.id)}))})]})})},Ei=function(){var e=Object(a.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],r=Object(Vn.useDebounce)(n,1e3),i=Object(H.a)(r,2),o=i[0],s=i[1].isPending,l=Tt(),d=Object(H.a)(l,2),u=d[0],j=d[1],b=fe().onError,O=Object(J.a)([he.USERS,u,o],function(e,t){return function(){return On.request(un,{page:e,q:t}).then((function(e){return e.users}))}}(u,{nickname_cont:o}),{onError:b}),m=O.isLoading,h=O.data;return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Yn,{onChange:function(e){return c(e.target.value)},loading:m||s()}),Object(be.jsx)(yi,{users:null===h||void 0===h?void 0:h.data,loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:j})]})},Pi=["followed","onFollow","onUnfollow"],Ui=function(e){var t=e.followed,n=e.onFollow,a=e.onUnfollow,c=Object(yn.a)(e,Pi);return t?Object(be.jsx)(Be.a,Object(In.a)(Object(In.a)({onClick:a},c),{},{children:"UnFollow"})):Object(be.jsx)(Be.a,Object(In.a)(Object(In.a)({onClick:n},c),{},{children:"Follow"}))},Ai=function(){var e,t,n=Tt(),a=Object(H.a)(n,2),c=a[0],r=a[1],i=Object(Y.h)(),o=Number(i.id),s=Object(J.a)([he.USER,o,he.MUSICS,c],function(e,t){return function(){return On.request(ln,{id:e,musicPage:t}).then((function(e){return e.user.musics}))}}(o,c));return Object(be.jsx)(Ce,{musics:(null===(e=s.data)||void 0===e?void 0:e.data)||[],loading:s.isLoading,pageCount:null===(t=s.data)||void 0===t?void 0:t.pagination.totalPages,page:c,onPage:r})},wi=function(){var e=fe().onError,t=Object(Y.h)(),n=Number(t.id),a=Object(j.c)(k),c=Object(d.b)(),r=Object(J.a)([he.USER,n,he.PROFILE],function(e){return function(){return On.request(dn,{id:e}).then((function(e){return e.user}))}}(n)),i=r.isLoading,o=r.data,s=c.getQueryData([he.USER,n,he.PROFILE]),l=Object(kn.a)((function(e){return function(e,t,n,a){return gn.a.patch("".concat(G.USERS,"/").concat(e).concat(G.LINKS,"/").concat(t||"undefined"),{twitter:n},Object(In.a)({},a))}(n,null===o||void 0===o?void 0:o.link.id,e,a)}),{onSuccess:function(e){c.setQueryData([he.USER,n,he.PROFILE],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{link:e.data})}))},onError:e}),u=function(e){return l.mutate(e)};return Object(be.jsx)(be.Fragment,{children:Object(be.jsx)(Z.a,{my:3,children:Object(be.jsx)(ra,{loading:i,twitter:{link:null===o||void 0===o?void 0:o.link.twitter,renderDialog:function(e,t){return Object(be.jsx)(Da,{defaultValue:null===s||void 0===s?void 0:s.link.twitter,open:e,loading:l.isLoading,onClose:t,onPatch:u})}}})})})},Li=function(){var e,t,n,a,c,r,i,o,s=Tt(),l=Object(H.a)(s,2),d=l[0],u=l[1],j=Tt(),b=Object(H.a)(j,2),O=b[0],m=b[1],h=Tt(),f=Object(H.a)(h,2),x=f[0],p=f[1],v=Tt(),g=Object(H.a)(v,2),S=g[0],k=g[1],C=Object(Y.h)(),I=Number(C.id),y=Object(J.a)([he.USER,I,he.BOOKMARKS,he.MUSICS,d],function(e,t){return function(){return On.request(rn,{id:e,bookmarkedMusicPage:t}).then((function(e){return e.user.bookmarkedMusics}))}}(I,d)),E=Object(J.a)([he.USER,I,he.BOOKMARKS,he.BANDS,x],function(e,t){return function(){return On.request(cn,{id:e,bookmarkedBandPage:t}).then((function(e){return e.user.bookmarkedBands}))}}(I,x)),P=Object(J.a)([he.USER,I,he.BOOKMARKS,he.ARTISTS,O],function(e,t){return function(){return On.request(an,{id:e,bookmarkedArtistPage:t}).then((function(e){return e.user.bookmarkedArtists}))}}(I,O)),U=Object(J.a)([he.USER,I,he.BOOKMARKS,he.ALBUMS,S],function(e,t){return function(){return On.request(nn,{id:e,bookmarkedAlbumPage:t}).then((function(e){return e.user.bookmarkedAlbums}))}}(I,S));return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Ce,{musics:(null===(e=y.data)||void 0===e?void 0:e.data)||[],pageCount:null===(t=y.data)||void 0===t?void 0:t.pagination.totalPages,loading:y.isLoading,page:d,onPage:u}),Object(be.jsx)(Ne,{bands:(null===(n=E.data)||void 0===n?void 0:n.data)||[],pageCount:null===(a=E.data)||void 0===a?void 0:a.pagination.totalPages,loading:E.isLoading,page:x,onPage:p}),Object(be.jsx)(Le,{artists:null===(c=P.data)||void 0===c?void 0:c.data,pageCount:null===(r=P.data)||void 0===r?void 0:r.pagination.totalPages,loading:P.isLoading,page:O,onPage:m}),Object(be.jsx)(Ie,{albums:(null===(i=U.data)||void 0===i?void 0:i.data)||[],pageCount:null===(o=U.data)||void 0===o?void 0:o.pagination.totalPages,loading:U.isLoading,page:S,onPage:k})]})},Ni=function(){var e=fe().onError,t=Object(j.b)(),n=Object(j.c)(S),a=Object(j.c)(k),c=Object(Sn.d)({resolver:Object(Cn.a)(Ec)}),r=c.errors,i=c.control,o=c.handleSubmit,s=Object(kn.a)((function(e){return function(e,t,n){return gn.a.patch("".concat(G.USERS,"/").concat(e||"undefined"),t,n)}(null===n||void 0===n?void 0:n.id,e,a)}),{onSuccess:function(e){t(I(e.data)),t(y(e.headers))},onError:e}),l=s.isLoading,d=s.mutate;return Object(be.jsxs)("form",{onSubmit:o((function(e){return d(e)})),children:[Object(be.jsx)(ee.a,{variant:"h5",color:"initial",children:"Setting"}),Object(be.jsx)(wn,{name:"email",defaultValue:null===n||void 0===n?void 0:n.email,label:"Email",variant:"outlined",margin:"normal",control:i,errors:r,disabled:l,fullWidth:!0}),Object(be.jsx)(wn,{name:"nickname",defaultValue:null===n||void 0===n?void 0:n.nickname,label:"NickName",variant:"outlined",margin:"normal",control:i,errors:r,disabled:l,fullWidth:!0}),Object(be.jsx)(wn,{name:"familyname",defaultValue:null===n||void 0===n?void 0:n.familyname,label:"FamilyName",variant:"outlined",margin:"normal",control:i,errors:r,disabled:l,fullWidth:!0}),Object(be.jsx)(wn,{name:"givenname",defaultValue:null===n||void 0===n?void 0:n.givenname,label:"GivenName",variant:"outlined",margin:"normal",control:i,errors:r,disabled:l,fullWidth:!0}),Object(be.jsx)(wn,{name:"introduction",defaultValue:null===n||void 0===n?void 0:n.introduction,label:"Introduction",variant:"outlined",margin:"normal",control:i,errors:r,disabled:l,rows:10,fullWidth:!0,multiline:!0}),Object(be.jsx)(Mn,{type:"submit",loading:l,color:"primary",fullWidth:!0,children:"UPDATE"})]})},Mi=function(){var e=fe().onError,t=Object(j.b)(),n=Object(j.c)(S),a=Object(j.c)(k),c=Object(Y.i)(),r=Object(Y.g)(),i=Number(c.params.id),o=Object(d.b)(),l=Object(J.a)([he.USER,i],function(e,t){return function(){return On.request(tn,{id:e,currentUserId:t}).then((function(e){return e.user}))}}(i,null===n||void 0===n?void 0:n.id),{onError:e}),u=l.isLoading,b=l.data,O=Object(kn.a)((function(){return function(e,t){return gn.a.post("".concat(G.USERS,"/").concat(e).concat(G.RELATIONSHIPS),void 0,Object(In.a)({},t))}(i,a)}),{onSuccess:function(e){t(y(e.headers)),o.setQueryData([he.USER,i],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{followed:e.data})}))},onError:e}),m=Object(kn.a)((function(){var e;return function(e,t,n){return gn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.RELATIONSHIPS,"/").concat(t||"undefined"),Object(In.a)({},n))}(i,null===b||void 0===b||null===(e=b.followed)||void 0===e?void 0:e.id,a)}),{onSuccess:function(e){t(y(e.headers)),o.setQueryData([he.USER,i],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{followed:void 0})}))},onError:e}),h=(null===n||void 0===n?void 0:n.id)===i;return Object(be.jsxs)(Mt,{children:[Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:11,children:Object(be.jsx)(ee.a,{variant:"h6",children:null===b||void 0===b?void 0:b.nickname})}),Object(be.jsx)(X.a,{item:!0,xs:1,children:!h&&Object(be.jsx)(Ui,{followed:!!(null===b||void 0===b?void 0:b.followed),onFollow:function(){return O.mutate()},onUnfollow:function(){return m.mutate()},disabled:u,children:"Follow"})})]}),Object(be.jsxs)(X.a,{container:!0,spacing:2,children:[Object(be.jsx)(X.a,{item:!0,children:Object(be.jsxs)(ie.a,{component:s.b,to:"".concat(G.USERS,"/").concat(i).concat(G.FOLLOWERS),children:[null===b||void 0===b?void 0:b.followersCount,"Followers"]})}),Object(be.jsx)(X.a,{item:!0,children:Object(be.jsxs)(ie.a,{component:s.b,to:"".concat(G.USERS,"/").concat(i).concat(G.FOLLOWING),children:[null===b||void 0===b?void 0:b.followingCount,"Following"]})})]}),null===b||void 0===b?void 0:b.introduction,Object(be.jsxs)(Za.a,{value:r.pathname.includes("issues")?c.url+G.ISSUES:r.pathname,children:[Object(be.jsx)(Xa.a,{label:"Profile",value:c.url,component:s.b,to:c.url}),Object(be.jsx)(Xa.a,{label:"Musics",value:c.url+G.MUSICS,component:s.b,to:c.url+G.MUSICS}),Object(be.jsx)(Xa.a,{label:"Bookmark",value:c.url+G.BOOKMARKS,component:s.b,to:c.url+G.BOOKMARKS}),Object(be.jsx)(Xa.a,{label:"Setting",value:c.url+G.SETTING,component:s.b,to:c.url+G.SETTING,disabled:!h})]}),Object(be.jsxs)(Y.c,{children:[Object(be.jsx)(Y.a,{exact:!0,path:c.path,component:wi}),Object(be.jsx)(Y.a,{exact:!0,path:c.path+G.MUSICS,component:Ai}),Object(be.jsx)(Y.a,{exact:!0,path:c.path+G.SETTING,component:Ni}),Object(be.jsx)(Y.a,{exact:!0,path:c.path+G.BOOKMARKS,component:Li}),Object(be.jsx)(Y.a,{exact:!0,path:c.path+G.BOOKMARKS,component:Li})]})]})},Ti=function(){var e,t,n=Tt(),a=Object(H.a)(n,2),c=a[0],r=a[1],i=Object(Y.h)(),o=Number(i.id),s=Object(J.a)([he.USER,o,he.MUSICS,c],function(e,t){return function(){return On.request(on,{id:e,followerPage:t}).then((function(e){return e.user.followers}))}}(o,c));return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(ee.a,{variant:"h5",color:"initial",children:"Followers"}),Object(be.jsx)(yi,{users:null===(e=s.data)||void 0===e?void 0:e.data,loading:s.isLoading,page:c,pageCount:null===(t=s.data)||void 0===t?void 0:t.pagination.totalPages,onPage:r})]})},Ri=function(){var e,t,n=Tt(),a=Object(H.a)(n,2),c=a[0],r=a[1],i=Object(Y.h)(),o=Number(i.id),s=Object(J.a)([he.USER,o,he.MUSICS,c],function(e,t){return function(){return On.request(sn,{id:e,followingPage:t}).then((function(e){return e.user.following}))}}(o,c));return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(ee.a,{variant:"h5",color:"initial",children:"Following"}),Object(be.jsx)(yi,{users:null===(e=s.data)||void 0===e?void 0:e.data,loading:s.isLoading,page:c,pageCount:null===(t=s.data)||void 0===t?void 0:t.pagination.totalPages,onPage:r})]})},Bi=function(){var e=Object(a.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],r=Object(Vn.useDebounce)(n,1e3),i=Object(H.a)(r,2),o=i[0],s=i[1].isPending,l=Tt(),d=Object(H.a)(l,2),u=d[0],j=d[1],b=fe().onError,O=Object(J.a)([he.ALBUMS,u,o],xn(u,{title_cont:o}),{onError:b}),m=O.isLoading,h=O.data;return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Yn,{onChange:function(e){return c(e.target.value)},loading:m||s()}),Object(be.jsx)(Ie,{albums:(null===h||void 0===h?void 0:h.data)||[],loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:j})]})},qi=Object(Et.a)({media:{height:100,width:100}}),Di=function(e){var t=e.album,n=t.artistName,a=t.collectionName,c=t.artworkUrl100,r=t.artistViewUrl,i=qi();return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{mx:1,children:Object(be.jsx)(Pt.a,{image:c,className:i.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{children:a}),Object(be.jsx)(ee.a,{children:n})]}),Object(be.jsx)(Be.a,{href:r,target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()},children:"itunes"})]})})};var _i=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,r=e.onSelect;return Object(be.jsx)(ha,{defaultValue:t,title:"Album",open:n,showSearchBar:a,useQueryArgs:{key:[he.ITUNES,he.ALBUMS],fn:function(e){return function(e,t){return ve.jsonp("/search",{params:{entity:"album",term:e,limit:400,offset:t}})}(e.term,e.page).then((function(e){return{data:e.results}}))}},onSelect:r,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(Di,{album:e})},e.collectionId)}})},$i=Ma()({media:{height:100,width:100}}),Vi=function(e){var t=e.album,n=$i();return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{display:"flex",justifyItems:"center",alignItems:"center",mx:1,children:Object(be.jsx)(Pt.a,{image:t.images[0].url,className:n.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{noWrap:!0,children:t.name}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0})]})]})})};var Wi=function(e){var t=e.defaultValue,n=e.open,c=e.showSearchBar,r=e.onClose,i=e.onSelect,o=fe().onError,s=Object(j.c)(w),l=Object(j.b)(),d=Object(a.useCallback)(function(){var e=Object(va.a)(pa.a.mark((function e(t){var n,a;return pa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("code",t),n.append("grant_type","authorization_code"),n.append("redirect_uri",window.location.origin),e.next=6,Aa.post("/token",n);case 6:a=e.sent,l(N(a.data));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]);return Object(a.useEffect)((function(){window.getSpotifyCode=d}),[d]),s?Object(be.jsx)(ha,{defaultValue:t,title:"Spotify",open:n,useQueryArgs:{key:[he.SPOTIFY,he.ALBUMS],fn:function(e){return wa("album",e.term,e.page,null===s||void 0===s?void 0:s.access_token).then((function(e){return{data:e.albums.items,page:e.albums.offset,pageCount:Math.floor(e.albums.total/e.albums.limit)}}))},options:{onError:function(e){o(e),l(M())}}},showSearchBar:c,onSelect:i,onClose:r,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(Vi,{album:e})},e.id)}}):Object(be.jsxs)(ba.a,{open:n,onClose:r,fullWidth:!0,children:[Object(be.jsx)(Oa.a,{children:"Spotify need SignIn"}),Object(be.jsx)(Sa.a,{children:Object(be.jsx)(ka.a,{children:Object(be.jsx)(Ca,{})})}),Object(be.jsx)(ga.a,{children:Object(be.jsx)(Be.a,{onClick:r,color:"default",children:"Cancel"})})]})},Fi=function(){var e,t,n,c=Object(a.useState)(""),r=Object(H.a)(c,2),i=r[0],o=r[1],l=aa(),u=Object(H.a)(l,3),b=u[0],O=u[1],m=u[2],h=Object(Sn.d)(),f=h.register,x=h.handleSubmit,p=h.setValue,v=uc()(i,1e3),g=Object(H.a)(v,2),S=g[0],C=g[1].isPending,I=Object(j.b)(),E=Object(j.c)(k),P=fe().onError,U=Object(Y.i)(),A=Number(U.params.id),w=U.url+G.ARTISTS,L=Object(d.b)(),N=L.getQueryData([he.ALBUM,A]),M=Object(kn.a)((function(e){return gn.a.post(w,e,E)}),{onSuccess:function(e){I(y(e.headers)),L.setQueryData([he.ALBUM,A],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{artists:[].concat(Object(ze.a)(t.artists||[]),[e.data.artist])})}))},onError:P}),T=Object(kn.a)((function(e){return gn.a.delete("".concat(w,"/").concat(e.id),E)}),{onSuccess:function(e,t){I(y(e.headers)),L.setQueryData([he.ALBUM,A],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{artists:e.artists&&e.artists.filter((function(e){return e!==t}))})}))},onError:P}),R=Object(J.a)([he.ARTISTS,{query:S}],fn(1,{name_cont:S}),{enabled:!!S,onError:P});return Object(a.useEffect)((function(){f("artist_id")}),[f]),Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{onClick:O,children:"Edit"}),Object(be.jsxs)(ba.a,{onClose:m,open:b,fullWidth:!0,children:[Object(be.jsx)(Oa.a,{children:"Edit Albums"}),Object(be.jsxs)(Nt.a,{children:[Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(te.a,{children:[Object(be.jsx)(ce.a,{children:Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:"Artist"}),Object(be.jsx)(ae.a,{align:"right",children:"Delete"})]})}),Object(be.jsx)(ne.a,{children:null===N||void 0===N||null===(e=N.artists)||void 0===e?void 0:e.map((function(e){return Object(be.jsxs)(re.a,{children:[Object(be.jsx)(ae.a,{children:Object(be.jsx)(ie.a,{component:s.b,to:"/",children:e.name})}),Object(be.jsx)(ae.a,{align:"right",children:Object(be.jsx)(Ue.a,{onClick:function(){return T.mutate(e)},children:Object(be.jsx)(gc.a,{})})})]},e.id)}))})]})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Oc,{onSelectOption:function(e){return p("artist_id",e.id)},onRemoveOption:function(){return p("artist_id","")},textFieldProps:{label:"Artist",variant:"outlined",margin:"normal"},autocompleteProps:{value:null===(t=R.data)||void 0===t?void 0:t.data,options:(null===(n=R.data)||void 0===n?void 0:n.data)||[],loading:M.isLoading||T.isLoading||C(),multiple:!0,inputValue:i,getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t){return o(t)}}})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Mn,{color:"primary",loading:M.isLoading,onClick:x((function(e){return M.mutate(e)})),fullWidth:!0,children:"Add Artist"})})]})]})]})},Ki=function(){var e,t,n,a,c,r,i,o,s,l,u=Tt(),b=Object(H.a)(u,2),O=b[0],m=b[1],h=fe().onError,f=Object(Y.i)(),x=Number(f.params.id),p=Object(j.b)(),v=Object(j.c)(k),g=Object(j.c)(S),C=Object(d.b)(),I=Object(J.a)([he.ALBUM,x],function(e,t){return function(){return On.request(qt,{id:e,currentUserId:t}).then((function(e){return e.album}))}}(x,null===g||void 0===g?void 0:g.id),{onError:h}),E=Object(J.a)([he.ALBUM,x,he.MUSICS,O],function(e,t){return function(){return On.request(Dt,{id:e,musicPage:t}).then((function(e){return e.album.musics}))}}(x,O),{onError:h}),P=Object(J.a)([he.ITUNES,he.ALBUM,null===(e=I.data)||void 0===e?void 0:e.link.itunes],(function(){var e;return Se(null===(e=I.data)||void 0===e?void 0:e.link.itunes).then((function(e){return e.results[0]}))}),{enabled:!!(null===(t=I.data)||void 0===t?void 0:t.link.itunes),onError:h}),U=Object(kn.a)((function(e){var t;return function(e,t,n,a){return gn.a.patch("".concat(G.ALBUMS,"/").concat(e).concat(G.LINKS,"/").concat(t||"undefined"),n,Object(In.a)({},a))}(x,null===(t=I.data)||void 0===t?void 0:t.link.id,e,v)}),{onSuccess:function(e){p(y(e.headers)),C.setQueryData([he.ALBUM,x],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{link:e.data})}))},onError:h}),A=Object(kn.a)((function(){return function(e,t){return gn.a.post("".concat(G.ALBUMS,"/").concat(e).concat(G.BOOKMARKS),void 0,t)}(x,v)}),{onSuccess:function(e){p(y(e.headers)),C.setQueryData([he.ALBUM,x],(function(t){return t&&Object(In.a)(Object(In.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:h}),w=Object(kn.a)((function(){var e,t;return function(e,t,n){return gn.a.delete("".concat(G.ALBUMS,"/").concat(e).concat(G.BOOKMARKS,"/").concat(t||"undefined"),n)}(x,null===(e=I.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,v)}),{onSuccess:function(e){p(y(e.headers)),C.setQueryData([he.ALBUM,x],(function(e){return e&&Object(In.a)(Object(In.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:h}),L=function(e){return U.mutate({itunes:e.collectionId})},N=function(e){return U.mutate({spotify:e.id})};return Object(be.jsxs)(Mt,{children:[Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:11,children:Object(be.jsxs)(ee.a,{variant:"h5",children:[Object(be.jsx)(De.a,{}),null===(n=I.data)||void 0===n?void 0:n.title]})}),Object(be.jsx)(X.a,{item:!0,xs:1,children:Object(be.jsx)(ua,{count:null===(a=I.data)||void 0===a?void 0:a.bookmarksCount,bookmarked:!!(null===(c=I.data)||void 0===c?void 0:c.bookmark),onCreate:function(){return A.mutate()},onDestroy:function(){return w.mutate()}})})]}),Object(be.jsx)(Z.a,{height:"100px",width:"100px",m:"auto",children:P.data&&Object(be.jsx)(se.a,{src:P.data.artworkUrl100})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(ra,{itunes:{link:(null===(r=P.data)||void 0===r?void 0:r.collectionViewUrl)||"",renderDialog:function(e,t){return Object(be.jsx)(_i,{open:e,onClose:t,onSelect:L,showSearchBar:!0})}},spotify:{type:"album",link:null===(i=I.data)||void 0===i?void 0:i.link.spotify,renderDialog:function(e,t){var n;return Object(be.jsx)(Wi,{defaultValue:null===(n=I.data)||void 0===n?void 0:n.title,open:e,onClose:t,onSelect:N,showSearchBar:!0})}}})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Ce,{musics:(null===(o=E.data)||void 0===o?void 0:o.data)||[],loading:E.isLoading,page:O,pageCount:null===(s=E.data)||void 0===s?void 0:s.pagination.totalPages,onPage:m})}),Object(be.jsx)(Fi,{}),Object(be.jsx)(Le,{artists:null===(l=I.data)||void 0===l?void 0:l.artists,loading:I.isLoading})]})},Qi=function(){var e,t,n,c=Tt(),r=Object(H.a)(c,2),i=r[0],o=r[1],s=aa(),l=Object(H.a)(s,3),u=l[0],b=l[1],O=l[2],m=Object(a.useState)(),h=Object(H.a)(m,2),f=h[0],x=h[1],p=Object(Sn.d)(),v=p.errors,g=p.control,S=p.setValue,C=p.register,I=p.watch,E=p.handleSubmit,P=I().title,U=Object(Ka.a)(P,1e3),A=Object(H.a)(U,1)[0],w=Object(j.b)(),L=Object(j.c)(k),N=Object(Y.f)(),M=fe().onError,T=Object(d.b)(),R=Object(kn.a)((function(e){return function(e,t){return gn.a.post(G.ALBUMS,e,t)}(e,L)}),{onSuccess:function(e){w(y(e.headers)),N.push("".concat(G.ALBUMS,"/").concat(e.data.id)),T.setQueryData([he.ALBUM,e.data.id],e.data),f&&T.setQueryData([he.ITUNES,he.MUSIC,f.collectionId],f)},onError:M}),B=Object(J.a)([he.ALBUMS,{page:i,query:A}],xn(i,{title_cont:A}),{enabled:!!A,onError:M});return Object(a.useEffect)((function(){if(C("link_attributes.itunes"),f){var e=f.collectionName,t=f.collectionId;S("title",e),S("link_attributes.itunes",t)}}),[C,S,f]),Object(be.jsx)(Mt,{children:Object(be.jsx)(de.a,{children:Object(be.jsxs)(Z.a,{p:2,children:[Object(be.jsx)(Z.a,{height:"100px",width:"100px",m:"auto",children:Object(be.jsx)(se.a,{src:(null===f||void 0===f?void 0:f.artworkUrl100)||"undefiend"})}),Object(be.jsx)(wn,{name:"title",defaultValue:"",autoComplete:"on",label:"Title",variant:"outlined",control:g,errors:v,disabled:R.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(be.jsx)(Qn,{color:"inherit",size:20,loading:B.isLoading})}}),Object(be.jsx)(Qa,{onClick:b,disabled:!P,fullWidth:!0,disableElevation:!0}),Object(be.jsx)(_i,{defaultValue:P,open:u,onClose:O,onSelect:function(e){return x(e)}}),Object(be.jsx)(Ga,{data:null===(e=B.data)||void 0===e?void 0:e.data,children:Object(be.jsx)(Ie,{albums:(null===(t=B.data)||void 0===t?void 0:t.data)||[],page:i,pageCount:null===(n=B.data)||void 0===n?void 0:n.pagination.totalPages,onPage:o,loading:B.isLoading})}),Object(be.jsx)(Mn,{color:"primary",loading:R.isLoading,disabled:!P,onClick:E((function(e){return R.mutate(e)})),fullWidth:!0,children:"Create Album"})]})})})},zi=function(){var e=Object(a.useState)(!1),t=Object(H.a)(e,2),n=t[0],c=t[1],r=fe().onError,i=Object(Sn.d)({resolver:Object(Cn.a)(Uc)}),o=i.errors,l=i.control,d=i.handleSubmit,u=Object(kn.a)((function(e){return function(e){return gn.a.post(G.CONTACTS,e)}(e)}),{onSuccess:function(){c(!0)},onError:r});return n?Object(be.jsxs)(Mt,{children:[Object(be.jsx)(ee.a,{children:"Successed"}),Object(be.jsx)(ie.a,{component:s.b,to:"/",children:"return Home"})]}):Object(be.jsx)(Mt,{children:Object(be.jsxs)("form",{onSubmit:d((function(e){return u.mutate(e)})),children:[Object(be.jsx)(ee.a,{children:"Contact"}),Object(be.jsx)(wn,{name:"email",label:"Email",defaultValue:"",variant:"outlined",margin:"normal",control:l,errors:o,fullWidth:!0}),Object(be.jsx)(wn,{name:"description",label:"Description",defaultValue:"",variant:"outlined",margin:"normal",control:l,errors:o,rows:20,multiline:!0,fullWidth:!0}),Object(be.jsx)(Mn,{type:"submit",color:"primary",loading:u.isLoading,fullWidth:!0,children:"Submit"})]})})},Yi=function(){return Object(be.jsxs)(Y.c,{children:[Object(be.jsx)(Y.a,{exact:!0,path:G.MUSICS,component:Ja}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.MUSICS).concat(G.NEW),component:Nr}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.USERS,"/:userId").concat(G.MUSICS,"/:id").concat(G.TAB),component:gi}),Object(be.jsx)(Y.a,{strict:!0,path:"".concat(G.USERS,"/:userId").concat(G.MUSICS,"/:id"),component:Lr}),Object(be.jsx)(Y.a,{exact:!0,path:G.USERS,component:Ei}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.USERS,"/:id").concat(G.FOLLOWERS),component:Ti}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.USERS,"/:id").concat(G.FOLLOWING),component:Ri}),Object(be.jsx)(Y.a,{strict:!0,path:"".concat(G.USERS,"/:id"),component:Mi}),Object(be.jsx)(Y.a,{exact:!0,path:G.BANDS,component:Si}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.BANDS).concat(G.NEW),component:Ii}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.BANDS,"/:id"),component:Ci}),Object(be.jsx)(Y.a,{exact:!0,path:G.ARTISTS,component:Gn}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.ARTISTS).concat(G.NEW),component:Ha}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.ARTISTS,"/:id"),component:Fa}),Object(be.jsx)(Y.a,{exact:!0,path:G.ALBUMS,component:Bi}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.ALBUMS).concat(G.NEW),component:Qi}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.ALBUMS,"/:id"),component:Ki}),Object(be.jsx)(Y.a,{exact:!0,path:G.SIGNIN,component:Dn}),Object(be.jsx)(Y.a,{exact:!0,path:G.SIGNUP,component:$n}),Object(be.jsx)(Y.a,{exact:!0,path:G.CONTACTS,component:zi}),Object(be.jsx)(Y.a,{exact:!0,path:G.ROOT,component:pn})]})},Gi=n(411),Hi=n.n(Gi),Ji=n(413),Xi=function(){var e=Object(a.useState)(null),t=Object(H.a)(e,2),n=t[0],c=t[1],r=Object(o.b)().enqueueSnackbar,i=Object(j.b)(),l=Object(j.c)(S),d=Object(j.c)(k),u=Object(Y.f)(),b=function(){return c(null)},O=Object(kn.a)((function(){return gn.a.delete("/auth/sign_out",d)}),{onMutate:function(){i(E()),u.push({pathname:G.SIGNIN}),b()},onSuccess:function(){r("SignOut successful",{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"center"}})},onError:function(e){r(String(e),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})}}),m=O.isLoading,h=O.mutate;return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(ir.a,{position:"fixed",color:"default",children:Object(be.jsxs)(ar.a,{children:[Object(be.jsx)(ee.a,{variant:"h6",children:Object(be.jsx)(ie.a,{underline:"none",color:"inherit",component:s.b,to:"/",children:"Stave"})}),Object(be.jsx)(Z.a,{ml:"auto",children:(null===l||void 0===l?void 0:l.id)?Object(be.jsxs)(Z.a,{children:[Object(be.jsx)(Ue.a,{onClick:function(e){return c(e.currentTarget)},children:Object(be.jsx)(Hi.a,{})}),Object(be.jsxs)(Ji.a,{anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:b,children:[Object(be.jsx)(pc.a,{component:s.b,to:"".concat(G.USERS,"/").concat(l.id),children:"Account"}),Object(be.jsx)(pc.a,{disabled:m,onClick:function(){return h()},children:"Logout"})]})]}):Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{color:"inherit",variant:"contained",component:s.b,to:G.SIGNIN,children:"SignIn"}),Object(be.jsx)(Be.a,{color:"inherit",variant:"contained",component:s.b,to:G.SIGNUP,children:"SignUp"})]})})]})}),Object(be.jsx)(ar.a,{})]})},Zi=function(){return Object(be.jsx)(Mt,{children:Object(be.jsx)(ie.a,{component:s.b,to:G.CONTACTS,children:"Contact"})})},eo=n(412),to=Object(eo.a)({palette:{spotify:{main:"#1DB954",light:"#a2ebbc"},twitter:{main:"#1da1f2",dark:"#158ad1"},itunes:{main:"#fa57c1",light:"#ffbfe9"}}}),no=n(1267),ao=n(1266),co=n(143),ro=function(){var e=Object(j.b)(),t=Object(j.c)(B),n=Object(a.useState)("up"),c=Object(H.a)(n,2),r=c[0],i=c[1],o=function(){return e(D())};return Object(be.jsx)(ba.a,{fullWidth:!0,open:t,onClose:o,children:Object(be.jsx)(co.a,{value:r,children:Object(be.jsxs)(de.a,{square:!0,children:[Object(be.jsxs)(ao.a,{value:r,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){return i(t)},"aria-label":"disabled tabs example",variant:"fullWidth",children:[Object(be.jsx)(Xa.a,{label:"SignIn",value:"in"}),Object(be.jsx)(Xa.a,{label:"SignUp",value:"up"})]}),Object(be.jsx)(no.a,{value:"in",children:Object(be.jsx)(qn,{onSuccess:o})}),Object(be.jsx)(no.a,{value:"up",children:Object(be.jsx)(_n,{onSuccess:o})})]})})})},io=new l.a,oo=function(){return Object(be.jsx)(j.a,{store:Q,children:Object(be.jsx)(o.a,{maxSnack:3,children:Object(be.jsx)(d.a,{client:io,children:Object(be.jsx)(b.a,{loading:null,persistor:z,children:Object(be.jsxs)(O.a,{theme:to,children:[Object(be.jsx)(u.ReactQueryDevtools,{initialIsOpen:!0}),Object(be.jsxs)(s.a,{basename:"front",children:[Object(be.jsx)(Xi,{}),Object(be.jsx)(Yi,{}),Object(be.jsx)(Zi,{}),Object(be.jsx)(ro,{})]})]})})})})})},so=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1289)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};n(1185);i.a.render(Object(be.jsx)(c.a.StrictMode,{children:Object(be.jsx)(oo,{})}),document.getElementById("root")),so()},397:function(e,t,n){e.exports={lyric:"Lyric_lyric__3rgSk"}},4:function(e){e.exports=JSON.parse('{"ALBUMS":"albums","ALBUM":"album","ARTISTS":"artists","ARTIST":"artist","BANDS":"bands","BAND":"band","MUSICS":"musics","MUSIC":"music","SCORE":"score","REPOSITORY":"repository","BLOB":"blob","USERS":"users","USER":"user","PROFILE":"profile","FOLLOWERS":"followers","FOLLOWING":"following","ISSUES":"issues","ISSUE":"issue","BOOKMARKS":"bookmarks","ITUNES":"itunes","WIKIPEDIA":"wikipedia","MUSIXMATCH":"musixmatch","SPOTIFY":"spotify"}')},410:function(e,t,n){e.exports={atSidebar:"Score_atSidebar__TWnY_"}},5:function(e){e.exports=JSON.parse('{"ROOT":"/","SIGNUP":"/signup","SIGNIN":"/signin","ALBUMS":"/albums","ARTISTS":"/artists","COMPOSERS":"/composers","LYRISTS":"/lyrists","MUSICS":"/musics","ISSUES":"/issues","INFO":"/info","SETTING":"/setting","BANDS":"/bands","USERS":"/users","LINKS":"/links","BOOKMARKS":"/bookmarks","RELATIONSHIPS":"/relationships","FOLLOWERS":"/followers","FOLLOWING":"/following","ARTIST_MUSICS":"/artist_musics","ALBUM_MUSICS":"/album_musics","ARTIST_BANDS":"/artist_bands","ARTIST_ALBUMS":"/artist_albums","BAND_ALBUMS":"/band_albums","TAB":"/tab","NEW":"/new","FILES":"/files","FILE":"/file","TREE":"/tree","BLOB":"/blob","LYRIC":"/lyric","CONTACTS":"/contacts"}')}},[[1186,1,2]]]);
//# sourceMappingURL=main.9d303966.chunk.js.map