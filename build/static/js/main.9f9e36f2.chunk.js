(this.webpackJsonpstave_front=this.webpackJsonpstave_front||[]).push([[0],{1202:function(e,t,n){},1203:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(31),r=n.n(i),o=n(82),s=n(13),l=n(1290),d=n(204),u=n(385),j=n(12),b=n(387),O=n(1270),m=n(99),h=n(100),f=n(388),p=n.n(f),x=n(57),v={currentUser:void 0,headers:void 0},g=Object(m.b)({name:"currentUser",initialState:v,reducers:{setCurrentUser:function(e,t){e.currentUser=t.payload},setHeaders:function(e,t){var n,a=t.payload,c=a["content-type"],i=a["access-token"],r=a.client,o=a.uid,s=(null===(n=e.headers)||void 0===n?void 0:n.headers["access-token"])||"";e.headers={headers:{"content-type":c,"access-token":i||s,client:r,uid:o}}},remove:function(e){e.currentUser=void 0,e.headers=void 0}}}),S=function(e){return e.currentUser.currentUser},k=function(e){return e.currentUser.headers},I=g.actions,y=I.setCurrentUser,C=I.setHeaders,E=I.remove,P=g.reducer,U={code:void 0,token:void 0},A=Object(m.b)({name:"spotify",initialState:U,reducers:{setCode:function(e,t){e.code=t.payload},setToken:function(e,t){e.token=t.payload},remove:function(e){e.code="",e.token=void 0}}}),w=function(e){return e.spotify.token},N=A.actions,L=(N.setCode,N.setToken),M=N.remove,T=A.reducer,R=Object(m.b)({name:"spotify",initialState:{opened:!1},reducers:{close:function(e){e.opened=!1},open:function(e){e.opened=!0}}}),B=function(e){return e.authModal.opened},q=R.actions,D=q.close,_=q.open,$=R.reducer,V=Object(x.b)({currentUser:P,spotify:T,authModal:$}),W={key:"root",version:1,storage:p.a},F=Object(h.g)(W,V),K=Object(m.c)({serializableCheck:{ignoredActions:[h.a,h.f,h.b,h.c,h.d,h.e]}}),Q=Object(m.a)({reducer:F,middleware:K}),z=Object(h.h)(Q),Y=n(44),G=n(5),H=n(8),J=n(1292),X=n(1259),Z=n(1298),ee=n(120),te=n(1250),ne=n(61),ae=n.n(ne),ce=n(1246),ie=n(1251),re=n(1249),oe=n(1247),se=n(1248),le=n(1245),de=n(424),ue=n(1244),je=n(1288),be=n(2),Oe=function(e){var t=e.page,n=e.pageCount,a=e.onPage,c=e.loading,i=e.children;return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)(ue.a,{component:de.a,children:[i,c&&Object(be.jsx)(le.a,{})]}),t&&Object(be.jsx)(je.a,{count:n,page:t,onChange:a})]})};Oe.defaultProps={page:void 0,pageCount:void 0,onPage:void 0,loading:!1};var me=Oe,he=n(4),fe=function(){var e=Object(j.b)(),t=Object(o.b)().enqueueSnackbar;return{onError:function(n){var a;401===(null===(a=n.response)||void 0===a?void 0:a.status)&&(e(E()),e(_())),t(String(n),{variant:"error"})}}},pe=n(144),xe=n.n(pe),ve=xe.a.create({baseURL:"https://itunes.apple.com"}),ge=function(e){return ve.jsonp("/lookup",{params:{id:e,entity:"musicArtist"}})},Se=function(e){return ve.jsonp("/lookup",{params:{id:e,entity:"album"}})},ke=function(e){return ve.jsonp("/lookup",{params:{id:e,entity:"song"}})},Ie=function(e){var t=e.musics,n=e.page,a=e.pageCount,c=e.onPage,i=e.loading,r=t.map((function(e){return e.link.itunes||0})).join(","),o=[{route:G.MUSICS,name:"Musics"},{route:G.BANDS,name:"Bands"},{route:G.ARTISTS,name:"Composers"},{route:G.ARTISTS,name:"Lyrists"},{route:G.USERS,name:"Users"}],l=0,d="",u=fe().onError,j=Object(J.a)([he.ITUNES,he.MUSICS,r],(function(){return ke(r).then((function(e){return e.results}))}),{enabled:!!r,onError:u});return Object(be.jsx)(me,{page:n,pageCount:a,onPage:c,loading:i,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{}),o.map((function(e){return Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:e.route,children:e.name})},e.name)}))]})}),Object(be.jsx)(ie.a,{children:null===t||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.title,a=e.band,c=e.user,i=e.composers,r=e.lyrists;return e.link.itunes&&j.data?(d=j.data[l].artworkUrl60,l+=1):d=void 0,Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:d&&Object(be.jsx)(ae.a,{loading:j.isLoading,src:d})}),Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.USERS,"/").concat(c.id).concat(G.MUSICS,"/").concat(t),children:n})}),Object(be.jsx)(re.a,{children:a&&Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.BANDS,"/").concat(a.id),children:null===a||void 0===a?void 0:a.name})}),Object(be.jsx)(re.a,{children:null===i||void 0===i?void 0:i.map((function(e){return Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))}),Object(be.jsx)(re.a,{children:null===r||void 0===r?void 0:r.map((function(e){return Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))}),Object(be.jsx)(re.a,{children:c&&Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.USERS,"/").concat(c.id),children:c.nickname})})]},t)}))})]})})},ye=function(e){var t=e.albums,n=e.loading,a=e.page,c=e.pageCount,i=e.onPage,r=fe().onError,o=t.map((function(e){return e.link.itunes})).join(","),l=0,d="",u=Object(J.a)([he.ITUNES,he.ALBUMS,o],(function(){return Se(o).then((function(e){return e.results}))}),{onError:r});return Object(be.jsx)(me,{page:a,pageCount:c,onPage:i,loading:n,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{}),Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:G.ALBUMS,children:"Albums"})})]})}),Object(be.jsx)(ie.a,{children:null===t||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.title;return e.link.itunes&&u.data?(d=u.data[l].artworkUrl60,l+=1):d=void 0,Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:d&&Object(be.jsx)(ae.a,{src:d})}),Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.ALBUMS,"/").concat(t),children:n})})]},t)}))})]})})},Ce=n(423),Ee=n(115),Pe=function(){return Object(be.jsx)(Ce.a,{children:Object(be.jsx)(Ee.c,{})})},Ue=n(1252),Ae=function(e){var t=e.href,n=e.windowFeatures,a=e.children,c=e.onWindow;return Object(be.jsx)(Ue.a,{component:te.a,rel:"noopener noreferrer",disabled:!t,onClick:function(){var e=window.open(t,void 0,n);c&&c(e)},children:a})};Ae.defaultProps={href:void 0,windowFeatures:void 0,onWindow:void 0};var we=Ae,Ne=function(e){var t=e.artists,n=e.page,a=e.pageCount,c=e.onPage,i=e.loading;return Object(be.jsx)(me,{page:n,pageCount:a,onPage:c,loading:i,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:G.ARTISTS,children:"Artists"})}),Object(be.jsx)(re.a,{})]})}),Object(be.jsx)(ie.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.id),children:e.name})}),Object(be.jsx)(re.a,{children:Object(be.jsx)(we,{href:e.link.twitter?"https://twitter.com/".concat(e.link.twitter):void 0,children:Object(be.jsx)(Pe,{})})})]},e.id)}))})]})})},Le=function(e){var t=e.bands,n=e.page,a=e.pageCount,c=e.onPage,i=e.loading;return Object(be.jsx)(me,{page:n,pageCount:a,onPage:c,loading:i,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsx)(se.a,{children:Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.BANDS),children:"Band"})})})}),Object(be.jsx)(ie.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(be.jsx)(se.a,{children:Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.BANDS,"/").concat(e.id),children:e.name})})},e.id)}))})]})})},Me=n(1253),Te=n(1256),Re=n(1254),Be=n(1257),qe=n(206),De=n.n(qe),_e=n(207),$e=n.n(_e),Ve=n(208),We=n.n(Ve),Fe=n(209),Ke=n.n(Fe),Qe=function(e){var t=e.type,n=null,a="",c="large";switch(t){case"Album":n=Object(be.jsx)(De.a,{fontSize:c}),a=G.ALBUMS;break;case"Artist":n=Object(be.jsx)($e.a,{fontSize:c}),a=G.ARTISTS;break;case"Music":n=Object(be.jsx)(We.a,{fontSize:c}),a=G.MUSICS;break;case"Band":n=Object(be.jsx)(Ke.a,{fontSize:c}),a=G.BANDS;break;default:return null}return Object(be.jsxs)(Me.a,{variant:"outlined",children:[Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(Z.a,{textAlign:"center",children:n}),Object(be.jsx)(ee.a,{variant:"h5",component:"h2",children:t}),Object(be.jsxs)(ee.a,{color:"textSecondary",children:["create ",t]}),Object(be.jsxs)(ee.a,{variant:"body2",component:"p",children:["create ",t]})]}),Object(be.jsx)(Te.a,{children:Object(be.jsx)(Be.a,{size:"small",component:s.b,to:"".concat(a).concat(G.NEW),children:"Create"})})]})},ze=n(28),Ye=n(389),Ge=n.n(Ye);n(493),n(494);var He,Je,Xe,Ze,et,tt,nt,at,ct,it,rt,ot,st,lt,dt,ut,jt,bt,Ot,mt,ht,ft,pt,xt,vt,gt,St,kt,It,yt,Ct=function(e){var t,n,a=e.cards,c=e.children;return Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Ge.a,{speed:500,children:(t=a||[],n=2,t.reduce((function(e,a,c){return c%n?e:[].concat(Object(ze.a)(e),[t.slice(c,c+n)])}),[])).map((function(e){var t=Object(H.a)(e,2),n=t[0],a=t[1];return Object(be.jsx)(Z.a,{py:3,children:c(n,a)},n.id)}))})})},Et=n(1243),Pt=n(1258),Ut=Object(Et.a)({media:{height:100,width:100}}),At=function(e){var t,n,a,c=e.music,i=e.onClick,r=Ut(),o=Object(J.a)([he.ITUNES,he.MUSIC,c.link.itunes],(function(){return ke(c.link.itunes).then((function(e){return e.results[0]}))})).data;return Object(be.jsx)(Me.a,{onClick:i,children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{display:"flex",justifyItems:"center",alignItems:"center",p:1,children:(null===o||void 0===o?void 0:o.artworkUrl100)&&Object(be.jsx)(Pt.a,{image:null===o||void 0===o?void 0:o.artworkUrl60,className:r.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{variant:"h6",noWrap:!0,children:c.title}),(null===(t=c.band)||void 0===t?void 0:t.name)&&Object(be.jsxs)(ee.a,{color:"textSecondary",noWrap:!0,children:["Band: ",null===(n=c.band)||void 0===n?void 0:n.name]}),(null===(a=c.composers)||void 0===a?void 0:a.length)?Object(be.jsxs)(ee.a,{color:"textSecondary",noWrap:!0,children:["Composer:"," ",c.composers.map((function(e){return Object(be.jsx)("span",{children:e.name},e.id)}))]}):null]})]})})},wt=function(e,t){return"".concat(G.USERS,"/").concat(e||"undefined").concat(G.MUSICS,"/").concat(t)},Nt=function(e){var t=e.data,n=Object(Y.f)();return Object(be.jsx)(Ct,{cards:t,children:function(e,t){return Object(be.jsxs)(X.a,{container:!0,spacing:2,children:[Object(be.jsx)(X.a,{item:!0,xs:6,children:Object(be.jsx)(At,{onClick:function(){var t;return n.push(wt(null===(t=e.user)||void 0===t?void 0:t.id,e.id))},music:e})}),Object(be.jsx)(X.a,{item:!0,xs:6,children:Object(be.jsx)(At,{onClick:function(){var e;return n.push(wt(null===(e=t.user)||void 0===e?void 0:e.id,t.id))},music:t})})]})}})},Lt=n(1260),Mt=function(e){var t=e.children;return Object(be.jsx)(Lt.a,{children:Object(be.jsx)(Z.a,{my:5,children:t})})},Tt=function(){var e=Object(a.useState)(1),t=Object(H.a)(e,2),n=t[0],c=t[1];return[n,Object(a.useCallback)((function(e,t){return c(t)}),[])]},Rt=n(17),Bt=n(18),qt=Object(Rt.gql)(He||(He=Object(Bt.a)(["\n  query getAlbum($id: Int!, $currentUserId: Int) {\n    album(id: $id) {\n      id\n      title\n      link {\n        id\n        itunes\n      }\n      artists {\n        id\n        name\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),Dt=Object(Rt.gql)(Je||(Je=Object(Bt.a)(["\n  query getAlbumMusics($id: Int!, $musicPage: Int!) {\n    album(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title\n          link {\n            itunes\n            spotify\n          }\n          band {\n            name\n          }\n          composers {\n            id\n            name\n          }\n          lyrists {\n            id\n            name\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),_t=Object(Rt.gql)(Xe||(Xe=Object(Bt.a)(["\n  query getAlbums($page: Int!, $q: JSON) {\n    albums(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        title\n        link {\n          itunes\n        }\n      }\n    }\n  }\n"]))),$t=Object(Rt.gql)(Ze||(Ze=Object(Bt.a)(["\n  query getArtist($id: Int!, $currentUserId: Int) {\n    artist(id: $id) {\n      id\n      name\n      link {\n        id\n        itunes\n        twitter\n        wikipedia\n        spotify\n      }\n      bands {\n        id\n        name\n        link {\n          itunes\n        }\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),Vt=Object(Rt.gql)(et||(et=Object(Bt.a)(["\n  query getArtist($id: Int!, $albumPage: Int!) {\n    artist(id: $id) {\n      albums(albumPage: $albumPage) {\n        data {\n          id\n          title\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Wt=Object(Rt.gql)(tt||(tt=Object(Bt.a)(["\n  query getMusics($id: Int!, $musicPage: Int!) {\n    artist(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title\n          link {\n            itunes\n          }\n          band {\n            name\n          }\n          composers {\n            id\n            name\n          }\n          lyrists {\n            id\n            name\n          }\n          user {\n            id\n            nickname\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Ft=Object(Rt.gql)(nt||(nt=Object(Bt.a)(["\n  query getArtists($page: Int!, $q: JSON) {\n    artists(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        name\n        link {\n          twitter\n        }\n      }\n    }\n  }\n"]))),Kt=Object(Rt.gql)(at||(at=Object(Bt.a)(["\n  query getBand($id: Int!, $currentUserId: Int) {\n    band(id: $id) {\n      id\n      name\n      link {\n        id\n        itunes\n        twitter\n        wikipedia\n        spotify\n      }\n      artists {\n        id\n        name\n        link {\n          id\n          twitter\n        }\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),Qt=Object(Rt.gql)(ct||(ct=Object(Bt.a)(["\n  query getBandAlbums($id: Int!, $albumPage: Int!) {\n    band(id: $id) {\n      albums(albumPage: $albumPage) {\n        data {\n          id\n          title\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),zt=Object(Rt.gql)(it||(it=Object(Bt.a)(["\n  query getBandMusics($id: Int!, $musicPage: Int!) {\n    band(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title\n          composers {\n            id\n            name\n          }\n          lyrists {\n            id\n            name\n          }\n          user {\n            id\n            nickname\n          }\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),Yt=Object(Rt.gql)(rt||(rt=Object(Bt.a)(["\n  query getIssue($id: Int!) {\n    issue(id: $id) {\n      id\n      title\n      description\n    }\n  }\n"]))),Gt=Object(Rt.gql)(ot||(ot=Object(Bt.a)(["\n  query getBands($page: Int!, $q: JSON) {\n    bands(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        name\n      }\n    }\n  }\n"]))),Ht=Object(Rt.gql)(st||(st=Object(Bt.a)(["\n  query getIssues($musicId: Int!, $page: Int!) {\n    issues(musicId: $musicId, page: $page) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        title\n        description\n      }\n    }\n  }\n"]))),Jt=Object(Rt.gql)(lt||(lt=Object(Bt.a)(["\n  query getMusic($id: Int!, $currentUserId: Int) {\n    music(id: $id) {\n      id\n      title\n      scoreExist\n      link {\n        id\n        itunes\n        musixmatch\n        spotify\n      }\n      user {\n        id\n        nickname\n      }\n      band {\n        id\n        name\n      }\n      artistMusics {\n        id\n        role\n        artist {\n          id\n          name\n        }\n      }\n      composers {\n        id\n        name\n      }\n      lyrists {\n        id\n        name\n      }\n      albums {\n        id\n        title\n        link {\n          itunes\n        }\n      }\n      bookmark(currentUserId: $currentUserId) {\n        id\n      }\n      bookmarksCount\n    }\n  }\n"]))),Xt=Object(Rt.gql)(dt||(dt=Object(Bt.a)(["\n  query getRootTree($id: Int!) {\n    music(id: $id) {\n      rootTree {\n        oid\n        type\n        name\n        filemode\n      }\n    }\n  }\n"]))),Zt=Object(Rt.gql)(ut||(ut=Object(Bt.a)(["\n  query getMusic($id: Int!) {\n    music(id: $id) {\n      id\n      title\n      score\n    }\n  }\n"]))),en=Object(Rt.gql)(jt||(jt=Object(Bt.a)(["\n  query getMusics($page: Int!, $q: JSON) {\n    musics(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        title\n        link {\n          itunes\n        }\n        user {\n          id\n          nickname\n        }\n        band {\n          id\n          name\n        }\n        composers {\n          id\n          name\n        }\n        lyrists {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),tn=Object(Rt.gql)(bt||(bt=Object(Bt.a)(["\n  query getUserMusics($id: Int!, $currentUserId: Int) {\n    user(id: $id) {\n      nickname\n      introduction\n      followingCount\n      followersCount\n      followed(currentUserId: $currentUserId) {\n        id\n      }\n    }\n  }\n"]))),nn=Object(Rt.gql)(Ot||(Ot=Object(Bt.a)(["\n  query getBookmarkAlbums($id: Int!, $bookmarkedAlbumPage: Int!) {\n    user(id: $id) {\n      bookmarkedAlbums(bookmarkedAlbumPage: $bookmarkedAlbumPage) {\n        data {\n          id\n          title\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),an=Object(Rt.gql)(mt||(mt=Object(Bt.a)(["\n  query getBookmarkArtists($id: Int!, $bookmarkedArtistPage: Int!) {\n    user(id: $id) {\n      bookmarkedArtists(bookmarkedArtistPage: $bookmarkedArtistPage) {\n        data {\n          id\n          name\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),cn=Object(Rt.gql)(ht||(ht=Object(Bt.a)(["\n  query getBookmarkBands($id: Int!, $bookmarkedBandPage: Int!) {\n    user(id: $id) {\n      bookmarkedBands(bookmarkedBandPage: $bookmarkedBandPage) {\n        data {\n          id\n          name\n          link {\n            itunes\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),rn=Object(Rt.gql)(ft||(ft=Object(Bt.a)(["\n  query getBookmarkMusic($id: Int!, $bookmarkedMusicPage: Int!) {\n    user(id: $id) {\n      bookmarkedMusics(bookmarkedMusicPage: $bookmarkedMusicPage) {\n        data {\n          id\n          title\n          band {\n            name\n          }\n          composers {\n            id\n            name\n          }\n          lyrists {\n            id\n            name\n          }\n          link {\n            itunes\n          }\n          user {\n            nickname\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),on=Object(Rt.gql)(pt||(pt=Object(Bt.a)(["\n  query getUserFollower($id: Int!, $followerPage: Int!) {\n    user(id: $id) {\n      followers(followerPage: $followerPage) {\n        pagination {\n          totalPages\n        }\n        data {\n          id\n          nickname\n          link {\n            twitter\n          }\n        }\n      }\n    }\n  }\n"]))),sn=Object(Rt.gql)(xt||(xt=Object(Bt.a)(["\n  query getUserFollowing($id: Int!, $followingPage: Int!) {\n    user(id: $id) {\n      following(followingPage: $followingPage) {\n        pagination {\n          totalPages\n        }\n        data {\n          id\n          nickname\n          link {\n            twitter\n          }\n        }\n      }\n    }\n  }\n"]))),ln=Object(Rt.gql)(vt||(vt=Object(Bt.a)(["\n  query getUserMusics($id: Int!, $musicPage: Int!) {\n    user(id: $id) {\n      musics(musicPage: $musicPage) {\n        data {\n          id\n          title\n          band {\n            name\n          }\n          composers {\n            id\n            name\n          }\n          lyrists {\n            id\n            name\n          }\n          link {\n            itunes\n          }\n          user {\n            id\n            nickname\n          }\n        }\n        pagination {\n          totalPages\n        }\n      }\n    }\n  }\n"]))),dn=Object(Rt.gql)(gt||(gt=Object(Bt.a)(["\n  query getUserMusics($id: Int!) {\n    user(id: $id) {\n      link {\n        id\n        twitter\n      }\n    }\n  }\n"]))),un=Object(Rt.gql)(St||(St=Object(Bt.a)(["\n  query getUsers($page: Int!, $q: JSON) {\n    users(page: $page, q: $q) {\n      pagination {\n        totalPages\n      }\n      data {\n        id\n        nickname\n        link {\n          twitter\n        }\n      }\n    }\n  }\n"]))),jn=Object(Rt.gql)(kt||(kt=Object(Bt.a)(["\n  query getBlob($id: Int!, $oid: String!) {\n    music(id: $id) {\n      blob(oid: $oid)\n    }\n  }\n"]))),bn=Object(Rt.gql)(It||(It=Object(Bt.a)(["\n  query getBlob($id: Int!, $oid: String!) {\n    music(id: $id) {\n      tree(oid: $oid) {\n        oid\n        type\n        name\n        filemode\n      }\n    }\n  }\n"]))),On="http://34.127.71.40",mn=Object(Rt.gql)(yt||(yt=Object(Bt.a)(["\n  query getNotificationsMusics($id: Int!, $notificationPage: Int!) {\n    user(id: $id) {\n      notifications(notificationPage: $notificationPage) {\n        data {\n          id\n          recipientType\n          recipientId\n          type\n          params {\n            userRelationship {\n              followed {\n                id\n                nickname\n              }\n              follower {\n                id\n                nickname\n              }\n            }\n            musicBookmark {\n              user {\n                id\n                nickname\n              }\n              music {\n                id\n                title\n              }\n            }\n          }\n          readAt\n          createdAt\n          updatedAt\n        }\n        pagination {\n          totalPages\n        }\n        notificationExist\n      }\n    }\n  }\n"]))),hn=new Rt.GraphQLClient("".concat(On,"/graphql")),fn=function(e,t){return function(){return hn.request(en,{page:e,q:t}).then((function(e){return e.musics}))}},pn=function(e,t){return function(){return hn.request(Gt,{page:e,q:t}).then((function(e){return e.bands}))}},xn=function(e,t){return function(){return hn.request(Ft,{page:e,q:t}).then((function(e){return e.artists}))}},vn=function(e,t){return function(){return hn.request(_t,{page:e,q:t}).then((function(e){return e.albums}))}},gn=function(){var e,t,n,c,i,r,o,s,l,d,u,j,b,O=Tt(),m=Object(H.a)(O,2),h=m[0],f=m[1],p=Tt(),x=Object(H.a)(p,2),v=x[0],g=x[1],S=Tt(),k=Object(H.a)(S,2),I=k[0],y=k[1],C=Tt(),E=Object(H.a)(C,2),P=E[0],U=E[1],A=fe().onError,w=Object(J.a)([he.MUSICS,h],fn(h,{s:"updated_at desc"}),{onError:A}),N=Object(J.a)([he.ALBUMS,v],vn(v,{s:"updated_at desc"}),{onError:A}),L=Object(J.a)([he.ARTISTS,I],xn(I,{s:"updated_at desc"}),{onError:A}),M=Object(J.a)([he.BANDS,P],pn(P,{s:"updated_at desc"}),{onError:A}),T=Object(J.a)([he.MUSICS,1,he.BOOKMARKS],fn(1,{s:"bookmarks_count desc"}),{onError:A});return Object(a.useEffect)((function(){var e=new URL(window.location.href).searchParams.get("code");if(e){var t=window.opener;t&&t.getSpotifyCode(e),window.close()}}),[]),Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(te.a,{href:"https://staveservice.github.io/docs/",target:"_blank",rel:"noopener noreferrer",children:Object(be.jsx)(ae.a,{aspectRatio:16/9,src:"".concat("","/stave.png")})})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsxs)(X.a,{container:!0,spacing:2,children:[Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(Qe,{type:"Music"})}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(Qe,{type:"Album"})}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(Qe,{type:"Artist"})}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(Qe,{type:"Band"})})]})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Nt,{data:null===(e=T.data)||void 0===e?void 0:e.data})}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(ee.a,{variant:"h4",children:"Musics"}),Object(be.jsx)(Ie,{musics:(null===(t=w.data)||void 0===t?void 0:t.data)||[],loading:w.isLoading,page:h,pageCount:null===(n=w.data)||void 0===n||null===(c=n.pagination)||void 0===c?void 0:c.totalPages,onPage:f})]}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(ee.a,{variant:"h4",children:"Albums"}),Object(be.jsx)(ye,{albums:(null===(i=N.data)||void 0===i?void 0:i.data)||[],loading:N.isLoading,page:v,pageCount:null===(r=N.data)||void 0===r||null===(o=r.pagination)||void 0===o?void 0:o.totalPages,onPage:g})]}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(ee.a,{variant:"h4",children:"Bands"}),Object(be.jsx)(Le,{bands:(null===(s=M.data)||void 0===s?void 0:s.data)||[],loading:M.isLoading,page:P,pageCount:null===(l=M.data)||void 0===l||null===(d=l.pagination)||void 0===d?void 0:d.totalPages,onPage:U})]}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(ee.a,{variant:"h4",children:"Artists"}),Object(be.jsx)(Ne,{artists:(null===(u=L.data)||void 0===u?void 0:u.data)||[],loading:L.isLoading,page:I,pageCount:null===(j=L.data)||void 0===j||null===(b=j.pagination)||void 0===b?void 0:b.totalPages,onPage:y})]})]})},Sn=n(19),kn=n.n(Sn),In=n(29),yn=n(1300),Cn=n(79),En=n(9),Pn=n(56),Un=n(390),An=n(1301),wn=["name","defaultValue","onChange","onKeyPress","errors","control","rules"],Nn=function(e){var t=e.name,n=e.defaultValue,a=e.onChange,c=e.onKeyPress,i=e.errors,r=e.control,o=e.rules,s=Object(Pn.a)(e,wn),l=Object(In.c)({name:t,control:r,rules:o,defaultValue:n}),d=l.field,u=d.ref,j=d.value,b=d.onChange,O=l.meta.invalid;return Object(be.jsx)(An.a,Object(En.a)(Object(En.a)({},s),{},{value:j,inputRef:u,error:O,helperText:i&&Object(be.jsx)(Un.a,{errors:i,name:t}),onChange:function(e){a&&a(e),b(e.target.value)},onKeyPress:function(e){c&&c(e)}}))};Nn.defaultProps={rules:{}};var Ln=Nn,Mn=n(282),Tn=["disabled","loading","children"],Rn=function(e){var t=e.disabled,n=e.loading,a=e.children,c=Object(Pn.a)(e,Tn);return Object(be.jsx)(Be.a,Object(En.a)(Object(En.a)({},c),{},{variant:"contained",startIcon:n&&Object(be.jsx)(Mn.a,{size:20}),disabled:n||t,disableElevation:!0,children:a}))},Bn=n(36),qn=Bn.b().shape({email:Bn.d().email().required(),password:Bn.d().required()}),Dn=Bn.b().shape({email:Bn.d().email().required(),nickname:Bn.d().required().min(4).max(30),familyname:Bn.d().required().max(35),givenname:Bn.d().required().max(35),password:Bn.d().required(),passwordConfirmation:Bn.d().oneOf([Bn.c("password"),null])}),_n=function(e){var t=e.onSuccess,n=Object(o.b)().enqueueSnackbar,c=Object(j.b)(),i=Object(In.d)({resolver:Object(Cn.a)(qn)}),r=i.errors,s=i.control,l=i.setValue,d=i.handleSubmit,u=Object(yn.a)((function(e){return t=e,kn.a.post("/auth/sign_in",t);var t}),{onSuccess:function(e){c(y(e.data.data)),c(C(e.headers)),n("SignIn successful",{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"center"}}),t()},onError:function(e){e.response?n(e.response.data.errors,{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}}):n(String(e),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})}}),b=u.isLoading,O=u.mutate;Object(a.useEffect)((function(){l("email","test@test.com"),l("password","password")}),[l]);return Object(be.jsxs)(Z.a,{m:3,children:[Object(be.jsx)(ee.a,{variant:"h4",align:"center",children:"SignIn"}),Object(be.jsxs)("form",{onSubmit:d((function(e){return O(e)})),children:[Object(be.jsx)(Ln,{type:"email",name:"email",defaultValue:"",autoComplete:"on",label:"Email",variant:"outlined",margin:"normal",control:s,errors:r,disabled:b,fullWidth:!0}),Object(be.jsx)(Ln,{type:"password",name:"password",label:"Password",variant:"outlined",margin:"normal",control:s,defaultValue:"",errors:r,disabled:b,fullWidth:!0}),Object(be.jsx)(Rn,{type:"submit",color:"primary",loading:b,fullWidth:!0,children:"SignIn"})]})]})},$n=function(){var e=Object(Y.f)();return Object(be.jsx)(Mt,{children:Object(be.jsx)(Lt.a,{maxWidth:"xs",children:Object(be.jsx)(de.a,{variant:"outlined",children:Object(be.jsx)(_n,{onSuccess:function(){return e.push("/")}})})})})},Vn=function(e){var t=e.onSuccess,n=Object(o.b)().enqueueSnackbar,a=Object(j.b)(),c=Object(In.d)({resolver:Object(Cn.a)(Dn)}),i=c.errors,r=c.control,s=c.handleSubmit,l=Object(yn.a)((function(e){return t=e,kn.a.post("/auth",t,{"Key-inflection":"camel"});var t}),{onSuccess:function(e){a(y(e.data.data)),a(C(e.headers)),n("SignUp successful",{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"center"}}),t()},onError:function(e){e.response?e.response.data.errors.full_messages.forEach((function(e){return n(e,{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})})):n(String(e),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})}}),d=l.isLoading,u=l.mutate;return Object(be.jsxs)(Z.a,{m:3,children:[Object(be.jsx)(ee.a,{variant:"h4",align:"center",children:"SignUp"}),Object(be.jsxs)("form",{onSubmit:s((function(e){return u(e)})),children:[Object(be.jsx)(Ln,{name:"nickname",defaultValue:"",label:"NickName",variant:"outlined",margin:"normal",control:r,errors:i,disabled:d,fullWidth:!0}),Object(be.jsxs)(X.a,{container:!0,spacing:2,children:[Object(be.jsx)(X.a,{item:!0,xs:6,children:Object(be.jsx)(Ln,{name:"familyname",defaultValue:"",label:"FamilyName",variant:"outlined",control:r,errors:i,disabled:d,fullWidth:!0})}),Object(be.jsx)(X.a,{item:!0,xs:6,children:Object(be.jsx)(Ln,{name:"givenname",defaultValue:"",label:"GivenName",variant:"outlined",control:r,errors:i,disabled:d,fullWidth:!0})})]}),Object(be.jsx)(Ln,{type:"email",name:"email",defaultValue:"",label:"Email",variant:"outlined",margin:"normal",control:r,errors:i,disabled:d,fullWidth:!0}),Object(be.jsx)(Ln,{type:"password",name:"password",defaultValue:"",label:"Password",variant:"outlined",margin:"normal",control:r,errors:i,disabled:d,fullWidth:!0}),Object(be.jsx)(Ln,{type:"password",name:"password_confirmation",defaultValue:"",label:"PasswordConfirmation",variant:"outlined",margin:"normal",control:r,errors:i,disabled:d,fullWidth:!0}),Object(be.jsx)(Rn,{type:"submit",loading:d,color:"primary",fullWidth:!0,children:"SignUp"})]})]})},Wn=function(){var e=Object(Y.f)();return Object(be.jsx)(Mt,{children:Object(be.jsx)(Lt.a,{maxWidth:"xs",children:Object(be.jsx)(de.a,{variant:"outlined",children:Object(be.jsx)(Vn,{onSuccess:function(){return e.push("/")}})})})})},Fn=n(81),Kn=n(394),Qn=n.n(Kn),zn=["loading"],Yn=function(e){var t=e.loading,n=Object(Pn.a)(e,zn);return Object(be.jsx)(be.Fragment,{children:t?Object(be.jsx)(Mn.a,Object(En.a)({},n)):null})},Gn=["loading"],Hn=function(e){var t=e.loading,n=Object(Pn.a)(e,Gn);return Object(be.jsx)(An.a,Object(En.a)(Object(En.a)({},n),{},{variant:"outlined",InputProps:{startAdornment:Object(be.jsx)(Qn.a,{}),endAdornment:Object(be.jsx)(Yn,{color:"inherit",size:20,loading:t})},fullWidth:!0}))},Jn=function(){var e=Object(a.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],i=Object(Fn.useDebounce)(n,1e3),r=Object(H.a)(i,2),o=r[0],s=r[1].isPending,l=Tt(),d=Object(H.a)(l,2),u=d[0],j=d[1],b=fe().onError,O=Object(J.a)([he.ARTISTS,u,o],xn(u,{name_cont:o}),{onError:b}),m=O.isLoading,h=O.data;return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Hn,{onChange:function(e){return c(e.target.value)},loading:m||s()}),Object(be.jsx)(Ne,{artists:null===h||void 0===h?void 0:h.data,loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:j})]})},Xn=n(396),Zn=n.n(Xn),ea=function(e){var t=e.children,n=e.href,a=e.startIcon;return Object(be.jsx)(Be.a,{startIcon:a,component:te.a,href:n,target:"_blank",rel:"noopener noreferrer",disabled:!n,children:t})},ta=n(395),na=function(){return Object(be.jsx)(Ce.a,{children:Object(be.jsx)(ta.a,{size:23})})},aa=function(e){var t=e.color;return Object(be.jsx)(Ce.a,{color:t,children:Object(be.jsx)(Ee.d,{})})},ca=function(){return Object(be.jsx)(Ce.a,{children:Object(be.jsx)(Ee.b,{size:24})})},ia=function(){var e=Object(a.useState)(!1),t=Object(H.a)(e,2),n=t[0],c=t[1];return[n,Object(a.useCallback)((function(){c(!0)}),[]),Object(a.useCallback)((function(){return c(!1)}),[])]},ra=function(e){var t=e.itunes,n=e.twitter,a=e.spotify,c=e.wikipedia,i=e.musixmatch,r=e.loading,o=ia(),s=Object(H.a)(o,3),l=s[0],d=s[1],u=s[2],j=ia(),b=Object(H.a)(j,3),O=b[0],m=b[1],h=b[2],f=ia(),p=Object(H.a)(f,3),x=p[0],v=p[1],g=p[2],S=ia(),k=Object(H.a)(S,3),I=k[0],y=k[1],C=k[2],E=ia(),P=Object(H.a)(E,3),U=P[0],A=P[1],w=P[2];return Object(be.jsxs)(ue.a,{component:de.a,children:[Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Link"}),Object(be.jsx)(re.a,{children:"Edit"})]})}),Object(be.jsxs)(ie.a,{children:[n&&Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(ea,{startIcon:Object(be.jsx)(Pe,{}),href:n.link?"https://twitter.com/".concat(n.link):void 0,children:"twitter"})}),Object(be.jsxs)(re.a,{children:[Object(be.jsx)(Be.a,{variant:"text",onClick:m,children:"Edit"}),n.renderDialog(O,h)]})]}),t&&Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(ea,{startIcon:Object(be.jsx)(na,{}),href:t.link,children:"itunes"})}),Object(be.jsxs)(re.a,{children:[Object(be.jsx)(Be.a,{variant:"text",onClick:d,children:"Edit"}),t.renderDialog(l,u)]})]}),a&&Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(ea,{startIcon:Object(be.jsx)(ca,{}),href:a.link?"https://open.spotify.com/".concat(a.type,"/").concat(a.link):void 0,children:"spotify"})}),Object(be.jsxs)(re.a,{children:[Object(be.jsx)(Be.a,{variant:"text",onClick:v,children:"Edit"}),a.renderDialog(x,g)]})]}),i&&Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsxs)(Z.a,{display:"flex",alignItems:"cneter",children:[Object(be.jsx)(Z.a,{mr:1,children:Object(be.jsx)(Zn.a,{color:i.link?void 0:"action"})}),"MUSIXMATCH"]})}),Object(be.jsxs)(re.a,{children:[Object(be.jsx)(Be.a,{variant:"text",onClick:A,children:"Edit"}),i.renderDialog(U,w)]})]}),c&&Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(ea,{startIcon:Object(be.jsx)(aa,{}),href:c.link?"https://ja.wikipedia.org/?curid=".concat(c.link):void 0,children:"wikipedia"})}),Object(be.jsxs)(re.a,{children:[Object(be.jsx)(Be.a,{variant:"text",onClick:y,children:"Edit"}),c.renderDialog(I,C)]})]})]})]}),r&&Object(be.jsx)(le.a,{})]})};ra.defaultProps={itunes:void 0,twitter:void 0,spotify:void 0,wikipedia:void 0,musixmatch:void 0,loading:!1},ra.whyDidYouRender=!0;var oa=ra,sa=n(397),la=n.n(sa),da=n(214),ua=n.n(da),ja=["count","bookmarked","onCreate","onDestroy"],ba=function(e){var t=e.count,n=e.bookmarked,a=e.onCreate,c=e.onDestroy,i=Object(Pn.a)(e,ja);return Object(be.jsx)(Ue.a,Object(En.a)(Object(En.a)({},i),{},{onClick:n?c:a,children:n?Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(ee.a,{children:t||0}),Object(be.jsx)(ua.a,{color:"error"})]}):Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(ee.a,{children:t||0}),Object(be.jsx)(la.a,{color:"error"})]})}))},Oa=function(e){var t=e.artist,n=t.artistName,a=t.artistLinkUrl;return Object(be.jsx)(Me.a,{children:Object(be.jsx)(Z.a,{display:"flex",children:Object(be.jsx)(Z.a,{flex:"1",overflow:"hidden",children:Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{children:n}),Object(be.jsx)(Be.a,{href:a,target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()},children:"itunes"})]})})})})},ma=n(1295),ha=n(1266);function fa(e){var t,n,c,i,r=e.defaultValue,o=e.open,s=e.title,l=e.showSearchBar,d=e.useQueryArgs,u=e.children,j=e.onClose,b=e.onSelect,O=Object(a.useState)(""),m=Object(H.a)(O,2),h=m[0],f=m[1],p=Tt(),x=Object(H.a)(p,2),v=x[0],g=x[1],S=Object(Fn.useDebounce)(h,1e3),k=Object(H.a)(S,2),I=k[0],y=k[1].isPending,C=fe().onError,E=Object(J.a)([].concat(Object(ze.a)(d.key),[I,v]),(function(){return d.fn({term:I,page:v})}),Object(En.a)({enabled:!!I&&!y()&&o,onError:C},d.options));return Object(a.useEffect)((function(){r&&f(r)}),[r]),Object(be.jsxs)(ma.a,{open:o,onClose:j,fullWidth:!0,children:[Object(be.jsxs)(ha.a,{children:["Choose ",s]}),Object(be.jsxs)(Z.a,{p:3,children:[l&&Object(be.jsx)(An.a,{id:"",label:"",defaultValue:r,value:h,variant:"outlined",onChange:function(e){return f(e.target.value)},fullWidth:!0}),E.isLoading&&Object(be.jsx)(le.a,{}),null===(t=E.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.map((function(e,t){return u(e,function(e){return function(){var t;j(),(null===(t=E.data)||void 0===t?void 0:t.data)&&b(E.data.data[e])}}(t))})),Object(be.jsx)(Z.a,{display:"flex",justifyContent:"center",children:(null===(c=E.data)||void 0===c?void 0:c.pageCount)&&Object(be.jsx)(je.a,{page:v,count:null===(i=E.data)||void 0===i?void 0:i.pageCount,onChange:g})})]})]})}fa.defaultProps={value:"",showSearchBar:!1,onChange:void 0};var pa=fa;var xa=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect;return Object(be.jsx)(pa,{defaultValue:t,title:"Album",open:n,showSearchBar:a,useQueryArgs:{key:[he.ITUNES,he.ALBUMS],fn:function(e){return function(e,t){return ve.jsonp("/search",{params:{entity:"musicArtist",term:e,limit:400,offset:t}})}(e.term,e.page).then((function(e){return{data:e.results}}))}},onSelect:i,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(Oa,{artist:e})},e.artistId)}})},va=n(40),ga=n.n(va),Sa=n(69),ka=n(1269),Ia=n(1267),ya=n(1268),Ca=function(){return Object(be.jsx)(Be.a,{startIcon:Object(be.jsx)(ca,{}),component:te.a,onClick:function(){window.open("https://accounts.spotify.com/authorize?response_type=code&client_id=".concat("3f35b18cccb84c7fa03754a435abf551","&redirect_uri=").concat(encodeURIComponent(window.location.origin),"&scope=").concat(encodeURIComponent("user-read-email")),void 0,"top=100,left=100,width=500,height=700")},rel:"noopener noreferrer",children:"Sign in Spotify"})},Ea=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MUSIXMATCH_KEY:"8e8664c1c915c7da0340999018e703d3",REACT_APP_SPOTIFY_KEY:"3f35b18cccb84c7fa03754a435abf551",REACT_APP_SPOTIFY_SECRET_KEY:"3edc70893d3f41a6ba33011e227824d7"}),Pa=Ea.REACT_APP_SPOTIFY_KEY,Ua=Ea.REACT_APP_SPOTIFY_SECRET_KEY,Aa=btoa("".concat(Pa||"",":").concat(Ua||"")),wa=kn.a.create({baseURL:"https://api.spotify.com/v1/"}),Na=kn.a.create({baseURL:"https://accounts.spotify.com/api",headers:{Authorization:"Basic ".concat(Aa),"Content-Type":"application/x-www-form-urlencoded"}});function La(e,t,n,a){return wa.get("/search",{params:{q:t,type:e,offset:n-1},headers:Object(En.a)({},{Authorization:"Bearer ".concat(a||"")})}).then((function(e){return e.data}))}var Ma=function(e){var t=e.open,n=e.onClose,c=e.children,i=Object(j.c)(w),r=Object(j.b)(),o=Object(a.useCallback)(function(){var e=Object(Sa.a)(ga.a.mark((function e(t){var n,a;return ga.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("code",t),n.append("grant_type","authorization_code"),n.append("redirect_uri",window.location.origin),e.next=6,Na.post("/token",n);case 6:a=e.sent,r(L(a.data));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r]);return Object(a.useEffect)((function(){window.getSpotifyCode=o}),[o]),i?Object(be.jsx)(be.Fragment,{children:c({handleError:function(){r(M())}})}):Object(be.jsxs)(ma.a,{open:t,onClose:n,fullWidth:!0,children:[Object(be.jsx)(ha.a,{children:"Spotify need SignIn"}),Object(be.jsx)(Ia.a,{children:Object(be.jsx)(ya.a,{children:Object(be.jsx)(Ca,{})})}),Object(be.jsx)(ka.a,{children:Object(be.jsx)(Be.a,{onClick:n,color:"default",children:"Cancel"})})]})},Ta=n(215),Ra=n.n(Ta),Ba=Ra()({media:{height:100,width:100}}),qa=function(e){var t=e.artist,n=Ba();return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{display:"flex",justifyItems:"center",alignItems:"center",m:1,children:Object(be.jsx)(Pt.a,{image:t.images[0].url,className:n.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{noWrap:!0,children:t.name}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0})]})]})})};var Da=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect,r=Object(j.c)(w);return Object(be.jsx)(Ma,{open:n,onClose:c,children:function(e){var o=e.handleError;return Object(be.jsx)(pa,{defaultValue:t,title:"Spotify",open:n,useQueryArgs:{key:[he.SPOTIFY,he.ALBUMS],fn:function(e){return La("artist",e.term,e.page,null===r||void 0===r?void 0:r.access_token).then((function(e){return{data:e.artists.items,page:e.artists.offset,pageCount:Math.floor(e.artists.total/e.artists.limit)}}))},options:{onError:o}},showSearchBar:a,onSelect:i,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(qa,{artist:e})},e.id)}})}})},_a="https://twitter.com/",$a=function(e){var t=e.loading,n=e.open,c=e.defaultValue,i=e.onPatch,r=e.onClose,o=Object(a.useState)(""),s=Object(H.a)(o,2),l=s[0],d=s[1];return Object(be.jsxs)(ma.a,{open:n,onClose:r,fullWidth:!0,children:[Object(be.jsx)(ha.a,{children:"Twitter"}),Object(be.jsxs)(Z.a,{p:3,children:[Object(be.jsx)(An.a,{name:"twitter",label:_a,variant:"outlined",value:l,defaultValue:c,onChange:function(e){return d(e.target.value.replace(_a,""))},fullWidth:!0}),Object(be.jsx)(Rn,{fullWidth:!0,color:"primary",loading:t,onClick:function(){r(),i(l)},children:"UPDATE"})]})]})},Va=function(e){var t=e.wikipedia.title;return Object(be.jsx)("div",{children:Object(be.jsx)("p",{children:t})})},Wa=xe.a.create({baseURL:"https://ja.wikipedia.org/w/api.php"}),Fa=function(e){return Wa.jsonp("",{params:{format:"json",action:"query",prop:"extracts",explaintext:!0,exintro:!0,pageids:e}}).then((function(t){return t.query.pages[e||0]}))};var Ka=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect;return Object(be.jsx)(pa,{defaultValue:t,title:"Wikipedia",open:n,showSearchBar:a,useQueryArgs:{key:[he.WIKIPEDIA],fn:function(e){var t,n,a=e.term,c=e.page;return(t=a,n=c,Wa.jsonp("",{params:{format:"json",action:"query",list:"search",srsearch:t,sroffset:n}})).then((function(e){return{data:e.query.search,pageCount:Math.floor(e.query.searchinfo.totalhits/e.continue.sroffset)}}))}},onSelect:i,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(Va,{wikipedia:e})},e.pageid)}})};kn.a.defaults.baseURL=On;var Qa=function(){var e,t,n,a,c,i,r,o,s,l,u,b,O,m,h,f,p,x=Tt(),v=Object(H.a)(x,2),g=v[0],I=v[1],y=Tt(),E=Object(H.a)(y,2),P=E[0],U=E[1],A=Object(Y.h)(),w=Number(A.id),N=fe().onError,L=Object(j.c)(k),M=Object(j.c)(S),T=Object(j.b)(),R=Object(d.b)(),B=Object(J.a)([he.ARTIST,w],function(e,t){return function(){return hn.request($t,{id:e,currentUserId:t}).then((function(e){return e.artist}))}}(w,null===M||void 0===M?void 0:M.id),{onError:N}),q=Object(J.a)([he.ARTIST,w,he.ALBUMS,g],function(e,t){return function(){return hn.request(Vt,{id:e,albumPage:t}).then((function(e){return e.artist.albums}))}}(w,g),{onError:N}),D=Object(J.a)([he.ARTIST,w,he.MUSICS,P],function(e,t){return function(){return hn.request(Wt,{id:e,musicPage:t}).then((function(e){return e.artist.musics}))}}(w,P),{onError:N}),_=Object(J.a)([he.WIKIPEDIA,null===(e=B.data)||void 0===e?void 0:e.link.wikipedia],(function(){var e;return Fa(null===(e=B.data)||void 0===e?void 0:e.link.wikipedia)}),{enabled:!!(null===(t=B.data)||void 0===t?void 0:t.link.wikipedia),onError:N}),$=Object(J.a)([he.ITUNES,he.ARTIST,null===(n=B.data)||void 0===n?void 0:n.link.itunes],(function(){var e;return ge(null===(e=B.data)||void 0===e?void 0:e.link.itunes).then((function(e){return e.results[0]}))}),{enabled:!!(null===(a=B.data)||void 0===a?void 0:a.link.itunes),onError:N}),V=Object(yn.a)((function(){return function(e,t){return kn.a.post("".concat(G.ARTISTS,"/").concat(e).concat(G.BOOKMARKS),void 0,t)}(w,L)}),{onSuccess:function(e){T(C(e.headers)),R.setQueryData([he.ARTIST,w],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:N}),W=Object(yn.a)((function(){var e,t;return function(e,t,n){return kn.a.delete("".concat(G.ARTISTS,"/").concat(e).concat(G.BOOKMARKS,"/").concat(t||"undefined"),n)}(w,null===(e=B.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,L)}),{onSuccess:function(e){T(C(e.headers)),R.setQueryData([he.ARTIST,w],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:N}),F=Object(yn.a)((function(e){var t;return function(e,t,n,a){return kn.a.patch("".concat(G.ARTISTS,"/").concat(e).concat(G.LINKS,"/").concat(t||"undefined"),n,Object(En.a)({},a))}(w,null===(t=B.data)||void 0===t?void 0:t.link.id,e,L)}),{onSuccess:function(e){T(C(e.headers)),R.setQueryData([he.ARTIST,w],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{link:e.data})}))},onError:N}),K=function(e){return F.mutate({itunes:e.artistId})},Q=function(e){return F.mutate({wikipedia:e.pageid})},z=function(e){return F.mutate({spotify:e.id})},te=function(e){return F.mutate({twitter:e})};return Object(be.jsxs)(Mt,{children:[Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:11,children:Object(be.jsxs)(ee.a,{variant:"h5",children:[Object(be.jsx)($e.a,{}),null===(c=B.data)||void 0===c?void 0:c.name]})}),Object(be.jsx)(X.a,{item:!0,xs:1,children:Object(be.jsx)(ba,{count:null===(i=B.data)||void 0===i?void 0:i.bookmarksCount,bookmarked:!!(null===(r=B.data)||void 0===r?void 0:r.bookmark)||!1,onCreate:function(){return V.mutate()},onDestroy:function(){return W.mutate()}})})]}),Object(be.jsx)(Z.a,{children:Object(be.jsx)(ee.a,{variant:"body1",color:"initial",children:null===(o=_.data)||void 0===o?void 0:o.extract})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(oa,{twitter:{link:null===(s=B.data)||void 0===s?void 0:s.link.twitter,renderDialog:function(e,t){var n;return Object(be.jsx)($a,{defaultValue:(null===(n=B.data)||void 0===n?void 0:n.link.twitter)||void 0,open:e,loading:F.isLoading,onClose:t,onPatch:te})}},itunes:{link:(null===(l=$.data)||void 0===l?void 0:l.artistLinkUrl)||"",renderDialog:function(e,t){var n;return Object(be.jsx)(xa,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:K,showSearchBar:!0})}},wikipedia:{link:null===(u=B.data)||void 0===u?void 0:u.link.wikipedia,renderDialog:function(e,t){var n;return Object(be.jsx)(Ka,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:Q,showSearchBar:!0})}},spotify:{type:"artist",link:null===(b=B.data)||void 0===b?void 0:b.link.spotify,renderDialog:function(e,t){var n;return Object(be.jsx)(Da,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:z,showSearchBar:!0})}}})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Le,{bands:(null===(O=B.data)||void 0===O?void 0:O.bands)||[],loading:B.isLoading})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(ye,{albums:(null===(m=q.data)||void 0===m?void 0:m.data)||[],loading:q.isLoading,page:g,pageCount:null===(h=q.data)||void 0===h?void 0:h.pagination.totalPages,onPage:I})}),Object(be.jsx)(Ie,{musics:(null===(f=D.data)||void 0===f?void 0:f.data)||[],loading:D.isLoading,page:P,pageCount:null===(p=D.data)||void 0===p?void 0:p.pagination.totalPages,onPage:U})]})},za=n(1304),Ya=function(e){return Object(be.jsx)(Be.a,Object(En.a)(Object(En.a)({variant:"contained",color:"secondary"},e),{},{children:"Search by Itunes"}))},Ga=n(1291),Ha=n(1271);var Ja=function(e){var t=e.data,n=e.children;return(null===t||void 0===t?void 0:t.length)?Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Z.a,{my:3,children:Object(be.jsxs)(Ga.a,{severity:"warning",children:[Object(be.jsx)(Ha.a,{children:"Warning"}),"Already Existed \u2014 ",Object(be.jsx)("strong",{children:"check it out!"})]})}),Object(be.jsx)(Z.a,{mb:3,children:n})]}):Object(be.jsx)(be.Fragment,{})},Xa=function(){var e,t,n,c=Tt(),i=Object(H.a)(c,2),r=i[0],o=i[1],s=ia(),l=Object(H.a)(s,3),u=l[0],b=l[1],O=l[2],m=Object(a.useState)(),h=Object(H.a)(m,2),f=h[0],p=h[1],x=Object(In.d)(),v=x.errors,g=x.control,S=x.setValue,I=x.register,y=x.watch,E=x.handleSubmit,P=y().name,U=Object(za.a)(P,1e3),A=Object(H.a)(U,1)[0],w=Object(Y.f)(),N=Object(Y.i)().url.replace("/new",""),L=Object(j.b)(),M=Object(j.c)(k),T=fe().onError,R=Object(d.b)(),B=Object(yn.a)((function(e){return function(e,t){return kn.a.post(G.ARTISTS,e,t)}(e,M)}),{onSuccess:function(e){L(C(e.headers)),w.push("".concat(N,"/").concat(e.data.id)),R.setQueryData([he.ARTIST,e.data.id,{musicPage:1,albumPage:1}],e.data),f&&R.setQueryData([he.ITUNES,he.ARTIST,f.artistId],f)},onError:T}),q=Object(J.a)([he.ARTISTS,{page:r,query:A}],xn(1,{name_cont:A}),{enabled:!!A,onError:T});return Object(a.useEffect)((function(){if(I("link_attributes.itunes"),f){var e=f.artistName,t=f.artistId;S("link_attributes.itunes",t),S("name",e)}}),[I,f,S]),Object(be.jsx)(Mt,{children:Object(be.jsx)(de.a,{children:Object(be.jsxs)(Z.a,{p:3,children:[Object(be.jsx)(Ln,{name:"name",defaultValue:"",autoComplete:"on",label:"Name",variant:"outlined",control:g,errors:v,disabled:B.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(be.jsx)(Yn,{color:"inherit",size:20,loading:q.isLoading})}}),Object(be.jsx)(Ya,{onClick:b,disabled:!P,fullWidth:!0,disableElevation:!0}),Object(be.jsx)(xa,{defaultValue:P,open:u,onClose:O,onSelect:function(e){return p(e)}}),Object(be.jsx)(Ja,{data:null===(e=q.data)||void 0===e?void 0:e.data,children:Object(be.jsx)(Ne,{artists:null===(t=q.data)||void 0===t?void 0:t.data,page:r,pageCount:null===(n=q.data)||void 0===n?void 0:n.pagination.totalPages,onPage:o,loading:q.isLoading})}),Object(be.jsx)(Rn,{color:"primary",disabled:!P,loading:B.isLoading,onClick:E((function(e){return B.mutate(e)})),fullWidth:!0,children:"Create Artist"})]})})})},Za=function(){var e=Object(a.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],i=Object(Fn.useDebounce)(n,1e3),r=Object(H.a)(i,2),o=r[0],s=r[1].isPending,l=Tt(),d=Object(H.a)(l,2),u=d[0],j=d[1],b=fe().onError,O=Object(J.a)([he.MUSICS,u,o],fn(u,{title_cont:o}),{onError:b}),m=O.isLoading,h=O.data;return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Hn,{onChange:function(e){return c(e.target.value)},loading:m||s()}),Object(be.jsx)(Ie,{musics:(null===h||void 0===h?void 0:h.data)||[],loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:j})]})},ec=n(1277),tc=n(1210),nc=n(1285),ac=Object(Et.a)({media:{height:100,width:100}}),cc=function(e){var t=e.music,n=t.artworkUrl100,a=t.artistName,c=t.collectionCensoredName,i=t.trackCensoredName,r=t.trackViewUrl,o=ac();return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{display:"flex",justifyItems:"center",alignItems:"center",mx:1,children:Object(be.jsx)(Pt.a,{image:n,className:o.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{noWrap:!0,children:i}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0,children:a}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0,children:c}),Object(be.jsx)(Be.a,{href:r,target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()},children:"itunes"})]})]})})};var ic=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect;return Object(be.jsx)(pa,{defaultValue:t,title:"Album",open:n,showSearchBar:a,useQueryArgs:{key:[he.ITUNES,he.ALBUMS],fn:function(e){return function(e,t){return ve.jsonp("/search",{params:{entity:"song",term:e,limit:400,offset:t}})}(e.term,e.page).then((function(e){return{data:e.results}}))}},onSelect:i,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(cc,{music:e})},e.trackId)}})},rc=function(e){var t=e.music.track;return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{children:t.track_name}),Object(be.jsx)(ee.a,{children:t.album_name}),Object(be.jsx)(ee.a,{children:t.artist_name})]})})},oc=xe.a.create({baseURL:"https://api.musixmatch.com/ws/1.1",params:{apikey:"8e8664c1c915c7da0340999018e703d3"}});var sc=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect;return Object(be.jsx)(pa,{defaultValue:t,title:"Musixmatch",open:n,useQueryArgs:{key:[he.MUSIXMATCH],fn:function(e){var t,n=e.term;return(t=n,oc.jsonp("track.search",{params:{q_track:t}})).then((function(e){return{data:e.message.body.track_list}}))}},showSearchBar:a,onSelect:i,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(rc,{music:e})},e.track.track_id)}})},lc=Object(Et.a)({media:{height:100,width:100}}),dc=function(e){var t=e.track,n=lc();return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{display:"flex",justifyItems:"center",alignItems:"center",m:1,children:Object(be.jsx)(Pt.a,{image:t.album.images[0].url,className:n.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{noWrap:!0,children:t.name}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0,children:t.artists.map((function(e){return e.name}))})]})]})})};var uc=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect,r=Object(j.c)(w);return Object(be.jsx)(Ma,{open:n,onClose:c,children:function(e){var o=e.handleError;return Object(be.jsx)(pa,{defaultValue:t,title:"Spotify",open:n,useQueryArgs:{key:[he.SPOTIFY,he.ALBUMS],fn:function(e){return La("track",e.term,e.page,null===r||void 0===r?void 0:r.access_token).then((function(e){return{data:e.tracks.items,page:e.tracks.offset,pageCount:Math.floor(e.tracks.total/e.tracks.limit)}}))},options:{onError:o}},showSearchBar:a,onSelect:i,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(dc,{track:e})},e.id)}})}})},jc=n(58),bc=n.n(jc),Oc=n(1289);function mc(e){var t=e.maxLength,n=e.onSelectOption,c=e.onRemoveOption,i=e.textFieldProps,r=e.autocompleteProps,o=Object(a.useState)(!1),s=Object(H.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)([]),j=Object(H.a)(u,2),b=j[0],O=j[1],m=ia(),h=Object(H.a)(m,3),f=h[0],p=h[1],x=h[2];return Object(a.useEffect)((function(){O((null===r||void 0===r?void 0:r.value)||[])}),[r.inputValue,null===r||void 0===r?void 0:r.value]),Object(be.jsx)(Oc.a,Object(En.a)(Object(En.a)({},r),{},{open:f,disabled:l,getOptionDisabled:function(){return!!t&&b.length>=t},noOptionsText:"No Results",onChange:function(e,t,a){if(t&&Array.isArray(t)){switch(d(!0),a){case"select-option":n&&n(t[t.length-1],t);break;case"remove-option":var i=b.filter((function(e){return!t.includes(e)}))[0];c&&c(i,t)}d(!1),O(t)}},onOpen:p,onClose:x,renderInput:function(e){return Object(be.jsx)(An.a,Object(En.a)(Object(En.a)(Object(En.a)({},e),i),{},{InputProps:Object(En.a)(Object(En.a)(Object(En.a)({},i.InputProps),e.InputProps),{},{endAdornment:Object(be.jsxs)(be.Fragment,{children:[r.loading?Object(be.jsx)(Mn.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))}mc.defaultProps={onSelectOption:void 0,onRemoveOption:void 0,maxLength:void 0};var hc=mc,fc=function(){var e,t=Object(a.useState)(""),n=Object(H.a)(t,2),c=n[0],i=n[1],r=fe().onError,o=bc()(c,1e3),s=Object(H.a)(o,2),l=s[0],u=s[1].isPending,b=Object(j.c)(k),O=Object(j.b)(),m=Object(Y.h)(),h=Number(m.id),f=Number(m.userId),p=Object(d.b)(),x=p.getQueryData([he.MUSIC,h]),v=Object(yn.a)((function(e){var t=e.option;return function(e,t,n,a){return kn.a.post("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.COMPOSERS),n,a)}(f,h,t,b)}),{onSuccess:function(e,t){var n=t.options;O(C(e.headers)),p.setQueryData([he.MUSIC,h],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{composers:n})}))},onError:r}),g=Object(yn.a)((function(e){var t=e.option;return function(e,t,n,a){return kn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.COMPOSERS,"/").concat(n),a)}(f,h,t.id,b)}),{onSuccess:function(e,t){var n=t.options;O(C(e.headers)),p.setQueryData([he.MUSIC,h],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{composers:n})}))},onError:r}),S=Object(J.a)([he.ARTISTS,{query:l}],xn(1,{name_eq:l}),{enabled:!!l,onError:r});return Object(be.jsx)(hc,{onSelectOption:function(e,t){return v.mutate({option:e,options:t})},onRemoveOption:function(e,t){return g.mutate({option:e,options:t})},textFieldProps:{label:"Composers",variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,value:(null===x||void 0===x?void 0:x.composers)||[],options:(null===(e=S.data)||void 0===e?void 0:e.data)||[],loading:v.isLoading||g.isLoading||u(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t){return i(t)}}})},pc=function(){var e,t=Object(a.useState)(""),n=Object(H.a)(t,2),c=n[0],i=n[1],r=fe().onError,o=bc()(c,1e3),s=Object(H.a)(o,2),l=s[0],u=s[1].isPending,b=Object(j.c)(k),O=Object(j.b)(),m=Object(Y.h)(),h=Number(m.id),f=Number(m.userId),p=Object(d.b)(),x=p.getQueryData([he.MUSIC,h]),v=Object(yn.a)((function(e){var t=e.option;return function(e,t,n,a){return kn.a.post("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.LYRISTS),n,a)}(f,h,t,b)}),{onSuccess:function(e,t){var n=t.options;O(C(e.headers)),p.setQueryData([he.MUSIC,h],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{lyrists:n})}))},onError:r}),g=Object(yn.a)((function(e){var t=e.option;return function(e,t,n,a){return kn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.LYRISTS,"/").concat(n),a)}(f,h,t.id,b)}),{onSuccess:function(e,t){var n=t.options;O(C(e.headers)),p.setQueryData([he.MUSIC,h],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{lyrists:n})}))},onError:r}),S=Object(J.a)([he.ARTISTS,{query:l}],xn(1,{name_eq:l}),{enabled:!!l,onError:r});return Object(be.jsx)(hc,{onSelectOption:function(e,t){return v.mutate({option:e,options:t})},onRemoveOption:function(e,t){return g.mutate({option:e,options:t})},textFieldProps:{label:"Lyrists",variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,value:(null===x||void 0===x?void 0:x.lyrists)||[],options:(null===(e=S.data)||void 0===e?void 0:e.data)||[],loading:v.isLoading||g.isLoading||u(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t){return i(t)}}})},xc=function(){var e,t=Object(a.useState)(""),n=Object(H.a)(t,2),c=n[0],i=n[1],r=fe().onError,o=bc()(c,1e3),s=Object(H.a)(o,2),l=s[0],u=s[1].isPending,b=Object(j.c)(k),O=Object(j.b)(),m=Object(Y.i)(),h=Number(m.params.id),f=Object(d.b)(),p=f.getQueryData([he.MUSIC,h]),x=Object(yn.a)((function(e){var t=e.option;return kn.a.post(m.url+G.BANDS,t,b)}),{onSuccess:function(e,t){var n=t.option;O(C(e.headers)),f.setQueryData([he.MUSIC,h],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{band:n})}))},onError:r}),v=Object(yn.a)((function(e){var t=e.option;return kn.a.delete("".concat(m.url+G.BANDS,"/").concat(t.id),b)}),{onSuccess:function(e){O(C(e.headers)),f.setQueryData([he.MUSIC,h],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{band:null})}))},onError:r}),g=Object(J.a)([he.BANDS,{query:l}],pn(1,{name_cont:l}),{enabled:!!l,onError:r});return Object(be.jsx)(hc,{maxLength:1,onSelectOption:function(e,t){return x.mutate({option:e,options:t})},onRemoveOption:function(e,t){return v.mutate({option:e,options:t})},textFieldProps:{label:"Band",variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,options:(null===(e=g.data)||void 0===e?void 0:e.data)||[],value:(null===p||void 0===p?void 0:p.band)?[p.band]:[],inputValue:c,loading:x.isLoading||v.isLoading||u(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t,n){return"input"===n&&i(t)}}})},vc=function(){var e=ia(),t=Object(H.a)(e,3),n=t[0],a=t[1],c=t[2];return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{onClick:a,children:"Edit"}),Object(be.jsx)(ma.a,{onClose:c,open:n,fullWidth:!0,children:Object(be.jsx)(Lt.a,{children:Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(ha.a,{children:"Edit Info"}),Object(be.jsx)(fc,{}),Object(be.jsx)(pc,{}),Object(be.jsx)(xc,{})]})})})]})},gc=n(1272),Sc=n(117),kc=n.n(Sc),Ic=n(1287),yc=["name","defaultValue","onChange","onKeyPress","control","rules","children"],Cc=function(e){var t=e.name,n=e.defaultValue,a=e.onChange,c=e.onKeyPress,i=e.control,r=e.rules,o=e.children,s=Object(Pn.a)(e,yc),l=Object(In.c)({name:t,control:i,rules:r,defaultValue:n}),d=l.field,u=d.ref,j=d.value,b=d.onChange,O=l.meta.invalid;return Object(be.jsx)(Ic.a,Object(En.a)(Object(En.a)({},s),{},{value:j,inputRef:u,error:O,onChange:function(e,t){a&&a(e,t),b(e.target.value)},onKeyPress:function(e){c&&c(e)},children:o}))};Cc.defaultProps={rules:{}};var Ec=Cc,Pc=Bn.b().shape({artist_id:Bn.a().required(),role:Bn.a().required()}),Uc=Bn.b().shape({email:Bn.d().email().required(),nickname:Bn.d().required().min(4).max(30),familyname:Bn.d().required().max(35),givenname:Bn.d().required().max(35),introduction:Bn.d()}),Ac=Bn.b().shape({title:Bn.d().required(),description:Bn.d().required()}),wc=Bn.b().shape({email:Bn.d().email().required(),description:Bn.d().required()}),Nc=function(){var e,t,n=Object(a.useState)(""),c=Object(H.a)(n,2),i=c[0],r=c[1],o=ia(),l=Object(H.a)(o,3),u=l[0],b=l[1],O=l[2],m=bc()(i,1e3),h=Object(H.a)(m,1)[0],f=Object(In.d)({defaultValues:{artist_id:void 0},resolver:Object(Cn.a)(Pc)}),p=f.control,x=f.handleSubmit,v=f.setValue,g=f.register,S=fe().onError,I=Object(Y.i)(),y=Number(I.params.id),E=I.url+G.ARTISTS,P=Object(j.b)(),U=Object(j.c)(k),A=Object(d.b)(),w=A.getQueryData([he.MUSIC,y]),N=Object(yn.a)((function(e){return kn.a.post(E,e,U)}),{onSuccess:function(e){P(C(e.headers)),A.setQueryData([he.MUSIC,y],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{artistMusics:[].concat(Object(ze.a)(t.artistMusics||[]),[e.data])})}))},onError:S}),L=Object(yn.a)((function(e){return kn.a.delete("".concat(E,"/").concat(e.id),U)}),{onSuccess:function(e,t){P(C(e.headers)),A.setQueryData([he.MUSIC,y],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{artistMusics:e.artistMusics&&e.artistMusics.filter((function(e){return e!==t}))})}))},onError:S}),M=Object(J.a)([he.ARTISTS,{query:h}],xn(1,{name_cont:h}),{enabled:!!h,onError:S});return Object(a.useEffect)((function(){g("artist_id")}),[g]),Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{onClick:b,children:"Edit"}),Object(be.jsxs)(ma.a,{onClose:O,open:u,fullWidth:!0,children:[Object(be.jsx)(ha.a,{children:"Role"}),Object(be.jsxs)(Lt.a,{children:[Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Role"}),Object(be.jsx)(re.a,{children:"Artist"}),Object(be.jsx)(re.a,{align:"right",children:"Delete"})]})}),Object(be.jsx)(ie.a,{children:null===w||void 0===w||null===(e=w.artistMusics)||void 0===e?void 0:e.map((function(e){return Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"/",children:e.role})}),Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.artist.id),children:e.artist.name})}),Object(be.jsx)(re.a,{align:"right",children:Object(be.jsx)(Ue.a,{onClick:function(){return L.mutate(e)},children:Object(be.jsx)(kc.a,{})})})]},e.id)}))})]})})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsxs)(X.a,{container:!0,spacing:1,children:[Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsxs)(Ec,{defaultValue:0,control:p,name:"role",variant:"outlined",fullWidth:!0,children:[Object(be.jsx)(gc.a,{value:0,children:"Vocal"}),Object(be.jsx)(gc.a,{value:1,children:"Guitar"}),Object(be.jsx)(gc.a,{value:2,children:"Base"}),Object(be.jsx)(gc.a,{value:3,children:"Drum"}),Object(be.jsx)(gc.a,{value:4,children:"Vocal&Guitar"}),Object(be.jsx)(gc.a,{value:5,children:"Vocal&Base"})]})}),Object(be.jsx)(X.a,{item:!0,xs:9,children:Object(be.jsx)(hc,{maxLength:1,onSelectOption:function(e){return v("artist_id",e.id)},onRemoveOption:function(){return v("artist_id","")},textFieldProps:{label:"Artist",variant:"outlined"},autocompleteProps:{multiple:!0,options:(null===(t=M.data)||void 0===t?void 0:t.data)||[],inputValue:i,getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t,n){return"input"===n&&r(t)}}})})]})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Rn,{color:"primary",loading:N.isLoading,onClick:x((function(e){return N.mutate(e)})),fullWidth:!0,children:"Add Artist"})})]})]})]})},Lc=function(){var e,t,n=Object(a.useState)(""),c=Object(H.a)(n,2),i=c[0],r=c[1],o=ia(),l=Object(H.a)(o,3),u=l[0],b=l[1],O=l[2],m=bc()(i,1e3),h=Object(H.a)(m,2),f=h[0],p=h[1].isPending,x=Object(In.d)(),v=x.register,g=x.handleSubmit,S=x.setValue,I=Object(Y.h)(),y=Number(I.userId),E=Number(I.id),P=Object(j.b)(),U=Object(j.c)(k),A=fe().onError,w=Object(d.b)(),N=w.getQueryData([he.MUSIC,E]),L=Object(yn.a)((function(e){return function(e,t,n,a){return kn.a.post("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.ALBUMS),n,Object(En.a)(Object(En.a)({},a),{},{"Key-inflection":"camel"}))}(y,E,e,U)}),{onSuccess:function(e){P(C(e.headers)),w.setQueryData([he.MUSIC,E],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{albums:[].concat(Object(ze.a)(t.albums||[]),[e.data.album])})}))},onError:A}),M=Object(yn.a)((function(e){return function(e,t,n,a){return kn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.ALBUMS,"/").concat(n),a)}(y,E,e.id,U)}),{onSuccess:function(e,t){P(C(e.headers)),w.setQueryData([he.MUSIC,E],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{albums:e.albums&&e.albums.filter((function(e){return e!==t}))})}))},onError:A}),T=Object(J.a)([he.ALBUMS,{query:f}],vn(1,{title_cont:f}),{enabled:!!f,onError:A});return Object(a.useEffect)((function(){v("album_id")}),[v]),Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{onClick:b,children:"Edit"}),Object(be.jsxs)(ma.a,{onClose:O,open:u,fullWidth:!0,children:[Object(be.jsx)(ha.a,{children:"Edit Albums"}),Object(be.jsxs)(Lt.a,{children:[Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Album"}),Object(be.jsx)(re.a,{align:"right",children:"Delete"})]})}),Object(be.jsx)(ie.a,{children:null===N||void 0===N||null===(e=N.albums)||void 0===e?void 0:e.map((function(e){return Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"/",children:e.title})}),Object(be.jsx)(re.a,{align:"right",children:Object(be.jsx)(Ue.a,{onClick:function(){return M.mutate(e)},children:Object(be.jsx)(kc.a,{})})})]},e.id)}))})]})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(hc,{maxLength:1,onSelectOption:function(e){return S("album_id",e.id)},onRemoveOption:function(){return S("album_id","")},textFieldProps:{label:"Albums",variant:"outlined",margin:"normal"},autocompleteProps:{options:(null===(t=T.data)||void 0===t?void 0:t.data)||[],multiple:!0,loading:L.isLoading||M.isLoading||p(),getOptionSelected:function(e,t){return e.title===t.title},getOptionLabel:function(e){return e.title},onInputChange:function(e,t){return r(t)}}})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Rn,{color:"primary",loading:L.isLoading,onClick:g((function(e){return L.mutate(e)})),fullWidth:!0,children:"Add Artist"})})]})]})]})},Mc=function(){var e,t,n,a,c,i=fe().onError,r=Object(Y.h)(),o=Number(r.id),l=Number(r.userId),u=Object(j.b)(),b=Object(j.c)(k),O=Object(d.b)(),m=O.getQueryData([he.MUSIC,o]),h=O.getQueryData([he.ITUNES,he.MUSIC,null===m||void 0===m||null===(e=m.link)||void 0===e?void 0:e.itunes]),f=Object(yn.a)((function(e){return function(e,t,n,a,c){return kn.a.patch("".concat(G.USERS,"/").concat(e,"/").concat(G.MUSICS,"/").concat(t,"/").concat(G.LINKS,"/").concat(n||"undefined"),a,Object(En.a)({},c))}(l,o,null===m||void 0===m?void 0:m.link.id,e,b)}),{onSuccess:function(e){u(C(e.headers)),O.setQueryData([he.MUSIC,o],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{link:e.data})}))},onError:i}),p=function(e){return f.mutate({spotify:e.id})},x=function(e){return f.mutate({itunes:e.trackId})},v=function(e){return f.mutate({musixmatch:e.track.track_id})};return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(oa,{itunes:{link:null===h||void 0===h?void 0:h.trackViewUrl,renderDialog:function(e,t){return Object(be.jsx)(ic,{defaultValue:null===m||void 0===m?void 0:m.title,open:e,onClose:t,onSelect:x,showSearchBar:!0})}},spotify:{type:"track",link:null===m||void 0===m||null===(t=m.link)||void 0===t?void 0:t.spotify,renderDialog:function(e,t){return Object(be.jsx)(uc,{defaultValue:null===m||void 0===m?void 0:m.title,open:e,onClose:t,onSelect:p,showSearchBar:!0})}},musixmatch:{renderDialog:function(e,t){return Object(be.jsx)(sc,{defaultValue:null===m||void 0===m?void 0:m.title,open:e,onClose:t,onSelect:v,showSearchBar:!0})}}})}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(vc,{}),Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Main"}),Object(be.jsx)(re.a,{})]})}),Object(be.jsxs)(ie.a,{children:[Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"ReleaseDate"}),Object(be.jsx)(re.a,{children:(null===h||void 0===h?void 0:h.releaseDate)&&Object(nc.a)(new Date(h.releaseDate),"yyyy/MM/dd")})]}),Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Composer"}),Object(be.jsx)(re.a,{children:null===m||void 0===m||null===(n=m.composers)||void 0===n?void 0:n.map((function(e){return Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))})]}),Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Lyrists"}),Object(be.jsx)(re.a,{children:null===m||void 0===m||null===(a=m.lyrists)||void 0===a?void 0:a.map((function(e){return Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.id),children:e.name},e.id)}))})]}),Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Band"}),Object(be.jsx)(re.a,{children:(null===m||void 0===m?void 0:m.band)&&Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.BANDS,"/").concat(m.band.id),children:m.band.name})})]}),Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Created by"}),Object(be.jsx)(re.a,{children:(null===m||void 0===m?void 0:m.user)&&Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.USERS,"/").concat(m.user.id),children:m.user.nickname})})]})]})]})})]}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(Nc,{}),Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Role"}),Object(be.jsx)(re.a,{children:"Artist"})]})}),Object(be.jsx)(ie.a,{children:null===m||void 0===m||null===(c=m.artistMusics)||void 0===c?void 0:c.map((function(e){return Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:e.role}),Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.ARTISTS,"/").concat(e.artist.id),children:e.artist.name})})]},e.id)}))})]})})]}),Object(be.jsx)(Lc,{}),Object(be.jsx)(ye,{albums:(null===m||void 0===m?void 0:m.albums)||[]})]})},Tc=function(){var e=ia(),t=Object(H.a)(e,3),n=t[0],a=t[1],c=t[2],i=Object(In.d)(),r=i.errors,o=i.control,s=i.handleSubmit,l=Object(Y.f)(),u=Object(Y.i)(),b=Number(u.params.id),O=Number(u.params.userId),m=Object(j.c)(k),h=Object(d.b)(),f=h.getQueryData([he.MUSIC,b]),p=fe().onError,x=Object(j.b)(),v=Object(yn.a)((function(){return function(e,t,n){return kn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t),n)}(O,b,m)}),{onSuccess:function(e){x(C(e.headers)),h.removeQueries([he.MUSIC,b]),l.push(G.ROOT)},onError:p});return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(ma.a,{onClose:c,open:n,children:Object(be.jsxs)(Z.a,{m:3,children:[Object(be.jsx)(ha.a,{children:"Are you absolutely sure?"}),Object(be.jsxs)(ee.a,{children:["Please type"," ",Object(be.jsx)(Z.a,{display:"inline",fontWeight:"Bold",children:null===f||void 0===f?void 0:f.title})," ","to confirm."]}),Object(be.jsx)(Ln,{name:"title",defaultValue:"",autoComplete:"on",label:"Title",variant:"outlined",control:o,errors:r,disabled:v.isLoading,fullWidth:!0,rules:{validate:function(e){return e===(null===f||void 0===f?void 0:f.title)}}}),Object(be.jsx)(Rn,{type:"button",color:"secondary",loading:v.isLoading,onClick:s((function(){return v.mutate()})),fullWidth:!0,children:"Delete Music"})]})}),Object(be.jsx)(Be.a,{variant:"contained",color:"secondary",onClick:a,children:"Delete this music"})]})};Tc.defaultProps={music:void 0};var Rc=Tc,Bc=function(e){var t=e.issues,n=e.page,a=e.pageCount,c=e.onPage,i=e.loading,r=Object(Y.i)();return Object(be.jsx)(me,{page:n,pageCount:a,onPage:c,loading:i,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsx)(se.a,{children:Object(be.jsx)(re.a,{children:"title"})})}),Object(be.jsx)(ie.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(be.jsx)(se.a,{children:Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"".concat(r.url,"/").concat(e.id),children:e.title})})},e.id)}))})]})})},qc=function(){var e=Tt(),t=Object(H.a)(e,2),n=t[0],a=t[1],c=Object(Y.i)(),i=fe().onError,r=Object(J.a)([he.ISSUES,n],function(e,t,n){return function(){return hn.request(Ht,{musicId:e,page:t,q:n}).then((function(e){return e.issues}))}}(Number(c.params.id),n),{onError:i}),o=r.data,l=r.isLoading;return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:10,children:Object(be.jsx)(An.a,{variant:"outlined",label:"Search Issues",onKeyPress:function(){},fullWidth:!0})}),Object(be.jsx)(X.a,{item:!0,xs:2,children:Object(be.jsx)(Be.a,{variant:"contained",component:s.b,to:c.url+G.NEW,children:"New"})})]})}),Object(be.jsx)(Bc,{issues:(null===o||void 0===o?void 0:o.data)||[],loading:l,page:n,pageCount:null===o||void 0===o?void 0:o.pagination.totalPages,onPage:a})]})},Dc=n(399),_c=n.n(Dc),$c=n(400),Vc=n.n($c),Wc=function(e){var t=e.files,n=e.blobPath,a=e.treePath;return Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{}),Object(be.jsx)(re.a,{children:"files"})]})}),Object(be.jsx)(ie.a,{children:t.map((function(e){return Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"blob"===e.type?Object(be.jsx)(_c.a,{color:"action"}):Object(be.jsx)(Vc.a,{color:"action"})}),Object(be.jsx)(re.a,{children:"blob"===e.type?Object(be.jsx)(te.a,{to:{pathname:"".concat(n,"/").concat(e.name),state:{oid:e.oid,path:e.name}},component:s.b,children:e.name}):Object(be.jsx)(te.a,{to:{pathname:"".concat(a,"/").concat(e.name),state:{oid:e.oid,path:e.name}},component:s.b,children:e.name})})]},e.oid)}))})]})})},Fc=function(){var e,t=fe().onError,n=Object(Y.i)(),a=Number(n.params.id),c=Number(n.params.userId),i=Object(d.b)().getQueryData([he.MUSIC,a]),r=Object(J.a)([he.MUSIC,a,he.REPOSITORY],function(e){return function(){return hn.request(Xt,{id:e}).then((function(e){return e.music}))}}(a),{onError:t});return Object(be.jsxs)("div",{children:[Object(be.jsxs)("p",{children:[On,"/git/",c,"/",null===i||void 0===i?void 0:i.title,".git"]}),Object(be.jsx)("p",{children:"Files"}),Object(be.jsx)(Wc,{files:(null===(e=r.data)||void 0===e?void 0:e.rootTree)||[],treePath:"".concat(n.url,"/tree"),blobPath:"".concat(n.url,"/blob")})]})},Kc=function(){var e,t,n=fe().onError,a=Object(Y.h)(),c=Object(Y.i)(),i=Object(Y.g)().state.oid,r=Number(a.id),o=Object(J.a)([he.MUSIC,r,he.BLOB],function(e,t){return function(){return hn.request(bn,{id:e,oid:t}).then((function(e){return e.music}))}}(r,i),{onError:n});return Object(be.jsxs)("div",{children:[Object(be.jsx)("pre",{children:null===(e=o.data)||void 0===e?void 0:e.blob}),Object(be.jsx)(Wc,{files:(null===(t=o.data)||void 0===t?void 0:t.tree)||[],treePath:c.url.replace("tree","blob"),blobPath:c.url.replace("tree","blob")})]})},Qc=n(1296),zc=n(1273),Yc=function(){var e,t=fe().onError,n=Object(Y.h)(),a=Object(Y.g)().state.oid,c=Number(n.id),i=Object(J.a)([he.MUSIC,c,he.BLOB],function(e,t){return function(){return hn.request(jn,{id:e,oid:t}).then((function(e){return e.music}))}}(c,a),{onError:t});return Object(be.jsx)(de.a,{children:Object(be.jsx)(Qc.a,{style:zc.a,children:(null===(e=i.data)||void 0===e?void 0:e.blob)||""})})},Gc=function(){var e=Object(In.d)({resolver:Object(Cn.a)(Ac)}),t=e.errors,n=e.control,a=e.handleSubmit,c=Object(Y.i)().url.replace("/new",""),i=Object(Y.h)(),r=Number(i.userId),o=Number(i.id),s=Object(j.c)(k),l=Object(Y.f)(),d=Object(j.b)(),u=fe().onError,b=Object(yn.a)((function(e){return function(e,t,n,a){return kn.a.post("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.ISSUES),n,a)}(r,o,e,s)}),{onSuccess:function(e){d(C(e.headers)),l.push("".concat(c,"/").concat(e.data.id))},onError:u}),O=b.isLoading,m=b.mutate;return Object(be.jsxs)("form",{onSubmit:a((function(e){return m(e)})),children:[Object(be.jsx)(Ln,{name:"title",defaultValue:"",autoComplete:"on",label:"Title",variant:"outlined",margin:"normal",control:n,errors:t,disabled:O,fullWidth:!0}),Object(be.jsx)(Ln,{name:"description",defaultValue:"",autoComplete:"on",label:"Description",variant:"outlined",margin:"normal",control:n,errors:t,disabled:O,rows:10,fullWidth:!0,multiline:!0}),Object(be.jsx)(Rn,{type:"submit",loading:O,children:"create issue"})]})},Hc=n(403),Jc=n.n(Hc),Xc=n(1297),Zc=n(262),ei=["inline","className","children"],ti=function(){var e=Object(Y.h)(),t=Number(e.id),n=fe().onError,a=Object(J.a)([he.ISSUE,t],function(e){return function(){return hn.request(Yt,{id:e}).then((function(e){return e.issue}))}}(t),{onError:n}),c=a.data,i=a.isLoading,r={code:function(e){var t=e.inline,n=e.className,a=e.children,c=Object(Pn.a)(e,ei),i=/language-(\w+)/.exec(n||"");return!t&&i?Object(be.jsx)(Xc.a,Object(En.a)(Object(En.a)({style:Zc.dark,language:i[1],PreTag:"div"},c),{},{children:String(a).replace(/\n$/,"")})):Object(be.jsx)("code",Object(En.a)(Object(En.a)({className:n},c),{},{children:a}))}};return Object(be.jsxs)(be.Fragment,{children:[i&&Object(be.jsx)(le.a,{}),Object(be.jsx)(ee.a,{variant:"h3",children:null===c||void 0===c?void 0:c.title}),Object(be.jsx)(Jc.a,{components:r,children:(null===c||void 0===c?void 0:c.description)||""})]})},ni=n(405),ai=n.n(ni),ci=function(){var e,t,n,a=fe().onError,c=Object(Y.h)(),i=Number(c.id),r=Object(d.b)().getQueryData([he.MUSIC,i]),o=Object(J.a)([he.MUSIXMATCH,null===r||void 0===r?void 0:r.link.id],(function(){return e=null===r||void 0===r?void 0:r.link.musixmatch,oc.jsonp("track.lyrics.get",{params:{track_id:e}});var e}),{onError:a}),s=o.data;return o.isLoading?Object(be.jsx)(Mn.a,{}):Object(be.jsx)("div",{className:ai.a.lyric,children:(null===s||void 0===s||null===(e=s.message)||void 0===e||null===(t=e.body)||void 0===t||null===(n=t.lyrics)||void 0===n?void 0:n.lyrics_body)||""})},ii=n(1276),ri=n(1294),oi=n(1241),si=n(1275),li=n(1308),di=n(1274),ui=n(1305),ji=n(407),bi=n.n(ji),Oi=n(408),mi=n.n(Oi),hi=n(409),fi=n.n(hi),pi=n(406),xi=n.n(pi),vi=function(e){var t=e.value;return e.muted||!t?Object(be.jsx)(xi.a,{}):t>=.6?Object(be.jsx)(bi.a,{}):t>=.3?Object(be.jsx)(mi.a,{}):Object(be.jsx)(fi.a,{})};vi.defaultProps={value:void 0,muted:!1};var gi=function(e){var t=e.className,n=e.volume,a=e.muted,c=e.onMute,i=e.onVolume;return Object(be.jsx)(di.a,{className:t,value:"",selected:a,onChange:function(){c&&c()},children:Object(be.jsxs)(Z.a,{width:200,display:"flex",alignItems:"center",children:[Object(be.jsx)(vi,{value:n,muted:a}),Object(be.jsx)(ui.a,{className:t,disabled:a,value:n,onClick:function(e){return e.stopPropagation()},onChange:i})]})})};gi.defaultProps={className:"",muted:!1,onVolume:void 0,onMute:void 0};var Si=gi,ki=n(411),Ii=n.n(ki),yi=n(410),Ci=n.n(yi),Ei=function(e){var t=e.className,n=e.paused,a=e.disabled,c=e.onPause;return Object(be.jsx)(di.a,{className:t,value:"check",disabled:a,onClick:function(){a||c&&c()},children:n?Object(be.jsx)(Ci.a,{}):Object(be.jsx)(Ii.a,{})})};Ei.defaultProps={className:"",paused:!0,disabled:!1,onPause:void 0};var Pi=Ei,Ui=Object(Et.a)((function(e){return Object(oi.a)({appBar:{top:"auto",bottom:0},itunes:{color:e.palette.itunes.main},colorPrimary:{background:e.palette.itunes.light},barColorPrimary:{backgroundColor:e.palette.itunes.main}})})),Ai=function(e){var t=e.src,n=e.selectInput,a=e.onVolume,c=e.onPlay,i=e.onMute,r=Object(ri.a)({src:t||""}),o=Object(H.a)(r,3),s=o[0],l=o[1],d=o[2],u=Ui();return Object(be.jsxs)(si.a,{position:"fixed",color:"inherit",className:u.appBar,children:[s,Object(be.jsx)(le.a,{classes:{colorPrimary:u.colorPrimary,barColorPrimary:u.barColorPrimary},variant:"determinate",value:l.time/l.duration*100}),Object(be.jsx)(ii.a,{children:Object(be.jsx)(Z.a,{width:"100%",children:Object(be.jsxs)(Z.a,{display:"flex",justifyContent:"space-between",children:[Object(be.jsxs)(li.a,{children:[Object(be.jsx)(Si,{className:u.itunes,muted:l.muted,volume:100*l.volume,onVolume:function(e,t){Array.isArray(t)||a(t,d)},onMute:function(){return i(l,d)}}),Object(be.jsx)(Pi,{className:u.itunes,paused:l.paused,onPause:function(){return c(l,d)}})]}),Object(be.jsx)(Z.a,{display:"flex",alignItems:"center",children:n})]})})})]})},wi=Object(Et.a)((function(e){return Object(oi.a)({appBar:{top:"auto",bottom:0,color:"#191414"},spotify:{color:e.palette.spotify.main},colorPrimary:{background:e.palette.spotify.light},barColorPrimary:{backgroundColor:e.palette.spotify.main}})})),Ni=function(e){var t=e.src,n=e.selectInput,a=e.onVolume,c=e.onPlay,i=e.onMute,r=Object(ri.a)({src:t}),o=Object(H.a)(r,3),s=o[0],l=o[1],d=o[2],u=Object(j.c)(w),b=wi();return Object(be.jsxs)(si.a,{position:"fixed",color:"inherit",className:b.appBar,children:[s,Object(be.jsx)(le.a,{classes:{colorPrimary:b.colorPrimary,barColorPrimary:b.barColorPrimary},variant:"determinate",value:l.time/l.duration*100}),Object(be.jsx)(ii.a,{children:Object(be.jsx)(Z.a,{width:"100%",children:Object(be.jsxs)(Z.a,{display:"flex",justifyContent:"space-between",children:[Object(be.jsxs)(li.a,{children:[Object(be.jsx)(Si,{className:b.spotify,muted:l.muted,volume:100*l.volume,onVolume:function(e,t){Array.isArray(t)||a(t,d)},onMute:function(){return i(l,d)}}),Object(be.jsx)(Pi,{className:b.spotify,paused:l.paused,onPause:function(){return c(l,d)},disabled:!u})]}),!u&&Object(be.jsx)(Ca,{}),Object(be.jsx)(Z.a,{display:"flex",alignItems:"center",children:n})]})})})]})},Li=function(e){var t=e.src,n=Object.entries(t).filter((function(e){return!!Object(H.a)(e,2)[1]})).map((function(e){return Object(H.a)(e,1)[0]})),c=Object(a.useState)(""),i=Object(H.a)(c,2),r=i[0],o=i[1],s=function(e){return o(e.target.value)},l=function(e,t){return e.muted?t.unmute():t.mute()},d=function(e,t){return e.paused?t.play():t.pause()},u=function(e,t){Array.isArray(e)||t.volume(e/100)};Object(a.useEffect)((function(){t&&o(n[0])}),[t]);var j=function(){return Object(be.jsx)(Z.a,{display:"flex",alignItems:"center",children:Object(be.jsx)(Ic.a,{value:r,onChange:s,children:n.map((function(e){return Object(be.jsx)(gc.a,{value:e,children:e},e)}))})})};return"itunes"===r?Object(be.jsxs)(be.Fragment,{children:[t.itunes&&Object(be.jsx)(Ai,{src:t.itunes,selectInput:Object(be.jsx)(j,{}),onMute:l,onVolume:u,onPlay:d}),Object(be.jsx)(ii.a,{})]}):"spotify"===r?Object(be.jsxs)(be.Fragment,{children:[t.spotify&&Object(be.jsx)(Ni,{src:t.spotify,selectInput:Object(be.jsx)(j,{}),onMute:l,onVolume:u,onPlay:d}),Object(be.jsx)(ii.a,{})]}):Object(be.jsx)(be.Fragment,{})},Mi=function(){var e,t,n,a,c,i,r,o,l,u,b,O,m,h=Object(Y.i)(),f=Number(h.params.id),p=Number(h.params.userId),x=Object(Y.g)(),v=fe().onError,g=Object(j.c)(S),I=Object(j.c)(k),y=Object(j.c)(w),E=Object(j.b)(),P=Object(d.b)(),U=Object(J.a)([he.MUSIC,f],function(e,t){return function(){return hn.request(Jt,{id:e,currentUserId:t}).then((function(e){return e.music}))}}(f,null===g||void 0===g?void 0:g.id),{onError:v}),A=Object(J.a)([he.ITUNES,he.MUSIC,null===(e=U.data)||void 0===e||null===(t=e.link)||void 0===t?void 0:t.itunes],(function(){var e;return ke(null===(e=U.data)||void 0===e?void 0:e.link.itunes).then((function(e){return e.results[0]}))}),{enabled:!!(null===(n=U.data)||void 0===n||null===(a=n.link)||void 0===a?void 0:a.itunes),onError:v,retry:2}),N=Object(J.a)([he.SPOTIFY,he.MUSIC,null===(c=U.data)||void 0===c||null===(i=c.link)||void 0===i?void 0:i.spotify],(function(){var e;return function(e,t){return wa.get("/tracks/".concat(e||""),{headers:Object(En.a)({},{Authorization:"Bearer ".concat(t||"")})}).then((function(e){return e.data}))}(null===(e=U.data)||void 0===e?void 0:e.link.spotify,null===y||void 0===y?void 0:y.access_token)}),{enabled:!!(null===(r=U.data)||void 0===r||null===(o=r.link)||void 0===o?void 0:o.spotify)&&!!y,onError:function(e){E(M()),v(e)},retry:2}),L=Object(yn.a)((function(){return function(e,t,n){return kn.a.post("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.BOOKMARKS),void 0,n)}(p,f,I)}),{onSuccess:function(e){E(C(e.headers)),P.setQueryData([he.MUSIC,f],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:v}),T=Object(yn.a)((function(){var e,t;return function(e,t,n,a){return kn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.MUSICS,"/").concat(t).concat(G.BOOKMARKS,"/").concat(n||"undefined"),a)}(p,f,null===(e=U.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,I)}),{onSuccess:function(e){E(C(e.headers)),P.setQueryData([he.MUSIC,f],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:v});return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)(Mt,{children:[Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:11,children:Object(be.jsxs)(ee.a,{variant:"h5",children:[Object(be.jsx)(We.a,{}),null===(l=U.data)||void 0===l?void 0:l.title]})}),Object(be.jsx)(X.a,{item:!0,xs:1,children:Object(be.jsx)(ba,{count:null===(u=U.data)||void 0===u?void 0:u.bookmarksCount,bookmarked:!!(null===(b=U.data)||void 0===b?void 0:b.bookmark)||!1,onCreate:function(){return L.mutate()},onDestroy:function(){return T.mutate()}})})]}),Object(be.jsx)(Z.a,{height:"100px",width:"100px",m:"auto",children:A.data&&Object(be.jsx)(ae.a,{src:A.data.artworkUrl100})}),Object(be.jsx)(Z.a,{my:3,children:Object(be.jsx)(Be.a,{variant:"contained",color:"primary",disabled:!!U.data&&!U.data.scoreExist,component:s.b,to:h.url+G.TAB,fullWidth:!0,disableElevation:!0,children:"Watch Tab"})}),Object(be.jsxs)(tc.a,{value:x.pathname.includes("issues")?h.url+G.ISSUES:x.pathname.includes("files")?h.url+G.FILES:x.pathname,children:[Object(be.jsx)(ec.a,{label:"Info",value:h.url,component:s.b,to:h.url}),Object(be.jsx)(ec.a,{label:"Files",value:h.url+G.FILES,component:s.b,to:h.url+G.FILES}),Object(be.jsx)(ec.a,{label:"Lyric",value:h.url+G.LYRIC,component:s.b,to:h.url+G.LYRIC}),Object(be.jsx)(ec.a,{label:"Issues",value:h.url+G.ISSUES,component:s.b,to:h.url+G.ISSUES}),Object(be.jsx)(ec.a,{label:"Setting",value:h.url+G.SETTING,component:s.b,to:h.url+G.SETTING,disabled:(null===g||void 0===g?void 0:g.id)!==Number(h.params.userId)})]}),Object(be.jsxs)(Y.c,{children:[Object(be.jsx)(Y.a,{exact:!0,path:h.path,component:Mc}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.FILES,component:Fc}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.SETTING,component:Rc}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.LYRIC,component:ci}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.FILES,component:Fc}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(h.path+G.FILES+G.TREE,"/:filename"),component:Kc}),Object(be.jsx)(Y.a,{strict:!0,path:"".concat(h.path+G.FILES+G.BLOB,"/:filename"),component:Yc}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.ISSUES,component:qc}),Object(be.jsx)(Y.a,{exact:!0,path:h.path+G.ISSUES+G.NEW,component:Gc}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(h.path).concat(G.ISSUES,"/:id"),component:ti})]})]}),Object(be.jsx)(Li,{src:{itunes:null===(O=A.data)||void 0===O?void 0:O.previewUrl,spotify:null===(m=N.data)||void 0===m?void 0:m.preview_url}})]})},Ti=function(){var e,t,n,c=Tt(),i=Object(H.a)(c,2),r=i[0],o=i[1],s=ia(),l=Object(H.a)(s,3),u=l[0],b=l[1],O=l[2],m=Object(a.useState)(),h=Object(H.a)(m,2),f=h[0],p=h[1],x=Object(In.d)(),v=x.errors,g=x.control,I=x.watch,y=x.register,E=x.setValue,P=x.handleSubmit,U=I().title,A=Object(za.a)(U,1e3),w=Object(H.a)(A,2),N=w[0],L=w[1].isPending,M=Object(j.b)(),T=Object(j.c)(S),R=Object(j.c)(k),B=Object(Y.f)(),q=Object(Y.i)(),D=Number(q.params.id),_="".concat(G.USERS,"/").concat((null===T||void 0===T?void 0:T.id)||"undefinde").concat(G.MUSICS),$=fe().onError,V=Object(d.b)(),W=Object(yn.a)((function(e){return function(e,t,n){return kn.a.post("".concat(G.USERS,"/").concat(e||"undefined").concat(G.MUSICS),t,n)}(null===T||void 0===T?void 0:T.id,e,R)}),{onSuccess:function(e){M(C(e.headers)),B.push("".concat(_,"/").concat(e.data.id)),V.setQueryData([he.MUSIC,D],e.data),f&&V.setQueryData([he.ITUNES,he.MUSIC,f.trackId],f)},onError:$}),F=Object(J.a)([he.MUSICS,{page:r,query:N}],fn(r,{title_eq:N}),{enabled:!L()&&!!N,onError:$});return Object(a.useEffect)((function(){if(y("link_attributes.itunes"),f){var e=f.trackCensoredName,t=f.trackId;E("title",e),E("link_attributes.itunes",t)}}),[y,f,E]),Object(be.jsx)(Mt,{children:Object(be.jsx)(de.a,{children:Object(be.jsxs)(Z.a,{p:3,children:[Object(be.jsx)(Z.a,{height:"100px",width:"100px",m:"auto",children:Object(be.jsx)(ae.a,{src:(null===f||void 0===f?void 0:f.artworkUrl100)||"undefiend"})}),Object(be.jsx)(Ln,{name:"title",defaultValue:"",autoComplete:"on",label:"Title",variant:"outlined",control:g,errors:v,disabled:W.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(be.jsx)(Yn,{color:"inherit",size:20,loading:F.isLoading})}}),Object(be.jsx)(Ya,{disabled:!N,onClick:b,fullWidth:!0,disableElevation:!0}),Object(be.jsx)(ic,{defaultValue:N,open:u,onClose:O,onSelect:function(e){return p(e)}}),Object(be.jsx)(Ja,{data:null===(e=F.data)||void 0===e?void 0:e.data,children:Object(be.jsx)(Ie,{musics:(null===(t=F.data)||void 0===t?void 0:t.data)||[],page:r,pageCount:null===(n=F.data)||void 0===n?void 0:n.pagination.totalPages,onPage:o,loading:F.isLoading})}),Object(be.jsx)(Rn,{color:"primary",loading:W.isLoading,disabled:!N,onClick:P((function(e){return W.mutate(e)})),fullWidth:!0,children:"Create Music"})]})})})},Ri=n(412),Bi=n.n(Ri),qi=n(133),Di=n(1278),_i=n(417),$i=n.n(_i),Vi=function(e){var t=e.title,n=e.artist;return Object(be.jsxs)(Z.a,{className:"SongInfo",display:"flex",alignItems:"center",height:"100%",children:[Object(be.jsx)(Z.a,{className:"at-song-title",mx:3,children:Object(be.jsx)(ee.a,{variant:"body1",children:t})}),"-",Object(be.jsx)(Z.a,{className:"at-song-artist",mx:3,children:Object(be.jsx)(ee.a,{variant:"body2",children:n})})]})},Wi=n(413),Fi=n.n(Wi),Ki=function(e){var t=e.className,n=e.disabled,a=e.onStop;return Object(be.jsx)(di.a,{className:t,value:"check",disabled:n,onClick:function(){n||a&&a()},children:Object(be.jsx)(Fi.a,{})})};Ki.defaultProps={className:"",disabled:!1,onStop:void 0};var Qi=Ki,zi=n(414),Yi=n.n(zi),Gi=function(e){var t=e.className,n=e.selected,a=e.onClick;return Object(be.jsx)(di.a,{className:t,value:"check",selected:n,onClick:a,children:Object(be.jsx)(Yi.a,{})})};Gi.defaultProps={className:"",selected:!1,onClick:void 0};var Hi=Gi,Ji=n(415),Xi=n.n(Ji),Zi=function(e){var t=e.className,n=e.selected,a=e.onClick;return Object(be.jsx)(di.a,{className:t,value:"check",selected:n,onClick:a,children:Object(be.jsx)(Xi.a,{})})};Zi.defaultProps={className:"",selected:!1,onClick:void 0};var er=Zi,tr=n(416),nr=function(e){var t=e.className,n=e.selected,a=e.onClick;return Object(be.jsx)(di.a,{value:"check",className:t,selected:n,onClick:a,children:Object(be.jsx)(tr.a,{size:24})})};nr.defaultProps={className:"",selected:!1,onClick:void 0};var ar=nr,cr=n(1303),ir=n(1263),rr=function(e){var t=e.onLayout,n=e.layout;return Object(be.jsxs)(ir.a,{className:"Layout",children:[Object(be.jsx)(cr.a,{id:"layout-select-label",children:"Layout"}),Object(be.jsxs)(Ic.a,{id:"layout-select",labelId:"layout-select-label",value:n,onChange:t,autoWidth:!0,children:[Object(be.jsx)(gc.a,{value:0,children:"Horizontal"}),Object(be.jsx)(gc.a,{value:1,children:"Page"})]})]})};rr.defaultProps={layout:0,onLayout:void 0};var or=rr,sr=function(e){var t=e.zoom,n=e.onZoom,a=[25,50,75,90,100,110,125,150,200].map((function(e){return Object(be.jsxs)(gc.a,{value:e,children:[e,"%"]},e)}));return Object(be.jsxs)(ir.a,{className:"Zoom",children:[Object(be.jsx)(cr.a,{id:"zoom-select-label",children:"Zoom"}),Object(be.jsx)(Ic.a,{id:"zoom-select",labelId:"zoom-select-label",value:t,onChange:n,children:a})]})};sr.defaultProps={zoom:100,onZoom:void 0};var lr=sr,dr=function(e){var t=e.alphaTabApi,n=qi.LayoutMode.Horizontal,c=qi.LayoutMode.Page,i=Object(a.useState)(""),r=Object(H.a)(i,2),o=r[0],s=r[1],l=Object(a.useState)(""),d=Object(H.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(100),O=Object(H.a)(b,2),m=O[0],h=O[1],f=Object(a.useState)(!0),p=Object(H.a)(f,2),x=p[0],v=p[1],g=Object(a.useState)(!0),S=Object(H.a)(g,2),k=S[0],I=S[1],y=Object(Di.a)(!1),C=Object(H.a)(y,2),E=C[0],P=C[1],U=Object(Di.a)(!1),A=Object(H.a)(U,2),w=A[0],N=A[1],L=Object(Di.a)(!1),M=Object(H.a)(L,2),T=M[0],R=M[1],B=Object(Di.a)(!1),q=Object(H.a)(B,2),D=q[0],_=q[1],$=Object(a.useState)(c),V=Object(H.a)($,2),W=V[0],F=V[1],K=Object(a.useState)(100),Q=Object(H.a)(K,2),z=Q[0],G=Q[1],J=Object(Y.f)(),ee=function(){return I(!1)},te=function(e){var t=e.state;return v(0===t)},ne=function(e){s(e.title),j(e.artist)};return Object(a.useEffect)((function(){return null===t||void 0===t||t.scoreLoaded.on(ne),null===t||void 0===t||t.playerReady.on(ee),null===t||void 0===t||t.playerStateChanged.on(te),function(){null===t||void 0===t||t.scoreLoaded.off(ne),null===t||void 0===t||t.playerReady.off(ee),null===t||void 0===t||t.playerStateChanged.off(te)}}),[t]),Object(be.jsx)(be.Fragment,{children:Object(be.jsxs)(si.a,{className:"Header",position:"fixed",color:"default",children:[Object(be.jsx)(ii.a,{children:Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:1,children:Object(be.jsx)(Ue.a,{onClick:function(){return J.goBack()},children:Object(be.jsx)($i.a,{})})}),Object(be.jsx)(X.a,{className:"at-controls-left",item:!0,xs:3,children:Object(be.jsx)(Vi,{title:o,artist:u})}),Object(be.jsx)(X.a,{item:!0,xs:5,children:Object(be.jsx)(Z.a,{display:"flex",justifyContent:"center",children:Object(be.jsxs)(li.a,{children:[Object(be.jsx)(Qi,{onStop:function(){return null===t||void 0===t?void 0:t.stop()}}),Object(be.jsx)(Pi,{paused:x,disabled:k,onPause:function(){return null===t||void 0===t?void 0:t.playPause()}}),Object(be.jsx)(Si,{volume:m,muted:E,onMute:function(){t&&(P(),0===t.masterVolume?t.masterVolume=m/100:t.masterVolume=0)},onVolume:function(e,n){t&&(Array.isArray(n)||(t.masterVolume=n/100,h(n)))}}),Object(be.jsx)(Hi,{selected:w,onClick:function(){t&&(N(),t.countInVolume=w?0:1)}}),Object(be.jsx)(er,{selected:T,onClick:function(){t&&(R(),t.isLooping=!T)}}),Object(be.jsx)(ar,{selected:D,onClick:function(){t&&(_(),t.metronomeVolume=D?0:1)}})]})})}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsxs)(X.a,{className:"at-controls-right",container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:6}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(lr,{zoom:z,onZoom:function(e){if(t){G(e.target.value);var n=parseInt(e.target.value,10)/100;t.settings.display.scale=n,t.updateSettings(),t.render()}}})}),Object(be.jsx)(X.a,{item:!0,xs:3,children:Object(be.jsx)(or,{layout:W,onLayout:function(e){if(t){switch(e.target.value){case n:F(n),t.settings.display.layoutMode=n;break;case c:F(c),t.settings.display.layoutMode=c}t.updateSettings(),t.render()}}})})]})})]})}),k&&Object(be.jsx)(le.a,{})]})})};dr.defaultProps={alphaTabApi:void 0};var ur=dr,jr=n(1265),br=n(1209),Or=n(1279),mr=n(1280),hr=function(e){var t=e.color;return Object(be.jsx)(Ce.a,{color:t,children:Object(be.jsx)(Ee.a,{})})},fr=(new qi.model.Track,function(e){var t=e.track,n=e.selectedIndex,c=e.i,i=e.onListItemClick,r=e.onMute,o=e.onSolo,s=Object(a.useState)(!1),l=Object(H.a)(s,2),d=l[0],u=l[1],j=Object(a.useState)(!1),b=Object(H.a)(j,2),O=b[0],m=b[1],h=n===c;return Object(be.jsxs)(br.a,{id:"at-track-template",button:!0,selected:h,onClick:function(){i&&i(t,c)},children:[Object(be.jsx)(Or.a,{children:Object(be.jsx)(hr,{color:h?"primary":"inherit"})}),Object(be.jsx)(mr.a,{primary:t.name,secondary:Object(be.jsxs)(li.a,{children:[Object(be.jsx)(di.a,{size:"small",selected:d,onClick:function(e){e.stopPropagation(),r&&r(d,t),u(!d)},children:"M"}),Object(be.jsx)(di.a,{size:"small",selected:O,onClick:function(e){e.stopPropagation(),o&&o(O,t),m(!O)},children:"S"})]})})]},t.name)}),pr=function(e){var t=e.tracks,n=e.selectedIndex,a=e.onListItemClick,c=e.onSolo,i=e.onMute;return Object(be.jsx)(jr.a,{className:"at-track-list",component:de.a,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(be.jsx)(fr,{track:e,selectedIndex:n,i:t,onListItemClick:a,onSolo:c,onMute:i},e.index)}))})};pr.defaultProps={tracks:[],selectedIndex:0,onMute:void 0,onSolo:void 0,onListItemClick:void 0};var xr=pr,vr=n(418),gr=n.n(vr),Sr={tex:!0,player:{enablePlayer:!0,soundFont:"https://cdn.jsdelivr.net/npm/@coderline/alphatab@latest/dist/soundfont/sonivox.sf2"}},kr=(new qi.model.Score,function(){var e=Object(a.useState)([]),t=Object(H.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(0),r=Object(H.a)(i,2),s=r[0],l=r[1],d=Object(a.useState)(),u=Object(H.a)(d,2),j=u[0],b=u[1],O=Object(a.useRef)(null),m=Object(o.b)().enqueueSnackbar,h=fe().onError,f=Bi()({src:"https://cdn.jsdelivr.net/npm/@coderline/alphatab@latest/dist/alphaTab.js"}),p=Object(H.a)(f,2),x=p[0],v=p[1],g=Object(Y.i)(),S=Number(g.params.id);Object(J.a)([he.MUSIC,S,he.SCORE],function(e){return function(){return hn.request(Zt,{id:e}).then((function(e){return e.music}))}}(S),{onSuccess:function(e){return null===j||void 0===j?void 0:j.tex(e.score)},onError:h,enabled:x});var k=function(e){return c(e.tracks)},I=Object(a.useCallback)((function(){j&&l(j.tracks[0].index)}),[j]);return Object(a.useEffect)((function(){!x&&O.current&&b(new window.alphaTab.AlphaTabApi(O.current,Sr))}),[x]),Object(a.useEffect)((function(){return null===j||void 0===j||j.renderStarted.on(I),null===j||void 0===j||j.scoreLoaded.on(k),function(){null===j||void 0===j||j.renderStarted.off(I),null===j||void 0===j||j.scoreLoaded.off(k),null===j||void 0===j||j.destroy()}}),[j,null===j||void 0===j?void 0:j.renderStarted,null===j||void 0===j?void 0:j.scoreLoaded,I]),Object(a.useEffect)((function(){v&&m(v.type,{variant:"error"})}),[m,v]),Object(be.jsxs)(Z.a,{className:"at-wrap",position:"relative",display:"flex",flexDirection:"column",height:"93vh",overflow:"hidden",children:[Object(be.jsx)(ur,{alphaTabApi:j}),Object(be.jsxs)(Z.a,{className:"at-content",position:"relative",overflow:"hidden",flexGrow:1,children:[Object(be.jsx)(Z.a,{className:gr.a.atSidebar,position:"absolute",top:"0",left:"0",bottom:"0",zIndex:1001,display:"flex",alignContent:"stretch",width:"auto",maxWidth:"60px",overflow:"hidden",border:1,borderLeft:0,borderTop:0,borderBottom:0,borderColor:"divider",children:Object(be.jsx)(xr,{tracks:n,selectedIndex:s,onMute:function(e,t){return null===j||void 0===j?void 0:j.changeTrackMute([t],!e)},onSolo:function(e,t){return null===j||void 0===j?void 0:j.changeTrackSolo([t],!e)},onListItemClick:function(e,t){l(t),null===j||void 0===j||j.renderTracks([e])}})}),Object(be.jsx)(Z.a,{className:"at-viewport",overflow:"auto",position:"absolute",top:0,left:70,right:0,bottom:0,pr:3,children:Object(be.jsx)("div",{ref:O,className:"at-main"})})]})]})}),Ir=function(){var e=Object(a.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],i=Object(Fn.useDebounce)(n,1e3),r=Object(H.a)(i,2),o=r[0],s=r[1].isPending,l=Tt(),d=Object(H.a)(l,2),u=d[0],j=d[1],b=fe().onError,O=Object(J.a)([he.BANDS,u,o],pn(u,{name_cont:o}),{onError:b}),m=O.isLoading,h=O.data;return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Hn,{onChange:function(e){return c(e.target.value)},loading:m||s()}),Object(be.jsx)(Le,{bands:(null===h||void 0===h?void 0:h.data)||[],loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:j})]})},yr=function(){var e,t,n=Object(a.useState)(""),c=Object(H.a)(n,2),i=c[0],r=c[1],o=ia(),l=Object(H.a)(o,3),u=l[0],b=l[1],O=l[2],m=bc()(i,1e3),h=Object(H.a)(m,2),f=h[0],p=h[1].isPending,x=Object(In.d)(),v=x.register,g=x.handleSubmit,S=x.setValue,I=Object(Y.i)(),y=Number(I.params.id),E=I.url+G.ARTISTS,P=Object(j.b)(),U=Object(j.c)(k),A=fe().onError,w=Object(d.b)(),N=w.getQueryData([he.BAND,y]),L=Object(yn.a)((function(e){return kn.a.post(E,e,U)}),{onSuccess:function(e){P(C(e.headers)),w.setQueryData([he.BAND,y],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{artists:[].concat(Object(ze.a)(t.artists||[]),[e.data.artist])})}))},onError:A}),M=Object(yn.a)((function(e){return kn.a.delete("".concat(E,"/").concat(e.id),U)}),{onSuccess:function(e,t){P(C(e.headers)),w.setQueryData([he.BAND,y],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{artists:e.artists&&e.artists.filter((function(e){return e!==t}))})}))},onError:A}),T=Object(J.a)([he.ARTISTS,{query:f}],xn(1,{name_cont:f}),{enabled:!!f,onError:A});return Object(a.useEffect)((function(){v("artist_id")}),[v]),Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{onClick:b,children:"Edit"}),Object(be.jsxs)(ma.a,{onClose:O,open:u,fullWidth:!0,children:[Object(be.jsx)(ha.a,{children:"Edit Albums"}),Object(be.jsxs)(Lt.a,{children:[Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Artist"}),Object(be.jsx)(re.a,{align:"right",children:"Delete"})]})}),Object(be.jsx)(ie.a,{children:null===N||void 0===N||null===(e=N.artists)||void 0===e?void 0:e.map((function(e){return Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"/",children:e.name})}),Object(be.jsx)(re.a,{align:"right",children:Object(be.jsx)(Ue.a,{onClick:function(){return M.mutate(e)},children:Object(be.jsx)(kc.a,{})})})]},e.id)}))})]})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(hc,{maxLength:1,onSelectOption:function(e){return S("artist_id",e.id)},onRemoveOption:function(){return S("artist_id","")},textFieldProps:{label:"Artist",variant:"outlined",margin:"normal"},autocompleteProps:{multiple:!0,options:(null===(t=T.data)||void 0===t?void 0:t.data)||[],inputValue:i,loading:L.isLoading||M.isLoading||p(),getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t,n){return"input"===n&&r(t)}}})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Rn,{color:"primary",loading:L.isLoading,onClick:g((function(e){return L.mutate(e)})),fullWidth:!0,children:"Add Artist"})})]})]})]})},Cr=function(){var e,t,n,a,c,i,r,o,s,l,u,b,O,m,h,f,p,x=Tt(),v=Object(H.a)(x,2),g=v[0],I=v[1],y=Tt(),E=Object(H.a)(y,2),P=E[0],U=E[1],A=Object(Y.h)(),w=Number(A.id),N=fe().onError,L=Object(j.c)(k),M=Object(j.c)(S),T=Object(j.b)(),R=Object(d.b)(),B=Object(J.a)([he.BAND,w],function(e,t){return function(){return hn.request(Kt,{id:e,currentUserId:t}).then((function(e){return e.band}))}}(w,null===M||void 0===M?void 0:M.id),{onError:N}),q=Object(J.a)([he.BAND,w,he.ALBUMS,g],function(e,t){return function(){return hn.request(Qt,{id:e,albumPage:t}).then((function(e){return e.band.albums}))}}(w,g),{onError:N}),D=Object(J.a)([he.BAND,w,he.MUSICS,P],function(e,t){return function(){return hn.request(zt,{id:e,musicPage:t}).then((function(e){return e.band.musics}))}}(w,P),{onError:N}),_=Object(J.a)([he.ITUNES,he.BAND,null===(e=B.data)||void 0===e?void 0:e.link.itunes],(function(){var e;return ge(null===(e=B.data)||void 0===e?void 0:e.link.itunes).then((function(e){return e.results[0]}))}),{enabled:!!(null===(t=B.data)||void 0===t?void 0:t.link.itunes),onError:N}),$=Object(J.a)([he.WIKIPEDIA,null===(n=B.data)||void 0===n?void 0:n.link.wikipedia],(function(){var e;return Fa(null===(e=B.data)||void 0===e?void 0:e.link.wikipedia)}),{enabled:!!(null===(a=B.data)||void 0===a?void 0:a.link.wikipedia),onError:N}),V=Object(yn.a)((function(){return function(e,t){return kn.a.post("".concat(G.BANDS,"/").concat(e).concat(G.BOOKMARKS),void 0,t)}(w,L)}),{onSuccess:function(e){T(C(e.headers)),R.setQueryData([he.BAND,w],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:N}),W=Object(yn.a)((function(){var e,t;return function(e,t,n){return kn.a.delete("".concat(G.BANDS,"/").concat(e).concat(G.BOOKMARKS,"/").concat(t||"undefined"),n)}(w,null===(e=B.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,L)}),{onSuccess:function(e){T(C(e.headers)),R.setQueryData([he.BAND,w],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:N}),F=Object(yn.a)((function(e){var t;return function(e,t,n,a){return kn.a.patch("".concat(G.BANDS,"/").concat(e).concat(G.LINKS,"/").concat(t||"undefined"),n,Object(En.a)({},a))}(w,null===(t=B.data)||void 0===t?void 0:t.link.id,e,L)}),{onSuccess:function(e){T(C(e.headers)),R.setQueryData([he.BAND,w],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{link:e.data})}))},onError:N}),K=function(e){return F.mutate({itunes:e.artistId})},Q=function(e){return F.mutate({wikipedia:e.pageid})},z=function(e){return F.mutate({spotify:e.id})},te=function(e){return F.mutate({twitter:e})};return Object(be.jsxs)(Mt,{children:[Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:11,children:Object(be.jsxs)(ee.a,{variant:"h5",children:[Object(be.jsx)(Ke.a,{}),null===(c=B.data)||void 0===c?void 0:c.name]})}),Object(be.jsx)(X.a,{item:!0,xs:1,children:Object(be.jsx)(ba,{count:null===(i=B.data)||void 0===i?void 0:i.bookmarksCount,bookmarked:!!(null===(r=B.data)||void 0===r?void 0:r.bookmark)||!1,onCreate:function(){return V.mutate()},onDestroy:function(){return W.mutate()}})})]}),Object(be.jsx)(Z.a,{children:null===(o=$.data)||void 0===o?void 0:o.extract}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(oa,{twitter:{link:null===(s=B.data)||void 0===s?void 0:s.link.twitter,renderDialog:function(e,t){var n;return Object(be.jsx)($a,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.link.twitter,open:e,loading:F.isLoading,onClose:t,onPatch:te})}},itunes:{link:(null===(l=_.data)||void 0===l?void 0:l.artistLinkUrl)||"",renderDialog:function(e,t){var n;return Object(be.jsx)(xa,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:K,showSearchBar:!0})}},wikipedia:{link:null===(u=B.data)||void 0===u?void 0:u.link.wikipedia,renderDialog:function(e,t){var n;return Object(be.jsx)(Ka,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:Q,showSearchBar:!0})}},spotify:{type:"artist",link:null===(b=B.data)||void 0===b?void 0:b.link.spotify,renderDialog:function(e,t){var n;return Object(be.jsx)(Da,{defaultValue:null===(n=B.data)||void 0===n?void 0:n.name,open:e,onClose:t,onSelect:z,showSearchBar:!0})}}})}),Object(be.jsxs)(Z.a,{mb:3,children:[Object(be.jsx)(yr,{}),Object(be.jsx)(Ne,{artists:null===(O=B.data)||void 0===O?void 0:O.artists,loading:B.isLoading})]}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Ie,{musics:(null===(m=D.data)||void 0===m?void 0:m.data)||[],loading:D.isLoading,page:P,pageCount:null===(h=D.data)||void 0===h?void 0:h.pagination.totalPages,onPage:U})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(ye,{albums:(null===(f=q.data)||void 0===f?void 0:f.data)||[],loading:B.isLoading,page:g,pageCount:null===(p=q.data)||void 0===p?void 0:p.pagination.totalPages,onPage:I})})]})},Er=function(){var e,t,n,c=Tt(),i=Object(H.a)(c,2),r=i[0],o=i[1],s=ia(),l=Object(H.a)(s,3),u=l[0],b=l[1],O=l[2],m=Object(a.useState)(),h=Object(H.a)(m,2),f=h[0],p=h[1],x=Object(In.d)(),v=x.errors,g=x.control,S=x.setValue,I=x.watch,y=x.register,E=x.handleSubmit,P=I().name,U=Object(za.a)(P,1e3),A=Object(H.a)(U,1)[0],w=Object(Y.f)(),N=Object(Y.i)(),L=Object(j.b)(),M=Object(j.c)(k),T=fe().onError,R=Object(d.b)(),B=Object(yn.a)((function(e){return function(e,t){return kn.a.post(G.BANDS,e,t)}(e,M)}),{onSuccess:function(e){L(C(e.headers)),w.push("".concat(G.BANDS,"/").concat(e.data.id)),R.setQueryData([he.BAND,Number(N.params.id),{musicPage:1,albumPage:1}],e.data),f&&R.setQueryData([he.ITUNES,he.ARTIST,f.artistId],f)},onError:T}),q=Object(J.a)([he.BANDS,{page:r,query:A}],pn(r,{name_eq:A}),{enabled:!!A,onError:T});return Object(a.useEffect)((function(){if(y("link_attributes.itunes"),f){var e=f.artistName,t=f.artistId;S("link_attributes.itunes",t),S("name",e)}}),[y,f,S]),Object(be.jsx)(Mt,{children:Object(be.jsx)(de.a,{children:Object(be.jsxs)(Z.a,{p:3,children:[Object(be.jsx)(Ln,{name:"name",defaultValue:"",autoComplete:"on",label:"Name",variant:"outlined",control:g,errors:v,disabled:B.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(be.jsx)(Yn,{color:"inherit",size:20,loading:B.isLoading})}}),Object(be.jsx)(Ya,{onClick:b,disabled:!P,fullWidth:!0,disableElevation:!0}),Object(be.jsx)(xa,{defaultValue:P,open:u,onClose:O,onSelect:function(e){return p(e)}}),Object(be.jsx)(Ja,{data:null===(e=q.data)||void 0===e?void 0:e.data,children:Object(be.jsx)(Le,{bands:(null===(t=q.data)||void 0===t?void 0:t.data)||[],page:r,pageCount:null===(n=q.data)||void 0===n?void 0:n.pagination.totalPages,onPage:o,loading:q.isLoading})}),Object(be.jsx)(Rn,{color:"primary",loading:B.isLoading,disabled:!P,onClick:E((function(e){return B.mutate(e)})),fullWidth:!0,children:"Create Band"})]})})})},Pr=function(e){var t=e.users,n=e.page,a=e.pageCount,c=e.onPage,i=e.loading;return Object(be.jsx)(me,{page:n,pageCount:a,onPage:c,loading:i,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Name"}),Object(be.jsx)(re.a,{})]})}),Object(be.jsx)(ie.a,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"".concat(G.USERS,"/").concat(e.id),children:e.nickname})}),Object(be.jsx)(re.a,{children:Object(be.jsx)(we,{href:"https://twitter.com/".concat(e.link.twitter),children:Object(be.jsx)(Pe,{})})})]},e.id)}))})]})})},Ur=function(){var e=Object(a.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],i=Object(Fn.useDebounce)(n,1e3),r=Object(H.a)(i,2),o=r[0],s=r[1].isPending,l=Tt(),d=Object(H.a)(l,2),u=d[0],j=d[1],b=fe().onError,O=Object(J.a)([he.USERS,u,o],function(e,t){return function(){return hn.request(un,{page:e,q:t}).then((function(e){return e.users}))}}(u,{nickname_cont:o}),{onError:b}),m=O.isLoading,h=O.data;return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Hn,{onChange:function(e){return c(e.target.value)},loading:m||s()}),Object(be.jsx)(Pr,{users:null===h||void 0===h?void 0:h.data,loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:j})]})},Ar=["followed","onFollow","onUnfollow"],wr=function(e){var t=e.followed,n=e.onFollow,a=e.onUnfollow,c=Object(Pn.a)(e,Ar);return t?Object(be.jsx)(Be.a,Object(En.a)(Object(En.a)({onClick:a},c),{},{children:"UnFollow"})):Object(be.jsx)(Be.a,Object(En.a)(Object(En.a)({onClick:n},c),{},{children:"Follow"}))},Nr=function(){var e,t,n=Tt(),a=Object(H.a)(n,2),c=a[0],i=a[1],r=Object(Y.h)(),o=Number(r.id),s=Object(J.a)([he.USER,o,he.MUSICS,c],function(e,t){return function(){return hn.request(ln,{id:e,musicPage:t}).then((function(e){return e.user.musics}))}}(o,c));return Object(be.jsx)(Ie,{musics:(null===(e=s.data)||void 0===e?void 0:e.data)||[],loading:s.isLoading,pageCount:null===(t=s.data)||void 0===t?void 0:t.pagination.totalPages,page:c,onPage:i})},Lr=function(){var e=fe().onError,t=Object(Y.h)(),n=Number(t.id),a=Object(j.c)(k),c=Object(d.b)(),i=Object(J.a)([he.USER,n,he.PROFILE],function(e){return function(){return hn.request(dn,{id:e}).then((function(e){return e.user}))}}(n)),r=i.isLoading,o=i.data,s=c.getQueryData([he.USER,n,he.PROFILE]),l=Object(yn.a)((function(e){return function(e,t,n,a){return kn.a.patch("".concat(G.USERS,"/").concat(e).concat(G.LINKS,"/").concat(t||"undefined"),{twitter:n},Object(En.a)({},a))}(n,null===o||void 0===o?void 0:o.link.id,e,a)}),{onSuccess:function(e){c.setQueryData([he.USER,n,he.PROFILE],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{link:e.data})}))},onError:e}),u=function(e){return l.mutate(e)};return Object(be.jsx)(be.Fragment,{children:Object(be.jsx)(Z.a,{my:3,children:Object(be.jsx)(oa,{loading:r,twitter:{link:null===o||void 0===o?void 0:o.link.twitter,renderDialog:function(e,t){return Object(be.jsx)($a,{defaultValue:null===s||void 0===s?void 0:s.link.twitter,open:e,loading:l.isLoading,onClose:t,onPatch:u})}}})})})},Mr=function(){var e,t,n,a,c,i,r,o,s=Tt(),l=Object(H.a)(s,2),d=l[0],u=l[1],j=Tt(),b=Object(H.a)(j,2),O=b[0],m=b[1],h=Tt(),f=Object(H.a)(h,2),p=f[0],x=f[1],v=Tt(),g=Object(H.a)(v,2),S=g[0],k=g[1],I=Object(Y.h)(),y=Number(I.id),C=Object(J.a)([he.USER,y,he.BOOKMARKS,he.MUSICS,d],function(e,t){return function(){return hn.request(rn,{id:e,bookmarkedMusicPage:t}).then((function(e){return e.user.bookmarkedMusics}))}}(y,d)),E=Object(J.a)([he.USER,y,he.BOOKMARKS,he.BANDS,p],function(e,t){return function(){return hn.request(cn,{id:e,bookmarkedBandPage:t}).then((function(e){return e.user.bookmarkedBands}))}}(y,p)),P=Object(J.a)([he.USER,y,he.BOOKMARKS,he.ARTISTS,O],function(e,t){return function(){return hn.request(an,{id:e,bookmarkedArtistPage:t}).then((function(e){return e.user.bookmarkedArtists}))}}(y,O)),U=Object(J.a)([he.USER,y,he.BOOKMARKS,he.ALBUMS,S],function(e,t){return function(){return hn.request(nn,{id:e,bookmarkedAlbumPage:t}).then((function(e){return e.user.bookmarkedAlbums}))}}(y,S));return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Ie,{musics:(null===(e=C.data)||void 0===e?void 0:e.data)||[],pageCount:null===(t=C.data)||void 0===t?void 0:t.pagination.totalPages,loading:C.isLoading,page:d,onPage:u}),Object(be.jsx)(Le,{bands:(null===(n=E.data)||void 0===n?void 0:n.data)||[],pageCount:null===(a=E.data)||void 0===a?void 0:a.pagination.totalPages,loading:E.isLoading,page:p,onPage:x}),Object(be.jsx)(Ne,{artists:null===(c=P.data)||void 0===c?void 0:c.data,pageCount:null===(i=P.data)||void 0===i?void 0:i.pagination.totalPages,loading:P.isLoading,page:O,onPage:m}),Object(be.jsx)(ye,{albums:(null===(r=U.data)||void 0===r?void 0:r.data)||[],pageCount:null===(o=U.data)||void 0===o?void 0:o.pagination.totalPages,loading:U.isLoading,page:S,onPage:k})]})},Tr=function(){var e=fe().onError,t=Object(j.b)(),n=Object(j.c)(S),a=Object(j.c)(k),c=Object(In.d)({resolver:Object(Cn.a)(Uc)}),i=c.errors,r=c.control,o=c.handleSubmit,s=Object(yn.a)((function(e){return function(e,t,n){return kn.a.patch("".concat(G.USERS,"/").concat(e||"undefined"),t,n)}(null===n||void 0===n?void 0:n.id,e,a)}),{onSuccess:function(e){t(y(e.data)),t(C(e.headers))},onError:e}),l=s.isLoading,d=s.mutate;return Object(be.jsxs)("form",{onSubmit:o((function(e){return d(e)})),children:[Object(be.jsx)(ee.a,{variant:"h5",color:"initial",children:"Setting"}),Object(be.jsx)(Ln,{name:"email",defaultValue:null===n||void 0===n?void 0:n.email,label:"Email",variant:"outlined",margin:"normal",control:r,errors:i,disabled:l,fullWidth:!0}),Object(be.jsx)(Ln,{name:"nickname",defaultValue:null===n||void 0===n?void 0:n.nickname,label:"NickName",variant:"outlined",margin:"normal",control:r,errors:i,disabled:l,fullWidth:!0}),Object(be.jsx)(Ln,{name:"familyname",defaultValue:null===n||void 0===n?void 0:n.familyname,label:"FamilyName",variant:"outlined",margin:"normal",control:r,errors:i,disabled:l,fullWidth:!0}),Object(be.jsx)(Ln,{name:"givenname",defaultValue:null===n||void 0===n?void 0:n.givenname,label:"GivenName",variant:"outlined",margin:"normal",control:r,errors:i,disabled:l,fullWidth:!0}),Object(be.jsx)(Ln,{name:"introduction",defaultValue:null===n||void 0===n?void 0:n.introduction,label:"Introduction",variant:"outlined",margin:"normal",control:r,errors:i,disabled:l,rows:10,fullWidth:!0,multiline:!0}),Object(be.jsx)(Rn,{type:"submit",loading:l,color:"primary",fullWidth:!0,children:"UPDATE"})]})},Rr=function(){var e=fe().onError,t=Object(j.b)(),n=Object(j.c)(S),a=Object(j.c)(k),c=Object(Y.i)(),i=Object(Y.g)(),r=Number(c.params.id),o=Object(d.b)(),l=Object(J.a)([he.USER,r],function(e,t){return function(){return hn.request(tn,{id:e,currentUserId:t}).then((function(e){return e.user}))}}(r,null===n||void 0===n?void 0:n.id),{onError:e}),u=l.isLoading,b=l.data,O=Object(yn.a)((function(){return function(e,t){return kn.a.post("".concat(G.USERS,"/").concat(e).concat(G.RELATIONSHIPS),void 0,Object(En.a)({},t))}(r,a)}),{onSuccess:function(e){t(C(e.headers)),o.setQueryData([he.USER,r],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{followed:e.data})}))},onError:e}),m=Object(yn.a)((function(){var e;return function(e,t,n){return kn.a.delete("".concat(G.USERS,"/").concat(e).concat(G.RELATIONSHIPS,"/").concat(t||"undefined"),Object(En.a)({},n))}(r,null===b||void 0===b||null===(e=b.followed)||void 0===e?void 0:e.id,a)}),{onSuccess:function(e){t(C(e.headers)),o.setQueryData([he.USER,r],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{followed:void 0})}))},onError:e}),h=(null===n||void 0===n?void 0:n.id)===r;return Object(be.jsxs)(Mt,{children:[Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:11,children:Object(be.jsx)(ee.a,{variant:"h6",children:null===b||void 0===b?void 0:b.nickname})}),Object(be.jsx)(X.a,{item:!0,xs:1,children:!h&&Object(be.jsx)(wr,{followed:!!(null===b||void 0===b?void 0:b.followed),onFollow:function(){return O.mutate()},onUnfollow:function(){return m.mutate()},disabled:u,children:"Follow"})})]}),Object(be.jsxs)(X.a,{container:!0,spacing:2,children:[Object(be.jsx)(X.a,{item:!0,children:Object(be.jsxs)(te.a,{component:s.b,to:"".concat(G.USERS,"/").concat(r).concat(G.FOLLOWERS),children:[null===b||void 0===b?void 0:b.followersCount,"Followers"]})}),Object(be.jsx)(X.a,{item:!0,children:Object(be.jsxs)(te.a,{component:s.b,to:"".concat(G.USERS,"/").concat(r).concat(G.FOLLOWING),children:[null===b||void 0===b?void 0:b.followingCount,"Following"]})})]}),null===b||void 0===b?void 0:b.introduction,Object(be.jsxs)(tc.a,{value:i.pathname.includes("issues")?c.url+G.ISSUES:i.pathname,children:[Object(be.jsx)(ec.a,{label:"Profile",value:c.url,component:s.b,to:c.url}),Object(be.jsx)(ec.a,{label:"Musics",value:c.url+G.MUSICS,component:s.b,to:c.url+G.MUSICS}),Object(be.jsx)(ec.a,{label:"Bookmark",value:c.url+G.BOOKMARKS,component:s.b,to:c.url+G.BOOKMARKS}),Object(be.jsx)(ec.a,{label:"Setting",value:c.url+G.SETTING,component:s.b,to:c.url+G.SETTING,disabled:!h})]}),Object(be.jsxs)(Y.c,{children:[Object(be.jsx)(Y.a,{exact:!0,path:c.path,component:Lr}),Object(be.jsx)(Y.a,{exact:!0,path:c.path+G.MUSICS,component:Nr}),Object(be.jsx)(Y.a,{exact:!0,path:c.path+G.SETTING,component:Tr}),Object(be.jsx)(Y.a,{exact:!0,path:c.path+G.BOOKMARKS,component:Mr}),Object(be.jsx)(Y.a,{exact:!0,path:c.path+G.BOOKMARKS,component:Mr})]})]})},Br=function(){var e,t,n=Tt(),a=Object(H.a)(n,2),c=a[0],i=a[1],r=Object(Y.h)(),o=Number(r.id),s=Object(J.a)([he.USER,o,he.MUSICS,c],function(e,t){return function(){return hn.request(on,{id:e,followerPage:t}).then((function(e){return e.user.followers}))}}(o,c));return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(ee.a,{variant:"h5",color:"initial",children:"Followers"}),Object(be.jsx)(Pr,{users:null===(e=s.data)||void 0===e?void 0:e.data,loading:s.isLoading,page:c,pageCount:null===(t=s.data)||void 0===t?void 0:t.pagination.totalPages,onPage:i})]})},qr=function(){var e,t,n=Tt(),a=Object(H.a)(n,2),c=a[0],i=a[1],r=Object(Y.h)(),o=Number(r.id),s=Object(J.a)([he.USER,o,he.MUSICS,c],function(e,t){return function(){return hn.request(sn,{id:e,followingPage:t}).then((function(e){return e.user.following}))}}(o,c));return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(ee.a,{variant:"h5",color:"initial",children:"Following"}),Object(be.jsx)(Pr,{users:null===(e=s.data)||void 0===e?void 0:e.data,loading:s.isLoading,page:c,pageCount:null===(t=s.data)||void 0===t?void 0:t.pagination.totalPages,onPage:i})]})},Dr=function(){var e=Object(a.useState)(""),t=Object(H.a)(e,2),n=t[0],c=t[1],i=Object(Fn.useDebounce)(n,1e3),r=Object(H.a)(i,2),o=r[0],s=r[1].isPending,l=Tt(),d=Object(H.a)(l,2),u=d[0],j=d[1],b=fe().onError,O=Object(J.a)([he.ALBUMS,u,o],vn(u,{title_cont:o}),{onError:b}),m=O.isLoading,h=O.data;return Object(be.jsxs)(Mt,{children:[Object(be.jsx)(Hn,{onChange:function(e){return c(e.target.value)},loading:m||s()}),Object(be.jsx)(ye,{albums:(null===h||void 0===h?void 0:h.data)||[],loading:m,page:u,pageCount:null===h||void 0===h?void 0:h.pagination.totalPages,onPage:j})]})},_r=Object(Et.a)({media:{height:100,width:100}}),$r=function(e){var t=e.album,n=t.artistName,a=t.collectionName,c=t.artworkUrl100,i=t.artistViewUrl,r=_r();return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{mx:1,children:Object(be.jsx)(Pt.a,{image:c,className:r.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{children:a}),Object(be.jsx)(ee.a,{children:n})]}),Object(be.jsx)(Be.a,{href:i,target:"_blank",rel:"noopener noreferrer",onClick:function(e){return e.stopPropagation()},children:"itunes"})]})})};var Vr=function(e){var t=e.defaultValue,n=e.open,a=e.showSearchBar,c=e.onClose,i=e.onSelect;return Object(be.jsx)(pa,{defaultValue:t,title:"Album",open:n,showSearchBar:a,useQueryArgs:{key:[he.ITUNES,he.ALBUMS],fn:function(e){return function(e,t){return ve.jsonp("/search",{params:{entity:"album",term:e,limit:400,offset:t}})}(e.term,e.page).then((function(e){return{data:e.results}}))}},onSelect:i,onClose:c,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)($r,{album:e})},e.collectionId)}})},Wr=Ra()({media:{height:100,width:100}}),Fr=function(e){var t=e.album,n=Wr();return Object(be.jsx)(Me.a,{children:Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(Z.a,{display:"flex",justifyItems:"center",alignItems:"center",mx:1,children:Object(be.jsx)(Pt.a,{image:t.images[0].url,className:n.media})}),Object(be.jsxs)(Re.a,{children:[Object(be.jsx)(ee.a,{noWrap:!0,children:t.name}),Object(be.jsx)(ee.a,{color:"textSecondary",noWrap:!0})]})]})})};var Kr=function(e){var t=e.defaultValue,n=e.open,c=e.showSearchBar,i=e.onClose,r=e.onSelect,o=fe().onError,s=Object(j.c)(w),l=Object(j.b)(),d=Object(a.useCallback)(function(){var e=Object(Sa.a)(ga.a.mark((function e(t){var n,a;return ga.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URLSearchParams).append("code",t),n.append("grant_type","authorization_code"),n.append("redirect_uri",window.location.origin),e.next=6,Na.post("/token",n);case 6:a=e.sent,l(L(a.data));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]);return Object(a.useEffect)((function(){window.getSpotifyCode=d}),[d]),s?Object(be.jsx)(pa,{defaultValue:t,title:"Spotify",open:n,useQueryArgs:{key:[he.SPOTIFY,he.ALBUMS],fn:function(e){return La("album",e.term,e.page,null===s||void 0===s?void 0:s.access_token).then((function(e){return{data:e.albums.items,page:e.albums.offset,pageCount:Math.floor(e.albums.total/e.albums.limit)}}))},options:{onError:function(e){o(e),l(M())}}},showSearchBar:c,onSelect:r,onClose:i,children:function(e,t){return Object(be.jsx)(Z.a,{mb:2,onClick:t,children:Object(be.jsx)(Fr,{album:e})},e.id)}}):Object(be.jsxs)(ma.a,{open:n,onClose:i,fullWidth:!0,children:[Object(be.jsx)(ha.a,{children:"Spotify need SignIn"}),Object(be.jsx)(Ia.a,{children:Object(be.jsx)(ya.a,{children:Object(be.jsx)(Ca,{})})}),Object(be.jsx)(ka.a,{children:Object(be.jsx)(Be.a,{onClick:i,color:"default",children:"Cancel"})})]})},Qr=function(){var e,t,n,c=Object(a.useState)(""),i=Object(H.a)(c,2),r=i[0],o=i[1],l=ia(),u=Object(H.a)(l,3),b=u[0],O=u[1],m=u[2],h=Object(In.d)(),f=h.register,p=h.handleSubmit,x=h.setValue,v=bc()(r,1e3),g=Object(H.a)(v,2),S=g[0],I=g[1].isPending,y=Object(j.b)(),E=Object(j.c)(k),P=fe().onError,U=Object(Y.i)(),A=Number(U.params.id),w=U.url+G.ARTISTS,N=Object(d.b)(),L=N.getQueryData([he.ALBUM,A]),M=Object(yn.a)((function(e){return kn.a.post(w,e,E)}),{onSuccess:function(e){y(C(e.headers)),N.setQueryData([he.ALBUM,A],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{artists:[].concat(Object(ze.a)(t.artists||[]),[e.data.artist])})}))},onError:P}),T=Object(yn.a)((function(e){return kn.a.delete("".concat(w,"/").concat(e.id),E)}),{onSuccess:function(e,t){y(C(e.headers)),N.setQueryData([he.ALBUM,A],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{artists:e.artists&&e.artists.filter((function(e){return e!==t}))})}))},onError:P}),R=Object(J.a)([he.ARTISTS,{query:S}],xn(1,{name_cont:S}),{enabled:!!S,onError:P});return Object(a.useEffect)((function(){f("artist_id")}),[f]),Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{onClick:O,children:"Edit"}),Object(be.jsxs)(ma.a,{onClose:m,open:b,fullWidth:!0,children:[Object(be.jsx)(ha.a,{children:"Edit Albums"}),Object(be.jsxs)(Lt.a,{children:[Object(be.jsx)(ue.a,{component:de.a,children:Object(be.jsxs)(ce.a,{children:[Object(be.jsx)(oe.a,{children:Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:"Artist"}),Object(be.jsx)(re.a,{align:"right",children:"Delete"})]})}),Object(be.jsx)(ie.a,{children:null===L||void 0===L||null===(e=L.artists)||void 0===e?void 0:e.map((function(e){return Object(be.jsxs)(se.a,{children:[Object(be.jsx)(re.a,{children:Object(be.jsx)(te.a,{component:s.b,to:"/",children:e.name})}),Object(be.jsx)(re.a,{align:"right",children:Object(be.jsx)(Ue.a,{onClick:function(){return T.mutate(e)},children:Object(be.jsx)(kc.a,{})})})]},e.id)}))})]})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(hc,{onSelectOption:function(e){return x("artist_id",e.id)},onRemoveOption:function(){return x("artist_id","")},textFieldProps:{label:"Artist",variant:"outlined",margin:"normal"},autocompleteProps:{value:null===(t=R.data)||void 0===t?void 0:t.data,options:(null===(n=R.data)||void 0===n?void 0:n.data)||[],loading:M.isLoading||T.isLoading||I(),multiple:!0,inputValue:r,getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onInputChange:function(e,t){return o(t)}}})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Rn,{color:"primary",loading:M.isLoading,onClick:p((function(e){return M.mutate(e)})),fullWidth:!0,children:"Add Artist"})})]})]})]})},zr=function(){var e,t,n,a,c,i,r,o,s,l,u=Tt(),b=Object(H.a)(u,2),O=b[0],m=b[1],h=fe().onError,f=Object(Y.i)(),p=Number(f.params.id),x=Object(j.b)(),v=Object(j.c)(k),g=Object(j.c)(S),I=Object(d.b)(),y=Object(J.a)([he.ALBUM,p],function(e,t){return function(){return hn.request(qt,{id:e,currentUserId:t}).then((function(e){return e.album}))}}(p,null===g||void 0===g?void 0:g.id),{onError:h}),E=Object(J.a)([he.ALBUM,p,he.MUSICS,O],function(e,t){return function(){return hn.request(Dt,{id:e,musicPage:t}).then((function(e){return e.album.musics}))}}(p,O),{onError:h}),P=Object(J.a)([he.ITUNES,he.ALBUM,null===(e=y.data)||void 0===e?void 0:e.link.itunes],(function(){var e;return Se(null===(e=y.data)||void 0===e?void 0:e.link.itunes).then((function(e){return e.results[0]}))}),{enabled:!!(null===(t=y.data)||void 0===t?void 0:t.link.itunes),onError:h}),U=Object(yn.a)((function(e){var t;return function(e,t,n,a){return kn.a.patch("".concat(G.ALBUMS,"/").concat(e).concat(G.LINKS,"/").concat(t||"undefined"),n,Object(En.a)({},a))}(p,null===(t=y.data)||void 0===t?void 0:t.link.id,e,v)}),{onSuccess:function(e){x(C(e.headers)),I.setQueryData([he.ALBUM,p],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{link:e.data})}))},onError:h}),A=Object(yn.a)((function(){return function(e,t){return kn.a.post("".concat(G.ALBUMS,"/").concat(e).concat(G.BOOKMARKS),void 0,t)}(p,v)}),{onSuccess:function(e){x(C(e.headers)),I.setQueryData([he.ALBUM,p],(function(t){return t&&Object(En.a)(Object(En.a)({},t),{},{bookmark:e.data,bookmarksCount:t.bookmarksCount+1})}))},onError:h}),w=Object(yn.a)((function(){var e,t;return function(e,t,n){return kn.a.delete("".concat(G.ALBUMS,"/").concat(e).concat(G.BOOKMARKS,"/").concat(t||"undefined"),n)}(p,null===(e=y.data)||void 0===e||null===(t=e.bookmark)||void 0===t?void 0:t.id,v)}),{onSuccess:function(e){x(C(e.headers)),I.setQueryData([he.ALBUM,p],(function(e){return e&&Object(En.a)(Object(En.a)({},e),{},{bookmark:void 0,bookmarksCount:e.bookmarksCount-1})}))},onError:h}),N=function(e){return U.mutate({itunes:e.collectionId})},L=function(e){return U.mutate({spotify:e.id})};return Object(be.jsxs)(Mt,{children:[Object(be.jsxs)(X.a,{container:!0,children:[Object(be.jsx)(X.a,{item:!0,xs:11,children:Object(be.jsxs)(ee.a,{variant:"h5",children:[Object(be.jsx)(De.a,{}),null===(n=y.data)||void 0===n?void 0:n.title]})}),Object(be.jsx)(X.a,{item:!0,xs:1,children:Object(be.jsx)(ba,{count:null===(a=y.data)||void 0===a?void 0:a.bookmarksCount,bookmarked:!!(null===(c=y.data)||void 0===c?void 0:c.bookmark),onCreate:function(){return A.mutate()},onDestroy:function(){return w.mutate()}})})]}),Object(be.jsx)(Z.a,{height:"100px",width:"100px",m:"auto",children:P.data&&Object(be.jsx)(ae.a,{src:P.data.artworkUrl100})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(oa,{itunes:{link:(null===(i=P.data)||void 0===i?void 0:i.collectionViewUrl)||"",renderDialog:function(e,t){return Object(be.jsx)(Vr,{open:e,onClose:t,onSelect:N,showSearchBar:!0})}},spotify:{type:"album",link:null===(r=y.data)||void 0===r?void 0:r.link.spotify,renderDialog:function(e,t){var n;return Object(be.jsx)(Kr,{defaultValue:null===(n=y.data)||void 0===n?void 0:n.title,open:e,onClose:t,onSelect:L,showSearchBar:!0})}}})}),Object(be.jsx)(Z.a,{mb:3,children:Object(be.jsx)(Ie,{musics:(null===(o=E.data)||void 0===o?void 0:o.data)||[],loading:E.isLoading,page:O,pageCount:null===(s=E.data)||void 0===s?void 0:s.pagination.totalPages,onPage:m})}),Object(be.jsx)(Qr,{}),Object(be.jsx)(Ne,{artists:null===(l=y.data)||void 0===l?void 0:l.artists,loading:y.isLoading})]})},Yr=function(){var e,t,n,c=Tt(),i=Object(H.a)(c,2),r=i[0],o=i[1],s=ia(),l=Object(H.a)(s,3),u=l[0],b=l[1],O=l[2],m=Object(a.useState)(),h=Object(H.a)(m,2),f=h[0],p=h[1],x=Object(In.d)(),v=x.errors,g=x.control,S=x.setValue,I=x.register,y=x.watch,E=x.handleSubmit,P=y().title,U=Object(za.a)(P,1e3),A=Object(H.a)(U,1)[0],w=Object(j.b)(),N=Object(j.c)(k),L=Object(Y.f)(),M=fe().onError,T=Object(d.b)(),R=Object(yn.a)((function(e){return function(e,t){return kn.a.post(G.ALBUMS,e,t)}(e,N)}),{onSuccess:function(e){w(C(e.headers)),L.push("".concat(G.ALBUMS,"/").concat(e.data.id)),T.setQueryData([he.ALBUM,e.data.id],e.data),f&&T.setQueryData([he.ITUNES,he.MUSIC,f.collectionId],f)},onError:M}),B=Object(J.a)([he.ALBUMS,{page:r,query:A}],vn(r,{title_cont:A}),{enabled:!!A,onError:M});return Object(a.useEffect)((function(){if(I("link_attributes.itunes"),f){var e=f.collectionName,t=f.collectionId;S("title",e),S("link_attributes.itunes",t)}}),[I,S,f]),Object(be.jsx)(Mt,{children:Object(be.jsx)(de.a,{children:Object(be.jsxs)(Z.a,{p:2,children:[Object(be.jsx)(Z.a,{height:"100px",width:"100px",m:"auto",children:Object(be.jsx)(ae.a,{src:(null===f||void 0===f?void 0:f.artworkUrl100)||"undefiend"})}),Object(be.jsx)(Ln,{name:"title",defaultValue:"",autoComplete:"on",label:"Title",variant:"outlined",control:g,errors:v,disabled:R.isLoading,fullWidth:!0,InputProps:{endAdornment:Object(be.jsx)(Yn,{color:"inherit",size:20,loading:B.isLoading})}}),Object(be.jsx)(Ya,{onClick:b,disabled:!P,fullWidth:!0,disableElevation:!0}),Object(be.jsx)(Vr,{defaultValue:P,open:u,onClose:O,onSelect:function(e){return p(e)}}),Object(be.jsx)(Ja,{data:null===(e=B.data)||void 0===e?void 0:e.data,children:Object(be.jsx)(ye,{albums:(null===(t=B.data)||void 0===t?void 0:t.data)||[],page:r,pageCount:null===(n=B.data)||void 0===n?void 0:n.pagination.totalPages,onPage:o,loading:B.isLoading})}),Object(be.jsx)(Rn,{color:"primary",loading:R.isLoading,disabled:!P,onClick:E((function(e){return R.mutate(e)})),fullWidth:!0,children:"Create Album"})]})})})},Gr=function(){var e=Object(a.useState)(!1),t=Object(H.a)(e,2),n=t[0],c=t[1],i=fe().onError,r=Object(In.d)({resolver:Object(Cn.a)(wc)}),o=r.errors,l=r.control,d=r.handleSubmit,u=Object(yn.a)((function(e){return function(e){return kn.a.post(G.CONTACTS,e)}(e)}),{onSuccess:function(){c(!0)},onError:i});return n?Object(be.jsxs)(Mt,{children:[Object(be.jsx)(ee.a,{children:"Successed"}),Object(be.jsx)(te.a,{component:s.b,to:"/",children:"return Home"})]}):Object(be.jsx)(Mt,{children:Object(be.jsxs)("form",{onSubmit:d((function(e){return u.mutate(e)})),children:[Object(be.jsx)(ee.a,{children:"Contact"}),Object(be.jsx)(Ln,{name:"email",label:"Email",defaultValue:"",variant:"outlined",margin:"normal",control:l,errors:o,fullWidth:!0}),Object(be.jsx)(Ln,{name:"description",label:"Description",defaultValue:"",variant:"outlined",margin:"normal",control:l,errors:o,rows:20,multiline:!0,fullWidth:!0}),Object(be.jsx)(Rn,{type:"submit",color:"primary",loading:u.isLoading,fullWidth:!0,children:"Submit"})]})})},Hr=function(){return Object(be.jsxs)(Y.c,{children:[Object(be.jsx)(Y.a,{exact:!0,path:G.MUSICS,component:Za}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.MUSICS).concat(G.NEW),component:Ti}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.USERS,"/:userId").concat(G.MUSICS,"/:id").concat(G.TAB),component:kr}),Object(be.jsx)(Y.a,{strict:!0,path:"".concat(G.USERS,"/:userId").concat(G.MUSICS,"/:id"),component:Mi}),Object(be.jsx)(Y.a,{exact:!0,path:G.USERS,component:Ur}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.USERS,"/:id").concat(G.FOLLOWERS),component:Br}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.USERS,"/:id").concat(G.FOLLOWING),component:qr}),Object(be.jsx)(Y.a,{strict:!0,path:"".concat(G.USERS,"/:id"),component:Rr}),Object(be.jsx)(Y.a,{exact:!0,path:G.BANDS,component:Ir}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.BANDS).concat(G.NEW),component:Er}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.BANDS,"/:id"),component:Cr}),Object(be.jsx)(Y.a,{exact:!0,path:G.ARTISTS,component:Jn}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.ARTISTS).concat(G.NEW),component:Xa}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.ARTISTS,"/:id"),component:Qa}),Object(be.jsx)(Y.a,{exact:!0,path:G.ALBUMS,component:Dr}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.ALBUMS).concat(G.NEW),component:Yr}),Object(be.jsx)(Y.a,{exact:!0,path:"".concat(G.ALBUMS,"/:id"),component:zr}),Object(be.jsx)(Y.a,{exact:!0,path:G.SIGNIN,component:$n}),Object(be.jsx)(Y.a,{exact:!0,path:G.SIGNUP,component:Wn}),Object(be.jsx)(Y.a,{exact:!0,path:G.CONTACTS,component:Gr}),Object(be.jsx)(Y.a,{exact:!0,path:G.ROOT,component:gn})]})},Jr=n(421),Xr=n.n(Jr),Zr=n(420),eo=n.n(Zr),to=n(135),no=n.n(to),ao=n(1299),co=n(1282),io=n(1286),ro=n(1281),oo=n(1306),so=n(419),lo=n.n(so),uo=function(e){var t=e.notifications,n=e.loading,a=fe().onError,c=Object(j.b)(),i=Object(j.c)(S),r=Object(j.c)(k),o=Object(d.b)(),l=Object(yn.a)((function(e){return function(e,t,n){return kn.a.patch("".concat(G.USERS,"/").concat(t||"undefined","/notifications/").concat(e),void 0,n)}(e,null===i||void 0===i?void 0:i.id,r)}),{onError:a,onSuccess:function(e,t){c(C(e.headers)),o.setQueryData([he.NOTIFICATIONS,1],(function(e){return e?(e.data[e.data.findIndex((function(e){return e.id===t}))].readAt=(new Date).toLocaleDateString(),e.notificationExist=e.data.some((function(e){return!e.readAt})),e):e}))}}).mutate;return Object(be.jsxs)(Z.a,{p:1,children:[n&&Object(be.jsx)(le.a,{}),!(null===t||void 0===t?void 0:t.length)&&Object(be.jsx)(ee.a,{variant:"h6",children:"Nothing"}),null===t||void 0===t?void 0:t.map((function(e){var t=function(){return l(e.id)};return"UserRelationshipNotification"===e.type?Object(be.jsxs)(br.a,{component:s.b,to:"".concat(G.USERS,"/").concat(e.params.userRelationship.follower.id),selected:!!e.readAt,onClick:t,button:!0,children:[Object(be.jsx)(ro.a,{children:Object(be.jsx)(oo.a,{children:Object(be.jsx)(lo.a,{})})}),Object(be.jsx)(mr.a,{primary:"followed by ".concat(e.params.userRelationship.follower.nickname),secondary:Object(io.a)(new Date(e.createdAt))})]},e.id):"MusicBookmarkNotification"===e.type?Object(be.jsxs)(br.a,{component:s.b,to:"".concat(G.USERS,"/").concat(e.params.musicBookmark.user.id),selected:!!e.readAt,onClick:t,button:!0,children:[Object(be.jsx)(ro.a,{children:Object(be.jsx)(oo.a,{children:Object(be.jsx)(ua.a,{})})}),Object(be.jsx)(mr.a,{primary:"".concat(e.params.musicBookmark.user.nickname," bookmarked ").concat(e.params.musicBookmark.music.title),secondary:Object(io.a)(new Date(e.createdAt))})]},e.id):Object(be.jsx)(be.Fragment,{})}))]})},jo=function(){var e,t,n=Object(o.b)().enqueueSnackbar,a=Object(j.b)(),c=Object(j.c)(S),i=Object(j.c)(k),r=Object(Y.f)(),l=function(e){n(String(e),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"}})},d=Object(J.a)([he.NOTIFICATIONS,1],(e=null===c||void 0===c?void 0:c.id,t=1,function(){return hn.request(mn,{id:e,notificationPage:t}).then((function(e){return e.user.notifications}))}),{onError:l,enabled:!!c}),u=Object(yn.a)((function(){return kn.a.delete("/auth/sign_out",i)}),{onMutate:function(){a(E()),r.push({pathname:G.SIGNIN})},onSuccess:function(){n("SignOut successful",{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"center"}})},onError:l}),b=function(){return u.mutate()};return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(si.a,{position:"fixed",color:"default",children:Object(be.jsxs)(ii.a,{children:[Object(be.jsx)(ee.a,{variant:"h6",children:Object(be.jsx)(te.a,{underline:"none",color:"inherit",component:s.b,to:"/",children:"Stave"})}),Object(be.jsx)(Z.a,{ml:"auto",children:(null===c||void 0===c?void 0:c.id)?Object(be.jsxs)(Z.a,{display:"flex",children:[Object(be.jsx)(no.a,{variant:"popover",popupId:"demo-popup-popover",children:function(e){var t,n;return Object(be.jsxs)("div",{children:[Object(be.jsx)(Ue.a,Object(En.a)(Object(En.a)({},Object(to.bindTrigger)(e)),{},{children:Object(be.jsx)(co.a,{color:"secondary",variant:"dot",invisible:!(null===(t=d.data)||void 0===t?void 0:t.notificationExist),children:Object(be.jsx)(eo.a,{})})})),Object(be.jsx)(ao.a,Object(En.a)(Object(En.a)({},Object(to.bindPopover)(e)),{},{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(be.jsx)(uo,{notifications:null===(n=d.data)||void 0===n?void 0:n.data,loading:d.isLoading})}))]})}}),Object(be.jsx)(no.a,{variant:"popover",popupId:"demo-popup-popover",children:function(e){return Object(be.jsxs)("div",{children:[Object(be.jsx)(Ue.a,Object(En.a)(Object(En.a)({},Object(to.bindTrigger)(e)),{},{children:Object(be.jsx)(Xr.a,{})})),Object(be.jsxs)(ao.a,Object(En.a)(Object(En.a)({},Object(to.bindPopover)(e)),{},{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(be.jsx)(gc.a,{component:s.b,to:"".concat(G.USERS,"/").concat(c.id),children:"Account"}),Object(be.jsx)(gc.a,{disabled:u.isLoading,onClick:b,children:"Logout"})]}))]})}})]}):Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(Be.a,{color:"inherit",variant:"contained",component:s.b,to:G.SIGNIN,children:"SignIn"}),Object(be.jsx)(Be.a,{color:"inherit",variant:"contained",component:s.b,to:G.SIGNUP,children:"SignUp"})]})})]})}),Object(be.jsx)(ii.a,{})]})},bo=function(){return Object(be.jsx)(Mt,{children:Object(be.jsx)(te.a,{component:s.b,to:G.CONTACTS,children:"Contact"})})},Oo=n(422),mo=Object(Oo.a)({palette:{spotify:{main:"#1DB954",light:"#a2ebbc"},twitter:{main:"#1da1f2",dark:"#158ad1"},itunes:{main:"#fa57c1",light:"#ffbfe9"}}}),ho=n(1284),fo=n(1283),po=n(147),xo=function(){var e=Object(j.b)(),t=Object(j.c)(B),n=Object(a.useState)("up"),c=Object(H.a)(n,2),i=c[0],r=c[1],o=function(){return e(D())};return Object(be.jsx)(ma.a,{fullWidth:!0,open:t,onClose:o,children:Object(be.jsx)(po.a,{value:i,children:Object(be.jsxs)(de.a,{square:!0,children:[Object(be.jsxs)(fo.a,{value:i,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){return r(t)},"aria-label":"disabled tabs example",variant:"fullWidth",children:[Object(be.jsx)(ec.a,{label:"SignIn",value:"in"}),Object(be.jsx)(ec.a,{label:"SignUp",value:"up"})]}),Object(be.jsx)(ho.a,{value:"in",children:Object(be.jsx)(_n,{onSuccess:o})}),Object(be.jsx)(ho.a,{value:"up",children:Object(be.jsx)(Vn,{onSuccess:o})})]})})})},vo=new l.a,go=function(){return Object(be.jsx)(j.a,{store:Q,children:Object(be.jsx)(o.a,{maxSnack:3,children:Object(be.jsx)(d.a,{client:vo,children:Object(be.jsx)(b.a,{loading:null,persistor:z,children:Object(be.jsxs)(O.a,{theme:mo,children:[Object(be.jsx)(u.ReactQueryDevtools,{initialIsOpen:!0}),Object(be.jsxs)(s.a,{basename:"front",children:[Object(be.jsx)(jo,{}),Object(be.jsx)(Hr,{}),Object(be.jsx)(bo,{}),Object(be.jsx)(xo,{})]})]})})})})})},So=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1309)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};n(1202);r.a.render(Object(be.jsx)(c.a.StrictMode,{children:Object(be.jsx)(go,{})}),document.getElementById("root")),So()},4:function(e){e.exports=JSON.parse('{"ALBUMS":"albums","ALBUM":"album","ARTISTS":"artists","ARTIST":"artist","BANDS":"bands","BAND":"band","MUSICS":"musics","MUSIC":"music","SCORE":"score","REPOSITORY":"repository","BLOB":"blob","USERS":"users","USER":"user","PROFILE":"profile","NOTIFICATIONS":"notifications","FOLLOWERS":"followers","FOLLOWING":"following","ISSUES":"issues","ISSUE":"issue","BOOKMARKS":"bookmarks","ITUNES":"itunes","WIKIPEDIA":"wikipedia","MUSIXMATCH":"musixmatch","SPOTIFY":"spotify"}')},405:function(e,t,n){e.exports={lyric:"Lyric_lyric__3rgSk"}},418:function(e,t,n){e.exports={atSidebar:"Score_atSidebar__TWnY_"}},5:function(e){e.exports=JSON.parse('{"ROOT":"/","SIGNUP":"/signup","SIGNIN":"/signin","NOTIFICATIONS":"/notifications","ALBUMS":"/albums","ARTISTS":"/artists","COMPOSERS":"/composers","LYRISTS":"/lyrists","MUSICS":"/musics","ISSUES":"/issues","INFO":"/info","SETTING":"/setting","BANDS":"/bands","USERS":"/users","LINKS":"/links","BOOKMARKS":"/bookmarks","RELATIONSHIPS":"/relationships","FOLLOWERS":"/followers","FOLLOWING":"/following","ARTIST_MUSICS":"/artist_musics","ALBUM_MUSICS":"/album_musics","ARTIST_BANDS":"/artist_bands","ARTIST_ALBUMS":"/artist_albums","BAND_ALBUMS":"/band_albums","TAB":"/tab","NEW":"/new","FILES":"/files","FILE":"/file","TREE":"/tree","BLOB":"/blob","LYRIC":"/lyric","CONTACTS":"/contacts"}')}},[[1203,1,2]]]);
//# sourceMappingURL=main.9f9e36f2.chunk.js.map